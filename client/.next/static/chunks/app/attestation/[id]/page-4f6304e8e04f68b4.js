(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[127],{69159:function(){},46601:function(){},75626:function(e,t,a){Promise.resolve().then(a.bind(a,81517))},81517:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ec}});var s=a(57437),l=a(23408),n=a(4862);function r(e){let{type:t,access:a}=e;return(0,s.jsxs)("div",{className:"rounded-md flex gap-2 px-2 py-1 border border-gray-900 bg-gray-900/2",children:[(0,s.jsx)("div",{className:"flex items-center",children:a?(0,s.jsx)(l.Z,{className:"text-green-300"}):(0,s.jsx)(n.Z,{className:"text-red-300"})}),(0,s.jsx)("span",{className:"px-1 text-gray-300 capitalise text-sm",children:t})]})}var i=a(12943),o=a(15566),c=a(3762),d=a(44495),u=a(69394),m=a(38437),f=a(79214),g=a(70306),x=a(2265),h=a(56926),p=a(95854),w=a(17094);let j=w.fC,v=x.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(w.aV,{ref:t,className:(0,g.cn)("inline-flex h-10 items-center justify-center rounded-md bg-gray-600 p-1 text-gray-300",a),...l})});v.displayName=w.aV.displayName;let y=x.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(w.xz,{ref:t,className:(0,g.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-green-300 data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...l})});y.displayName=w.xz.displayName;let b=x.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(w.VY,{ref:t,className:(0,g.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...l})});b.displayName=w.VY.displayName;var N=a(43904),S=a(27764),C=a(60102),R=a(56955);function k(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:t}=(0,h.py)({chainId:e});return x.useMemo(()=>t?function(e){var t,a;let{account:s,chain:l,transport:n}=e,r={chainId:l.id,name:l.name,ensAddress:null===(a=l.contracts)||void 0===a?void 0:null===(t=a.ensRegistry)||void 0===t?void 0:t.address},i=new R.Q(n,r),o=i.getSigner(s.address);return o}(t):void 0,[t])}var A=a(2482),D=a(49396),z=a.n(D),P=a(29222);async function F(){let e=await (0,m.D0)(),t=(await z().getAuthMessage(e.address)).data.message,a=await (0,m.l)({message:t});return{signedMessage:a,address:e.address}}async function I(){let{signedMessage:e,address:t}=await F(),a=(await P.Z.get("https://api.lighthouse.storage/api/auth/get_message?publicKey=".concat(t))).data;console.log(a);let s=await (0,m.l)({message:a}),l=await z().getApiKey(t,s);return l.data.apiKey?(localStorage.setItem("lighthouse-api-key-".concat(t),l.data.apiKey),l.data.apiKey):(console.log(l),l)}async function M(){let{signedMessage:e,address:t}=await F(),a=await (0,A.getJWT)(t,e);if(a.JWT)return localStorage.setItem("lighthouse-jwt-".concat(t),a.JWT),a;if(a.error)throw Error("JWT generation failed:")}async function T(e){return localStorage.getItem("lighthouse-jwt-".concat(e))||await M(),localStorage.getItem("lighthouse-api-key-".concat(e))||await I(),{JWT:localStorage.getItem("lighthouse-jwt-".concat(e)),apiKey:localStorage.getItem("lighthouse-api-key-".concat(e))}}var V=a(8899),Z=a(63014);function _(e){let{schema:t,schemaUID:a}=e,[l,n]=(0,x.useState)(!1),[r,i]=(0,x.useState)({name:"Test Attestation",file:"QmUCfJPFi5oCGruzVQQyt9zB2bjBkfckjB53LNJ5Qpzv5b",description:"This is incorrect and needs to be revoked if posisble"}),o=k(),{address:d}=(0,h.mA)(),m=e=>{i({...r,[e.target.name]:e.target.value})},f=async e=>{if(console.log(e),!d){Z.Am.error("no valid address");return}let{JWT:t,apiKey:a}=await T(d);if(!a){Z.Am.error("no valid apiKey");return}let s=e.target.files[0],l=new FormData;l.append("file",s),console.log(s),l.append("address",d),l.append("apiKey",a);try{let e=await P.Z.post("".concat("https://api.dataponte.com","/files/uploadFile"),l,{headers:{Authorization:"".concat(t),"Content-Type":"multipart/form-data"}});console.log(e),Z.Am.success("File uploaded successfully");let a=e.data.data[0].Hash;console.log(a),i(e=>({...e,file:a}))}catch(e){throw Z.Am.error("Something went wrong when uploading the file"),e}},g=async()=>{n(!0);let e=new V.EAS("0x4200000000000000000000000000000000000021");e.connect(o);let t=new V.SchemaEncoder("string name, string file, string description"),s=[{name:"name",value:r.name,type:"string"},{name:"file",value:r.file,type:"string"},{name:"description",value:r.description,type:"string"}];console.log(s);let l=t.encodeData(s);p();let i=await e.attest({schema:a,data:{recipient:"0x0000000000000000000000000000000000000000",revocable:!0,data:l}});await i.wait(),Z.Am.success("New attestation has been made"),n(!1)},p=async()=>{if(!d){Z.Am.error("no valid address");return}let{JWT:e,apiKey:t}=await T(d);if(!t){Z.Am.error("no valid apiKey");return}let s={address:d,schemaUID:a,file:r.file};try{let t=await P.Z.post("".concat("https://api.dataponte.com","/files/applyCustomControl"),s,{headers:{Authorization:"".concat(e),"Content-Type":"application/json"}});console.log(t),Z.Am.success("Shared access to your file to the schema")}catch(e){throw Z.Am.error("Something went wrong with applying access control."),e}};return(0,s.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(S._,{children:"Name"}),(0,s.jsx)(N.I,{name:"name",type:"text",value:r.name,onChange:m,placeholder:"Name",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(S._,{children:"Upload Data"}),(0,s.jsx)(N.I,{type:"file",id:"image",name:"image",multiple:!0,accept:"*",onChange:e=>f(e),className:"rounded bg-none  text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.file&&(0,s.jsxs)("span",{className:"text-gray-300 text-xs mt-2 ",children:["Succesfully uploaded: ",r.file]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(S._,{children:"Description"}),(0,s.jsx)(C.g,{name:"description",rows:3,className:"bg-gray-300 text-gray-900",value:r.description,onChange:m,placeholder:"Name"})]}),l?(0,s.jsxs)(c.z,{disabled:!0,children:[(0,s.jsx)(u.BGW,{className:"w-5 h-5 mr-2 animate-spin"})," Attesting..."]}):(0,s.jsx)(c.z,{onClick:g,children:"Submit data"})]})}var G=a(66062);let J=x.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(G.fC,{ref:t,className:(0,g.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-gray-300 data-[state=checked]:text-gray-900",a),...n,children:(0,s.jsx)(G.z$,{className:(0,g.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})})})});J.displayName=G.fC.displayName;var K=a(61396),E=a.n(K);let q=[{accessorKey:"attester",header:"attester",cell:e=>{let{row:t}=e,a=t.getValue("attester");return(0,s.jsx)(E(),{className:"text-right font-medium text-green-300 hover:text-green-500",href:"/profile/".concat(a),children:"View Attester"})}},{accessorKey:"decodedDataJson",header:"name",cell:e=>{let{row:t}=e,a=t.getValue("decodedDataJson");return(0,s.jsx)("div",{className:"text-right font-medium",children:a.name})}},{accessorKey:"decodedDataJson",header:"file",cell:e=>{let{row:t}=e,a=t.getValue("decodedDataJson");return(0,s.jsx)("div",{className:"text-right font-medium",children:a.file})}},{accessorKey:"decodedDataJson",header:"description",cell:e=>{let{row:t}=e,a=t.getValue("decodedDataJson");return(0,s.jsx)("div",{className:"text-right font-medium",children:a.description})}},{id:"select",header:e=>{let{table:t}=e;return(0,s.jsx)(J,{checked:t.getIsAllPageRowsSelected(),onCheckedChange:e=>t.toggleAllPageRowsSelected(!!e),"aria-label":"Select all"})},cell:e=>{let{row:t}=e;return(0,s.jsx)(J,{checked:t.getIsSelected(),onCheckedChange:e=>t.toggleSelected(!!e),"aria-label":"Select row"})},enableSorting:!1,enableHiding:!1}];var B=a(3216),H=a(7660),L=a(8641);function U(e){let{table:t}=e;return(0,s.jsxs)("div",{className:"flex w-full items-center justify-between px-2",children:[(0,s.jsxs)("div",{className:"flex-1 text-sm text-muted-foreground",children:[t.getFilteredSelectedRowModel().rows.length," of"," ",t.getFilteredRowModel().rows.length," row(s) selected."]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Rows per page"}),(0,s.jsxs)(L.Ph,{value:"".concat(t.getState().pagination.pageSize),onValueChange:e=>{t.setPageSize(Number(e))},children:[(0,s.jsx)(L.i4,{className:"h-8 w-[70px]",children:(0,s.jsx)(L.ki,{placeholder:t.getState().pagination.pageSize})}),(0,s.jsx)(L.Bw,{side:"top",children:[10,20,30,40,50].map(e=>(0,s.jsx)(L.Ql,{value:"".concat(e),children:e},e))})]})]}),(0,s.jsxs)("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",t.getState().pagination.pageIndex+1," of"," ",t.getPageCount()]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(c.z,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,s.jsx)(u.kRt,{className:"h-4 w-4"})]}),(0,s.jsxs)(c.z,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,s.jsx)(u.wyc,{className:"h-4 w-4"})]}),(0,s.jsxs)(c.z,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,s.jsx)(u.XCv,{className:"h-4 w-4"})]}),(0,s.jsxs)(c.z,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,s.jsx)(u.yr4,{className:"h-4 w-4"})]})]})]})]})}let W=x.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{className:"w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,g.cn)("w-full caption-bottom text-sm",a),...l})})});W.displayName="Table";let O=x.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("thead",{ref:t,className:(0,g.cn)("[&_tr]:border-b",a),...l})});O.displayName="TableHeader";let Q=x.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,g.cn)("[&_tr:last-child]:border-0",a),...l})});Q.displayName="TableBody";let Y=x.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,g.cn)("bg-primary font-medium text-primary-foreground",a),...l})});Y.displayName="TableFooter";let X=x.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tr",{ref:t,className:(0,g.cn)("border-b transition-colors hover:bg-gray-800/50 data-[state=selected]:bg-gray-900",a),...l})});X.displayName="TableRow";let $=x.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("th",{ref:t,className:(0,g.cn)("h-12 px-4 text-left align-middle font-medium text-green-300 capitalize [&:has([role=checkbox])]:pr-0",a),...l})});$.displayName="TableHead";let ee=x.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("td",{ref:t,className:(0,g.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...l})});ee.displayName="TableCell";let et=x.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("caption",{ref:t,className:(0,g.cn)("mt-4 text-sm text-muted-foreground",a),...l})});function ea(e){var t;let{columns:a,data:l}=e,[n,r]=(0,x.useState)([]),[i,o]=(0,x.useState)({}),{address:d}=(0,h.mA)(),u=(0,B.b7)({data:l,columns:a,getCoreRowModel:(0,H.sC)(),getPaginationRowModel:(0,H.G_)(),onSortingChange:r,getSortedRowModel:(0,H.tj)(),onRowSelectionChange:o,state:{sorting:n,rowSelection:i}}),m=async()=>{if(!d)return Z.Am.error("Please connect your wallet");let{JWT:e}=await T(d);if(!e)return;let t=u.getFilteredSelectedRowModel().rows.map(e=>e.original.decodedDataJson.file);console.log(t);try{let a=await P.Z.post("".concat("https://api.dataponte.com","/files/downloadMap"),{cids:t,address:d},{headers:{Authorization:"".concat(e),"Content-Type":"application/json"}}),s=new Blob([a.data],{type:"application/zip"}),l=window.URL.createObjectURL(s),n=document.createElement("a");n.href=l,n.download="files.zip",document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(l)}catch(e){throw Z.Am.error("Something went wrong when downloading the files"),e}};return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(W,{children:[(0,s.jsx)(O,{children:u.getHeaderGroups().map(e=>(0,s.jsx)(X,{children:e.headers.map(e=>(0,s.jsx)($,{children:e.isPlaceholder?null:(0,B.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(Q,{children:(null===(t=u.getRowModel().rows)||void 0===t?void 0:t.length)?u.getRowModel().rows.map(e=>(0,s.jsx)(X,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,s.jsx)(ee,{children:(0,B.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(X,{children:(0,s.jsx)(ee,{colSpan:a.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,s.jsx)("div",{className:"flex items-center justify-end space-x-2 py-4",children:(0,s.jsx)(U,{table:u})}),(0,s.jsx)("div",{className:"text-right",children:u.getFilteredSelectedRowModel().rows.length>0&&(0,s.jsxs)(c.z,{onClick:m,children:["Download (",u.getFilteredSelectedRowModel().rows.length,") files"]})})]})}function es(e){let{id:t,attestations:a}=e,[l,n]=(0,x.useState)([]),[r,i]=(0,x.useState)(!1);return console.log(a),(0,s.jsx)("div",{className:"container mx-auto py-10",children:r?(0,s.jsx)(o.Z,{}):(0,s.jsx)(ea,{columns:q,data:a})})}et.displayName="TableCaption";let el=[{accessorKey:"attester",header:"attester",cell:e=>{let{row:t}=e,a=t.getValue("attester");return(0,s.jsx)(E(),{className:"text-right font-medium text-green-300 hover:text-green-500",href:"/profile/".concat(a),children:"View Attester"})}},{accessorKey:"decodedDataJson",header:"name",cell:e=>{let{row:t}=e,a=t.getValue("decodedDataJson");return(0,s.jsx)("div",{className:"text-right font-medium",children:a.name})}},{accessorKey:"decodedDataJson",header:"file",cell:e=>{let{row:t}=e,a=t.getValue("decodedDataJson");return(0,s.jsx)("div",{className:"text-right font-medium",children:a.file})}},{accessorKey:"decodedDataJson",header:"description",cell:e=>{let{row:t}=e,a=t.getValue("decodedDataJson");return(0,s.jsx)("div",{className:"text-right font-medium",children:a.description})}},{accessorKey:"timeCreated",header:"timeCreated",cell:e=>{let{row:t}=e;return(0,s.jsx)(en,{futureTimestamp:parseFloat(t.getValue("timeCreated"))})}},{id:"select",header:e=>{let{table:t}=e;return(0,s.jsx)(J,{checked:t.getIsAllPageRowsSelected(),onCheckedChange:e=>t.toggleAllPageRowsSelected(!!e),"aria-label":"Select all"})},cell:e=>{let{row:t}=e;return(0,s.jsx)(J,{checked:t.getIsSelected(),onCheckedChange:e=>t.toggleSelected(!!e),"aria-label":"Select row"})},enableSorting:!1,enableHiding:!1}],en=e=>{let{futureTimestamp:t}=e,[a,l]=(0,x.useState)(t-Math.floor(Date.now()/1e3));return(0,x.useEffect)(()=>{let e=setInterval(()=>{l(t+3600-Math.floor(Date.now()/1e3))},1e3);return()=>clearInterval(e)},[t]),(0,s.jsx)("div",{className:"text-right font-medium",children:a})};function er(e){var t;let{columns:a,data:l}=e,[n,r]=(0,x.useState)([]),[i,o]=(0,x.useState)({}),d=k(),u=(0,B.b7)({data:l,columns:a,getCoreRowModel:(0,H.sC)(),getPaginationRowModel:(0,H.G_)(),onSortingChange:r,getSortedRowModel:(0,H.tj)(),onRowSelectionChange:o,state:{sorting:n,rowSelection:i}}),m=async()=>{console.log("testing if this display anything"),console.log(u);let e=new V.EAS("0x4200000000000000000000000000000000000021");e.connect(d),Z.Am.promise(e.revoke({schema:u.getFilteredSelectedRowModel().rows.map(e=>e.original.schemaId)[0],data:{uid:u.getFilteredSelectedRowModel().rows.map(e=>e.original.id)[0]}}),{pending:"Revoking CID",success:"You succesfully revoked the attstation.",error:"Error while revoking attestation."})};return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(W,{children:[(0,s.jsx)(O,{children:u.getHeaderGroups().map(e=>(0,s.jsx)(X,{children:e.headers.map(e=>(0,s.jsx)($,{children:e.isPlaceholder?null:(0,B.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(Q,{children:(null===(t=u.getRowModel().rows)||void 0===t?void 0:t.length)?u.getRowModel().rows.map(e=>(0,s.jsx)(X,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,s.jsx)(ee,{children:(0,B.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(X,{children:(0,s.jsx)(ee,{colSpan:a.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,s.jsx)("div",{className:"flex items-center justify-end space-x-2 py-4",children:(0,s.jsx)(U,{table:u})}),(0,s.jsx)("div",{className:"text-right",children:u.getFilteredSelectedRowModel().rows.length>0&&(0,s.jsxs)(c.z,{onClick:m,children:["Revoke (",u.getFilteredSelectedRowModel().rows.length,") issues"]})})]})}function ei(e){let{id:t,attestations:a}=e,[l,n]=(0,x.useState)([]),[r,i]=(0,x.useState)(!1);return(0,s.jsx)("div",{className:"container mx-auto py-10",children:r?(0,s.jsx)(o.Z,{}):(0,s.jsx)(er,{columns:el,data:a})})}function eo(e){let{attestations:t,id:a,schema:l,hasAccess:n,resolutionDays:r,details:i}=e,[c,u]=(0,x.useState)([]),[m,f]=(0,x.useState)([]),[g,w]=(0,x.useState)([]),[N,S]=(0,x.useState)([]),[C,R]=(0,x.useState)(!0),[k,A]=(0,x.useState)("");(0,x.useEffect)(()=>{let e=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:420,a=await fetch("".concat("https://api.dataponte.com","/library/attestation/").concat(e,"?clientId=").concat(t)),s=await a.json();console.log(s);let l=s.filter(e=>"Active"==e.status),n=s.filter(e=>"Revoke"==e.status),r=s.filter(e=>"Expired"==e.status);return u(s),w(l),S(n),f(r),A(null==s?void 0:s.resolver),R(!1),s};a&&e(a)},[t,a,r]);let{data:D,isLoading:z}=(0,h.do)({address:k,abi:d.q.attestation[420].abi,functionName:"attestersGatingToken",args:[]}),{data:P,isLoading:F}=(0,h.do)({address:k,abi:d.q.attestation[420].abi,functionName:"revokersGatingToken",args:[]});return C?(0,s.jsx)(o.Z,{}):(0,s.jsxs)(j,{defaultValue:"attest",className:"w-full flex flex-col items-center",children:[(0,s.jsxs)(v,{className:"grid max-w-2xl grid-cols-3 mb-4",children:[(0,s.jsx)(y,{value:"attest",disabled:!n.attest,children:"Attest"}),(0,s.jsx)(y,{value:"view",disabled:!n.fileAccess,children:"View Attestations"}),(0,s.jsx)(y,{value:"revoke",disabled:!n.revoke,children:"Revoke"})]}),(0,s.jsx)(b,{value:"attest",className:"min-w-[300px]",children:(0,s.jsxs)(p.Zb,{children:[(0,s.jsxs)(p.Ol,{children:[(0,s.jsx)(p.ll,{className:"text-gray-300 tracking-wider font-light",children:"Create Attestation"}),(0,s.jsxs)(p.SZ,{className:"text-green-300",children:["Reward ",i.attestReward," ETH"]})]}),(0,s.jsx)(p.aY,{className:"space-y-2",children:(0,s.jsx)(_,{schema:l,schemaUID:a})})]})}),(0,s.jsx)(b,{value:"view",className:"w-full",children:n.fileAccess?(0,s.jsx)(es,{id:a,attestations:m}):(0,s.jsx)("div",{children:" No access "})}),(0,s.jsx)(b,{value:"revoke",className:"w-full",children:n.revoke?(0,s.jsx)("div",{children:(0,s.jsx)(ei,{id:a,attestations:g})}):(0,s.jsx)("span",{children:"No access "})})]})}function ec(e){var t,a;let{params:l}=e,[n,p]=(0,x.useState)({}),[w,j]=(0,x.useState)({mintPrice:"0"}),[v,y]=(0,x.useState)(!1),[b,N]=(0,x.useState)({revoke:!1,attest:!1,fileAccess:!1}),{address:S}=(0,h.mA)(),{isLoading:C,write:R}=(0,h.GG)({address:d.q.attestionFactory[420].contract,abi:d.q.attestionFactory[420].abi,functionName:"mint",args:[l.id,1],value:null==n?void 0:n.mintPrice}),{isLoading:k,write:A}=(0,h.GG)({address:null==n?void 0:n.resolver,abi:d.q.attestation[420].abi,functionName:"resolveAttestations"}),{isLoading:D,write:z}=(0,h.GG)({address:null==n?void 0:n.resolver,abi:d.q.attestation[420].abi,functionName:"splitMintingFunds"});return((0,x.useEffect)(()=>{async function e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:420,a=await fetch("".concat("https://api.dataponte.com","/library/schema/").concat(e,"?clientId=").concat(t)),s=await a.json();console.log(s),p(s),y(!1)}let t=async e=>{let t=await (0,m.a4)({address:d.q.attestionFactory[420].contract,abi:d.q.attestionFactory[420].abi,functionName:"hasAccess",args:[e,S]}),a=await (0,m.a4)({address:d.q.attestionFactory[420].contract,abi:d.q.attestionFactory[420].abi,functionName:"hasRevokeAccess",args:[e,S]}),s=await (0,m.a4)({address:d.q.attestionFactory[420].contract,abi:d.q.attestionFactory[420].abi,functionName:"hasAttestAccess",args:[e,S]});N({revoke:a,attest:s,fileAccess:t}),console.log(a,s,t)};l.id,S&&(y(!0),e(l.id),t(l.id))},[l,S]),v)?(0,s.jsx)(o.Z,{}):(0,s.jsxs)("main",{className:"flex flex-col items-center text-left gap-8 m-12",children:[(0,s.jsxs)("div",{className:"max-w-4xl flex flex-col gap-4 items-center text-gray-300",children:[(0,s.jsxs)("div",{className:"flex md:flex-row flex-col justify-between w-full gap-8",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("h1",{className:"text-left text-2xl tracking-wider font-light text-green-300",children:n.name}),(0,s.jsx)("span",{className:"text-sm text-left",children:n.description}),(0,s.jsx)("div",{className:"flex gap-2",children:null===(t=n.tags)||void 0===t?void 0:t.map((e,t)=>(0,s.jsx)(f.C,{color:"var(--color-green-300)",children:e},t))}),(0,s.jsxs)("span",{className:"text-gray-400 m-4",children:["Revocation period: ",(0,g.s)(n.attestResolutionDays)]}),(0,s.jsx)("h3",{className:"font-medium tracking-wider text-green-300",children:"Schema Attributes"}),(0,s.jsx)(i.Z,{list:n.schema})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[b.fileAccess?n.isMintable?(0,s.jsx)(c.z,{onClick:()=>{z()},disabled:D,children:D?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.BGW,{className:"mr-2 h-4 w-4 animate-spin"})," ","Splitting..."]}):"Splitting Funds"}):(0,s.jsx)(c.z,{onClick:()=>{A()},disabled:k,children:k?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.BGW,{className:"mr-2 h-4 w-4 animate-spin"})," ","Resolving..."]}):"Resolve Attestations"}):n.isMintable?(0,s.jsxs)(c.z,{onClick:()=>R(),disabled:C,children:[C?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.BGW,{})," Minting.."]}):"Subscribe to get access ","price : ",n.mintPrice/1e12/1e6," ETH"]}):(0,s.jsx)(c.z,{disabled:!0,children:"Private DataPool"}),(0,s.jsx)(r,{type:"Revoke",access:b.revoke}),(0,s.jsx)(r,{type:"Attest",access:b.attest}),(0,s.jsx)(r,{type:"View",access:b.fileAccess})]})]}),(0,s.jsx)("div",{className:"flex flex-col gap-4 w-full text-left mt-4"})]}),(0,s.jsx)(eo,{attestations:null===(a=n._count)||void 0===a?void 0:a.attestations,id:n.id,resolutionDays:n.attestResolutionDays,schema:n.schema,hasAccess:b,details:n})]})}},12943:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(57437),l=a(2265);function n(e){let{name:t,type:a}=e;return(0,s.jsxs)("div",{className:"flex flex-col text-left bg-gray-700 rounded-md p-2 w-fit",children:[(0,s.jsx)("span",{className:"font-medium ",children:a}),(0,s.jsx)("span",{className:"text-sm font-light text-green-300",children:t})]})}function r(e){let{list:t}=e,[a,r]=(0,l.useState)([]);return(0,l.useEffect)(()=>{console.log(t),t&&t.split(",").map((e,t)=>{if(t>0){let[t,a,s]=e.split(" ");r(e=>[...e,{name:s,type:a}])}else{let[t,a]=e.split(" ");r(e=>[...e,{name:a,type:t}])}})},[t]),(0,s.jsx)("div",{className:"flex gap-2 m-2",children:a.map((e,t)=>(0,s.jsx)(n,{name:e.name,type:e.type},t))})}},95854:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return r},aY:function(){return d},ll:function(){return o}});var s=a(57437),l=a(2265),n=a(70306);let r=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg bg-gray-600 text-card-foreground shadow-sm",a),...l})});r.displayName="Card";let i=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...l})});i.displayName="CardHeader";let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight text-gray-300",a),...l})});o.displayName="CardTitle";let c=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...l})});c.displayName="CardDescription";let d=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0 text-gray-100",a),...l})});d.displayName="CardContent";let u=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...l})});u.displayName="CardFooter"},43904:function(e,t,a){"use strict";a.d(t,{I:function(){return r}});var s=a(57437),l=a(2265),n=a(70306);let r=l.forwardRef((e,t)=>{let{className:a,type:l,...r}=e;return(0,s.jsx)("input",{type:l,className:(0,n.cn)("flex h-10 w-full rounded-md  text-gray-900 bg-gray-300 bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2  focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});r.displayName="Input"},27764:function(e,t,a){"use strict";a.d(t,{_:function(){return c}});var s=a(57437),l=a(36743),n=a(96061),r=a(2265),i=a(70306);let o=(0,n.j)("text-sm font-light tracking-wider mb-1 leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-green-300"),c=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(l.f,{ref:t,className:(0,i.cn)(o(),a),...n})});c.displayName=l.f.displayName},8641:function(e,t,a){"use strict";a.d(t,{Bw:function(){return f},DI:function(){return d},Ph:function(){return c},Ql:function(){return x},i4:function(){return m},ki:function(){return u},n5:function(){return g}});var s=a(57437),l=a(2265),n=a(76295),r=a(74457),i=a(23408),o=a(70306);let c=n.fC,d=n.ZA,u=n.B4,m=l.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,s.jsxs)(n.xz,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...i,children:[l,(0,s.jsx)(n.JO,{asChild:!0,children:(0,s.jsx)(r.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let f=l.forwardRef((e,t)=>{let{className:a,children:l,position:r="popper",...i}=e;return(0,s.jsx)(n.h_,{children:(0,s.jsx)(n.VY,{ref:t,className:(0,o.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...i,children:(0,s.jsx)(n.l_,{className:(0,o.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l})})})});f.displayName=n.VY.displayName;let g=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(n.__,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})});g.displayName=n.__.displayName;let x=l.forwardRef((e,t)=>{let{className:a,children:l,...r}=e;return(0,s.jsxs)(n.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.wU,{children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(n.eT,{children:l})]})});x.displayName=n.ck.displayName;let h=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(n.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...l})});h.displayName=n.Z0.displayName},60102:function(e,t,a){"use strict";a.d(t,{g:function(){return r}});var s=a(57437),l=a(2265),n=a(70306);let r=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});r.displayName="Textarea"}},function(e){e.O(0,[705,310,331,638,396,522,358,447,48,506,424,212,275,797,971,596,744],function(){return e(e.s=75626)}),_N_E=e.O()}]);