(() => {
var exports = {};
exports.id = 127;
exports.ids = [127];
exports.modules = {

/***/ 18038:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react");

/***/ }),

/***/ 98704:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-dom/server-rendering-stub");

/***/ }),

/***/ 97897:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-server-dom-webpack/client");

/***/ }),

/***/ 56786:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react/jsx-runtime");

/***/ }),

/***/ 5868:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/app-render");

/***/ }),

/***/ 71170:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/get-segment-param");

/***/ }),

/***/ 96624:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/future/helpers/interception-routes");

/***/ }),

/***/ 75281:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/future/route-modules/route-module");

/***/ }),

/***/ 57085:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/app-router-context");

/***/ }),

/***/ 20199:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/hash");

/***/ }),

/***/ 39569:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/hooks-client-context");

/***/ }),

/***/ 17160:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router-context");

/***/ }),

/***/ 30893:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/add-path-prefix");

/***/ }),

/***/ 12336:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/format-url");

/***/ }),

/***/ 17887:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/handle-smooth-scroll");

/***/ }),

/***/ 98735:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-bot");

/***/ }),

/***/ 60120:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-local-url");

/***/ }),

/***/ 68231:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/parse-path");

/***/ }),

/***/ 53750:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/remove-trailing-slash");

/***/ }),

/***/ 70982:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/resolve-href");

/***/ }),

/***/ 79618:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/server-inserted-html");

/***/ }),

/***/ 78423:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/utils");

/***/ }),

/***/ 39491:
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ 14300:
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ 32081:
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ 6113:
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ 82361:
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ 57147:
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ 13685:
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ 95687:
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ 41808:
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ 6005:
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ 22037:
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ 71017:
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ 12781:
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ 71576:
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ 24404:
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ 76224:
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ 57310:
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ 73837:
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ 59796:
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ 16894:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GlobalError: () => (/* reexport safe */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_1__.GlobalError),
/* harmony export */   __next_app__: () => (/* binding */ __next_app__),
/* harmony export */   originalPathname: () => (/* binding */ originalPathname),
/* harmony export */   pages: () => (/* binding */ pages),
/* harmony export */   routeModule: () => (/* binding */ routeModule),
/* harmony export */   tree: () => (/* binding */ tree)
/* harmony export */ });
/* harmony import */ var next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7262);
/* harmony import */ var next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(31823);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12502);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_2__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_2__) if(["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);

    

    const tree = {
        children: [
        '',
        {
        children: [
        'attestation',
        {
        children: [
        '[id]',
        {
        children: ['__PAGE__', {}, {
          page: [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 16782)), "/Users/koenschuite/github/super-attestations/client/app/attestation/[id]/page.tsx"],
          
        }]
      },
        {
          
          
        }
      ]
      },
        {
          
          metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 57481))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
        }
      ]
      },
        {
          'layout': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 34291)), "/Users/koenschuite/github/super-attestations/client/app/layout.tsx"],
          metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 57481))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
        }
      ]
      }.children;
    const pages = ["/Users/koenschuite/github/super-attestations/client/app/attestation/[id]/page.tsx"];

    

    const originalPathname = "/attestation/[id]/page"
    const __next_app__ = {
      require: __webpack_require__,
      // all modules are in the entry chunk, so we never actually need to load chunks in webpack
      loadChunk: () => Promise.resolve()
    }

    

    // Create and export the route module that will be consumed.
    const options = {"definition":{"kind":"APP_PAGE","page":"/attestation/[id]/page","pathname":"/attestation/[id]","bundlePath":"app/attestation/[id]/page","filename":"","appPaths":[]}}
    const routeModule = new (next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0___default())({
      ...options,
      userland: {
        loaderTree: tree,
      },
    })
  

/***/ }),

/***/ 95855:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 86493))

/***/ }),

/***/ 86493:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ AttestationPage)
});

// EXTERNAL MODULE: external "next/dist/compiled/react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(56786);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/check.mjs
var check = __webpack_require__(27195);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/x.mjs
var x = __webpack_require__(95833);
;// CONCATENATED MODULE: ./components/core/attestation/access-type.tsx


function AccessType({ type, access }) {
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: "rounded-md flex gap-2 px-2 py-1 border border-gray-900 bg-gray-900/2",
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "flex items-center",
                children: access ? /*#__PURE__*/ jsx_runtime_.jsx(check/* default */.Z, {
                    className: "text-green-300"
                }) : /*#__PURE__*/ jsx_runtime_.jsx(x/* default */.Z, {
                    className: "text-red-300"
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("span", {
                className: "px-1 text-gray-300 capitalise text-sm",
                children: type
            })
        ]
    });
}

// EXTERNAL MODULE: ./components/core/attestation/schema/schema-list.tsx + 1 modules
var schema_list = __webpack_require__(79037);
// EXTERNAL MODULE: ./components/core/loading/loading.tsx + 1 modules
var loading_loading = __webpack_require__(70057);
// EXTERNAL MODULE: ./components/ui/button.tsx
var ui_button = __webpack_require__(44368);
// EXTERNAL MODULE: ./constants/contracts/index.ts + 5 modules
var contracts = __webpack_require__(47463);
// EXTERNAL MODULE: ./node_modules/@radix-ui/react-icons/dist/react-icons.cjs.production.min.js
var react_icons_cjs_production_min = __webpack_require__(79130);
// EXTERNAL MODULE: ./node_modules/@wagmi/core/dist/chunk-LAFZBYO7.js + 5 modules
var chunk_LAFZBYO7 = __webpack_require__(98583);
// EXTERNAL MODULE: ./components/ui/badge.tsx
var badge = __webpack_require__(85012);
// EXTERNAL MODULE: ./lib/utils.ts
var utils = __webpack_require__(12857);
// EXTERNAL MODULE: external "next/dist/compiled/react"
var react_ = __webpack_require__(18038);
// EXTERNAL MODULE: ./node_modules/wagmi/dist/index.js + 25 modules
var dist = __webpack_require__(40965);
// EXTERNAL MODULE: ./components/ui/card.tsx
var card = __webpack_require__(70737);
// EXTERNAL MODULE: ./node_modules/@radix-ui/react-tabs/dist/index.mjs + 1 modules
var react_tabs_dist = __webpack_require__(5371);
;// CONCATENATED MODULE: ./components/ui/tabs.tsx
/* __next_internal_client_entry_do_not_use__ Tabs,TabsContent,TabsList,TabsTrigger auto */ 



const Tabs = react_tabs_dist/* Root */.fC;
const TabsList = /*#__PURE__*/ react_.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ jsx_runtime_.jsx(react_tabs_dist/* List */.aV, {
        ref: ref,
        className: (0,utils.cn)("inline-flex h-10 items-center justify-center rounded-md bg-gray-600 p-1 text-gray-300", className),
        ...props
    }));
TabsList.displayName = react_tabs_dist/* List */.aV.displayName;
const TabsTrigger = /*#__PURE__*/ react_.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ jsx_runtime_.jsx(react_tabs_dist/* Trigger */.xz, {
        ref: ref,
        className: (0,utils.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-green-300 data-[state=active]:text-foreground data-[state=active]:shadow-sm", className),
        ...props
    }));
TabsTrigger.displayName = react_tabs_dist/* Trigger */.xz.displayName;
const TabsContent = /*#__PURE__*/ react_.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ jsx_runtime_.jsx(react_tabs_dist/* Content */.VY, {
        ref: ref,
        className: (0,utils.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2", className),
        ...props
    }));
TabsContent.displayName = react_tabs_dist/* Content */.VY.displayName;


// EXTERNAL MODULE: ./components/ui/input.tsx
var input = __webpack_require__(5538);
// EXTERNAL MODULE: ./components/ui/label.tsx
var label = __webpack_require__(81396);
// EXTERNAL MODULE: ./components/ui/textarea.tsx
var ui_textarea = __webpack_require__(21460);
// EXTERNAL MODULE: ./node_modules/ethers/lib/index.js
var lib = __webpack_require__(77222);
;// CONCATENATED MODULE: ./lib/ethers.ts



function publicClientToProvider(publicClient) {
    const { chain, transport } = publicClient;
    const network = {
        chainId: chain.id,
        name: chain.name,
        ensAddress: chain.contracts?.ensRegistry?.address
    };
    if (transport.type === "fallback") return new providers.FallbackProvider(transport.transports.map(({ value })=>new providers.JsonRpcProvider(value?.url, network)));
    return new providers.JsonRpcProvider(transport.url, network);
}
/** Hook to convert a viem Public Client to an ethers.js Provider. */ function useEthersProvider({ chainId } = {}) {
    const publicClient = usePublicClient({
        chainId
    });
    return React.useMemo(()=>publicClientToProvider(publicClient), [
        publicClient
    ]);
}
function walletClientToSigner(walletClient) {
    const { account, chain, transport } = walletClient;
    const network = {
        chainId: chain.id,
        name: chain.name,
        ensAddress: chain.contracts?.ensRegistry?.address
    };
    const provider = new lib.providers.Web3Provider(transport, network);
    const signer = provider.getSigner(account.address);
    return signer;
}
/** Hook to convert a viem Wallet Client to an ethers.js Signer. */ function useEthersSigner({ chainId } = {}) {
    const { data: walletClient } = (0,dist/* useWalletClient */.py)({
        chainId
    });
    return react_.useMemo(()=>walletClient ? walletClientToSigner(walletClient) : undefined, [
        walletClient
    ]);
}

// EXTERNAL MODULE: ./node_modules/@lighthouse-web3/kavach/index.js
var kavach = __webpack_require__(3922);
// EXTERNAL MODULE: ./node_modules/@lighthouse-web3/sdk/dist/Lighthouse/index.js
var Lighthouse = __webpack_require__(68950);
var Lighthouse_default = /*#__PURE__*/__webpack_require__.n(Lighthouse);
// EXTERNAL MODULE: ./node_modules/axios/lib/axios.js + 46 modules
var axios = __webpack_require__(93258);
;// CONCATENATED MODULE: ./lib/lighthouse/index.ts
//here we will generate the api key and jwt token, so we can use it directly. we need to store them in such a way that we can access them from the frontend
// and pass them on to the backend for encryption. 




//API key generation 
async function signAuthMessage() {
    const account = await (0,chunk_LAFZBYO7/* getAccount */.D0)();
    const messageRequested = (await Lighthouse_default().getAuthMessage(account.address)).data.message;
    const signedMessage = await (0,chunk_LAFZBYO7/* signMessage */.l)({
        message: messageRequested
    });
    return {
        signedMessage,
        address: account.address
    };
}
async function generateApiKey() {
    const { signedMessage, address } = await signAuthMessage();
    const verificationMessage = (await axios/* default */.Z.get(`https://api.lighthouse.storage/api/auth/get_message?publicKey=${address}`)).data;
    console.log(verificationMessage);
    const signedVerificationMessage = await (0,chunk_LAFZBYO7/* signMessage */.l)({
        message: verificationMessage
    });
    const response = await Lighthouse_default().getApiKey(address, signedVerificationMessage);
    if (response.data.apiKey) {
        localStorage.setItem(`lighthouse-api-key-${address}`, response.data.apiKey);
        return response.data.apiKey;
    }
    console.log(response);
    return response;
}
async function generateJWT() {
    const { signedMessage, address } = await signAuthMessage();
    const response = await (0,kavach.getJWT)(address, signedMessage);
    if (response.JWT) {
        localStorage.setItem(`lighthouse-jwt-${address}`, response.JWT);
        return response;
    }
    if (response.error) {
        throw Error("JWT generation failed:");
    }
}
async function getLighthouseKeys(address) {
    //first check if there is an jwt token
    if (!localStorage.getItem(`lighthouse-jwt-${address}`)) {
        await generateJWT();
    }
    if (!localStorage.getItem(`lighthouse-api-key-${address}`)) {
        await generateApiKey();
    }
    return {
        JWT: localStorage.getItem(`lighthouse-jwt-${address}`),
        apiKey: localStorage.getItem(`lighthouse-api-key-${address}`)
    };
}

// EXTERNAL MODULE: ./node_modules/@ethereum-attestation-service/eas-sdk/dist/index.js
var eas_sdk_dist = __webpack_require__(81587);
// EXTERNAL MODULE: ./node_modules/react-toastify/dist/react-toastify.esm.mjs
var react_toastify_esm = __webpack_require__(34751);
;// CONCATENATED MODULE: ./components/core/attestation/schema/schema-form.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 












function SchemaForm({ schema, schemaUID }) {
    //  const [schema, setSchema] = useState<SchemaInput[]>([]);
    const [loading, setLoading] = (0,react_.useState)(false);
    const [formData, setFormData] = (0,react_.useState)({
        name: "Test Attestation",
        file: "QmUCfJPFi5oCGruzVQQyt9zB2bjBkfckjB53LNJ5Qpzv5b",
        description: "This is incorrect and needs to be revoked if posisble"
    });
    const signer = useEthersSigner();
    const { address } = (0,dist/* useAccount */.mA)();
    /*   useEffect(() => {
    console.log(list);

    if (list) {
      list.split(",").map((listItem: string, index) => {
          if (index > 0) {
            const [empty, type, name] = listItem.split(" ");
            setSchema((prev) => [
              ...prev,
              { name: name, type: type, value: null },
            ]);
          } else {
            const [type, name] = listItem.split(" ");
            setSchema((prev) => [
              ...prev,
              { name: name, type: type, value: null },
            ]);
          }
      });
    }
  }, [list]);
 */ const handleChange = (e)=>{
        setFormData({
            ...formData,
            [e.target.name]: e.target.value
        });
    };
    const handleFileChange = async (e)=>{
        //need to upload file to lighthouse and make sure that we get back the hash.
        console.log(e);
        if (!address) {
            react_toastify_esm/* toast */.Am.error("no valid address");
            return;
        }
        const { JWT, apiKey } = await getLighthouseKeys(address);
        if (!apiKey) {
            react_toastify_esm/* toast */.Am.error("no valid apiKey");
            return;
        }
        const file = e.target.files[0];
        const formData = new FormData();
        formData.append("file", file);
        console.log(file);
        formData.append("address", address);
        formData.append("apiKey", apiKey);
        const config = {
            headers: {
                Authorization: `${JWT}`,
                "Content-Type": "multipart/form-data"
            }
        };
        try {
            const url = "https://api.dataponte.com";
            const response = await axios/* default */.Z.post(`${url}/files/uploadFile`, formData, config);
            console.log(response);
            react_toastify_esm/* toast */.Am.success("File uploaded successfully");
            const hash = response.data.data[0].Hash;
            console.log(hash);
            setFormData((prev)=>({
                    ...prev,
                    file: hash
                }));
        } catch (err) {
            react_toastify_esm/* toast */.Am.error("Something went wrong when uploading the file");
            throw err;
        }
    };
    const submitData = async ()=>{
        setLoading(true);
        const EASoGoerli = "0x4200000000000000000000000000000000000021";
        const eas = new eas_sdk_dist.EAS(EASoGoerli);
        //const signer = walletClientToSigner(walletCline);
        //@ts-ignore
        eas.connect(signer);
        //ts-ignore error
        const schemaEncoder = new eas_sdk_dist.SchemaEncoder("string name, string file, string description");
        //check if there is a type of uint256 and convert value to number
        const schemaList = [
            {
                name: "name",
                value: formData.name,
                type: "string"
            },
            {
                name: "file",
                value: formData.file,
                type: "string"
            },
            {
                name: "description",
                value: formData.description,
                type: "string"
            }
        ];
        // its not a schema so we can put in our won. 
        console.log(schemaList);
        const encodedData = schemaEncoder.encodeData(schemaList);
        applyCustomAccessControl();
        const tx = await eas.attest({
            schema: schemaUID,
            data: {
                recipient: "0x0000000000000000000000000000000000000000",
                revocable: true,
                data: encodedData
            }
        });
        await tx.wait();
        react_toastify_esm/* toast */.Am.success("New attestation has been made");
        setLoading(false);
    };
    const applyCustomAccessControl = async ()=>{
        if (!address) {
            react_toastify_esm/* toast */.Am.error("no valid address");
            return;
        }
        const { JWT, apiKey } = await getLighthouseKeys(address);
        if (!apiKey) {
            react_toastify_esm/* toast */.Am.error("no valid apiKey");
            return;
        }
        const data = {
            address: address,
            schemaUID: schemaUID,
            file: formData.file
        };
        const config = {
            headers: {
                Authorization: `${JWT}`,
                "Content-Type": "application/json"
            }
        };
        try {
            const url = "https://api.dataponte.com";
            const response = await axios/* default */.Z.post(`${url}/files/applyCustomControl`, data, config);
            console.log(response);
            react_toastify_esm/* toast */.Am.success("Shared access to your file to the schema");
        } catch (err) {
            react_toastify_esm/* toast */.Am.error("Something went wrong with applying access control.");
            throw err;
        }
    };
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: "w-full flex flex-col gap-4",
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx(label/* Label */._, {
                        children: "Name"
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx(input/* Input */.I, {
                        name: "name",
                        type: "text",
                        value: formData.name,
                        onChange: handleChange,
                        placeholder: "Name",
                        required: true
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx(label/* Label */._, {
                        children: "Upload Data"
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx(input/* Input */.I, {
                        type: "file",
                        id: "image",
                        name: "image",
                        multiple: true,
                        accept: "*",
                        onChange: (e)=>handleFileChange(e),
                        className: "rounded bg-none  text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500"
                    }),
                    formData.file && /*#__PURE__*/ (0,jsx_runtime_.jsxs)("span", {
                        className: "text-gray-300 text-xs mt-2 ",
                        children: [
                            "Succesfully uploaded: ",
                            formData.file
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx(label/* Label */._, {
                        children: "Description"
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx(ui_textarea/* Textarea */.g, {
                        name: "description",
                        rows: 3,
                        className: "bg-gray-300 text-gray-900",
                        value: formData.description,
                        onChange: handleChange,
                        placeholder: "Name"
                    })
                ]
            }),
            loading ? /*#__PURE__*/ (0,jsx_runtime_.jsxs)(ui_button/* Button */.z, {
                disabled: true,
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx(react_icons_cjs_production_min/* ReloadIcon */.BGW, {
                        className: "w-5 h-5 mr-2 animate-spin"
                    }),
                    " Attesting..."
                ]
            }) : /*#__PURE__*/ jsx_runtime_.jsx(ui_button/* Button */.z, {
                onClick: submitData,
                children: "Submit data"
            })
        ]
    });
}

// EXTERNAL MODULE: ./node_modules/@radix-ui/react-checkbox/dist/index.mjs
var react_checkbox_dist = __webpack_require__(68856);
;// CONCATENATED MODULE: ./components/ui/checkbox.tsx
/* __next_internal_client_entry_do_not_use__ Checkbox auto */ 




const Checkbox = /*#__PURE__*/ react_.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ jsx_runtime_.jsx(react_checkbox_dist/* Root */.fC, {
        ref: ref,
        className: (0,utils.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-gray-300 data-[state=checked]:text-gray-900", className),
        ...props,
        children: /*#__PURE__*/ jsx_runtime_.jsx(react_checkbox_dist/* Indicator */.z$, {
            className: (0,utils.cn)("flex items-center justify-center text-current"),
            children: /*#__PURE__*/ jsx_runtime_.jsx(check/* default */.Z, {
                className: "h-4 w-4"
            })
        })
    }));
Checkbox.displayName = react_checkbox_dist/* Root */.fC.displayName;


// EXTERNAL MODULE: ./node_modules/next/link.js
var next_link = __webpack_require__(11440);
var link_default = /*#__PURE__*/__webpack_require__.n(next_link);
;// CONCATENATED MODULE: ./app/attestation/[id]/attestion-table/columns.tsx
/* __next_internal_client_entry_do_not_use__ AttestionColumns auto */ 


const AttestionColumns = [
    {
        accessorKey: "attester",
        header: "attester",
        cell: ({ row })=>{
            const attester = row.getValue("attester");
            return /*#__PURE__*/ jsx_runtime_.jsx((link_default()), {
                className: "text-right font-medium text-green-300 hover:text-green-500",
                href: `/profile/${attester}`,
                children: "View Attester"
            });
        }
    },
    {
        accessorKey: "decodedDataJson",
        header: "name",
        cell: ({ row })=>{
            const data = row.getValue("decodedDataJson");
            return /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "text-right font-medium",
                children: data.name
            });
        }
    },
    {
        accessorKey: "decodedDataJson",
        header: "file",
        cell: ({ row })=>{
            const data = row.getValue("decodedDataJson");
            return /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "text-right font-medium",
                children: data.file
            });
        }
    },
    {
        accessorKey: "decodedDataJson",
        header: "description",
        cell: ({ row })=>{
            const data = row.getValue("decodedDataJson");
            return /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "text-right font-medium",
                children: data.description
            });
        }
    },
    {
        id: "select",
        header: ({ table })=>/*#__PURE__*/ jsx_runtime_.jsx(Checkbox, {
                checked: table.getIsAllPageRowsSelected(),
                onCheckedChange: (value)=>table.toggleAllPageRowsSelected(!!value),
                "aria-label": "Select all"
            }),
        cell: ({ row })=>/*#__PURE__*/ jsx_runtime_.jsx(Checkbox, {
                checked: row.getIsSelected(),
                onCheckedChange: (value)=>row.toggleSelected(!!value),
                "aria-label": "Select row"
            }),
        enableSorting: false,
        enableHiding: false
    }
];

// EXTERNAL MODULE: ./node_modules/@tanstack/react-table/build/lib/index.mjs
var build_lib = __webpack_require__(11200);
// EXTERNAL MODULE: ./node_modules/@tanstack/table-core/build/lib/index.mjs
var table_core_build_lib = __webpack_require__(75629);
// EXTERNAL MODULE: ./components/ui/select.tsx
var ui_select = __webpack_require__(60615);
;// CONCATENATED MODULE: ./components/ui/data-table-pagination.tsx




function DataTablePagination({ table }) {
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: "flex w-full items-center justify-between px-2",
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "flex-1 text-sm text-muted-foreground",
                children: [
                    table.getFilteredSelectedRowModel().rows.length,
                    " of",
                    " ",
                    table.getFilteredRowModel().rows.length,
                    " row(s) selected."
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "flex items-center space-x-6 lg:space-x-8",
                children: [
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                        className: "flex items-center space-x-2",
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                className: "text-sm font-medium",
                                children: "Rows per page"
                            }),
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(ui_select/* Select */.Ph, {
                                value: `${table.getState().pagination.pageSize}`,
                                onValueChange: (value)=>{
                                    table.setPageSize(Number(value));
                                },
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx(ui_select/* SelectTrigger */.i4, {
                                        className: "h-8 w-[70px]",
                                        children: /*#__PURE__*/ jsx_runtime_.jsx(ui_select/* SelectValue */.ki, {
                                            placeholder: table.getState().pagination.pageSize
                                        })
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx(ui_select/* SelectContent */.Bw, {
                                        side: "top",
                                        children: [
                                            10,
                                            20,
                                            30,
                                            40,
                                            50
                                        ].map((pageSize)=>/*#__PURE__*/ jsx_runtime_.jsx(ui_select/* SelectItem */.Ql, {
                                                value: `${pageSize}`,
                                                children: pageSize
                                            }, pageSize))
                                    })
                                ]
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                        className: "flex w-[100px] items-center justify-center text-sm font-medium",
                        children: [
                            "Page ",
                            table.getState().pagination.pageIndex + 1,
                            " of",
                            " ",
                            table.getPageCount()
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                        className: "flex items-center space-x-2",
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(ui_button/* Button */.z, {
                                variant: "outline",
                                className: "hidden h-8 w-8 p-0 lg:flex",
                                onClick: ()=>table.setPageIndex(0),
                                disabled: !table.getCanPreviousPage(),
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                        className: "sr-only",
                                        children: "Go to first page"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx(react_icons_cjs_production_min/* DoubleArrowLeftIcon */.kRt, {
                                        className: "h-4 w-4"
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(ui_button/* Button */.z, {
                                variant: "outline",
                                className: "h-8 w-8 p-0",
                                onClick: ()=>table.previousPage(),
                                disabled: !table.getCanPreviousPage(),
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                        className: "sr-only",
                                        children: "Go to previous page"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx(react_icons_cjs_production_min/* ChevronLeftIcon */.wyc, {
                                        className: "h-4 w-4"
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(ui_button/* Button */.z, {
                                variant: "outline",
                                className: "h-8 w-8 p-0",
                                onClick: ()=>table.nextPage(),
                                disabled: !table.getCanNextPage(),
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                        className: "sr-only",
                                        children: "Go to next page"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx(react_icons_cjs_production_min/* ChevronRightIcon */.XCv, {
                                        className: "h-4 w-4"
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(ui_button/* Button */.z, {
                                variant: "outline",
                                className: "hidden h-8 w-8 p-0 lg:flex",
                                onClick: ()=>table.setPageIndex(table.getPageCount() - 1),
                                disabled: !table.getCanNextPage(),
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                        className: "sr-only",
                                        children: "Go to last page"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx(react_icons_cjs_production_min/* DoubleArrowRightIcon */.yr4, {
                                        className: "h-4 w-4"
                                    })
                                ]
                            })
                        ]
                    })
                ]
            })
        ]
    });
}

;// CONCATENATED MODULE: ./components/ui/table.tsx



const Table = /*#__PURE__*/ react_.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ jsx_runtime_.jsx("div", {
        className: "w-full overflow-auto",
        children: /*#__PURE__*/ jsx_runtime_.jsx("table", {
            ref: ref,
            className: (0,utils.cn)("w-full caption-bottom text-sm", className),
            ...props
        })
    }));
Table.displayName = "Table";
const TableHeader = /*#__PURE__*/ react_.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ jsx_runtime_.jsx("thead", {
        ref: ref,
        className: (0,utils.cn)("[&_tr]:border-b", className),
        ...props
    }));
TableHeader.displayName = "TableHeader";
const TableBody = /*#__PURE__*/ react_.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ jsx_runtime_.jsx("tbody", {
        ref: ref,
        className: (0,utils.cn)("[&_tr:last-child]:border-0", className),
        ...props
    }));
TableBody.displayName = "TableBody";
const TableFooter = /*#__PURE__*/ react_.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ jsx_runtime_.jsx("tfoot", {
        ref: ref,
        className: (0,utils.cn)("bg-primary font-medium text-primary-foreground", className),
        ...props
    }));
TableFooter.displayName = "TableFooter";
const TableRow = /*#__PURE__*/ react_.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ jsx_runtime_.jsx("tr", {
        ref: ref,
        className: (0,utils.cn)("border-b transition-colors hover:bg-gray-800/50 data-[state=selected]:bg-gray-900", className),
        ...props
    }));
TableRow.displayName = "TableRow";
const TableHead = /*#__PURE__*/ react_.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ jsx_runtime_.jsx("th", {
        ref: ref,
        className: (0,utils.cn)("h-12 px-4 text-left align-middle font-medium text-green-300 capitalize [&:has([role=checkbox])]:pr-0", className),
        ...props
    }));
TableHead.displayName = "TableHead";
const TableCell = /*#__PURE__*/ react_.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ jsx_runtime_.jsx("td", {
        ref: ref,
        className: (0,utils.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0", className),
        ...props
    }));
TableCell.displayName = "TableCell";
const TableCaption = /*#__PURE__*/ react_.forwardRef(({ className, ...props }, ref)=>/*#__PURE__*/ jsx_runtime_.jsx("caption", {
        ref: ref,
        className: (0,utils.cn)("mt-4 text-sm text-muted-foreground", className),
        ...props
    }));
TableCaption.displayName = "TableCaption";


;// CONCATENATED MODULE: ./app/attestation/[id]/attestion-table/data-table.tsx
/* __next_internal_client_entry_do_not_use__ AttestionDataTable auto */ 









function AttestionDataTable({ columns, data }) {
    const [sorting, setSorting] = (0,react_.useState)([]);
    const [rowSelection, setRowSelection] = (0,react_.useState)({});
    const { address } = (0,dist/* useAccount */.mA)();
    const table = (0,build_lib/* useReactTable */.b7)({
        data,
        columns,
        getCoreRowModel: (0,table_core_build_lib/* getCoreRowModel */.sC)(),
        getPaginationRowModel: (0,table_core_build_lib/* getPaginationRowModel */.G_)(),
        onSortingChange: setSorting,
        getSortedRowModel: (0,table_core_build_lib/* getSortedRowModel */.tj)(),
        onRowSelectionChange: setRowSelection,
        state: {
            sorting,
            rowSelection
        }
    });
    const downloadFiles = async ()=>{
        if (!address) return react_toastify_esm/* toast */.Am.error("Please connect your wallet");
        const { JWT } = await getLighthouseKeys(address);
        if (!JWT) return;
        const config = {
            headers: {
                Authorization: `${JWT}`,
                "Content-Type": "application/json"
            }
        };
        const files = table.getFilteredSelectedRowModel().rows.map((row)=>{
            //@ts-ignore
            return row.original.decodedDataJson.file;
        });
        console.log(files);
        const data = {
            cids: files,
            address: address
        };
        try {
            const url = "https://api.dataponte.com" || 0;
            const response = await axios/* default */.Z.post(`${url}/files/downloadMap`, data, config);
            const blob = new Blob([
                response.data
            ], {
                type: "application/zip"
            });
            const downloadURL = window.URL.createObjectURL(blob);
            const link = document.createElement("a");
            link.href = downloadURL;
            link.download = "files.zip";
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            window.URL.revokeObjectURL(downloadURL);
        } catch (err) {
            react_toastify_esm/* toast */.Am.error("Something went wrong when downloading the files");
            throw err;
        }
    };
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "rounded-md border",
                children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Table, {
                    children: [
                        /*#__PURE__*/ jsx_runtime_.jsx(TableHeader, {
                            children: table.getHeaderGroups().map((headerGroup)=>/*#__PURE__*/ jsx_runtime_.jsx(TableRow, {
                                    children: headerGroup.headers.map((header)=>{
                                        return /*#__PURE__*/ jsx_runtime_.jsx(TableHead, {
                                            children: header.isPlaceholder ? null : (0,build_lib/* flexRender */.ie)(header.column.columnDef.header, header.getContext())
                                        }, header.id);
                                    })
                                }, headerGroup.id))
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx(TableBody, {
                            children: table.getRowModel().rows?.length ? table.getRowModel().rows.map((row)=>/*#__PURE__*/ jsx_runtime_.jsx(TableRow, {
                                    "data-state": row.getIsSelected() && "selected",
                                    children: row.getVisibleCells().map((cell)=>/*#__PURE__*/ jsx_runtime_.jsx(TableCell, {
                                            children: (0,build_lib/* flexRender */.ie)(cell.column.columnDef.cell, cell.getContext())
                                        }, cell.id))
                                }, row.id)) : /*#__PURE__*/ jsx_runtime_.jsx(TableRow, {
                                children: /*#__PURE__*/ jsx_runtime_.jsx(TableCell, {
                                    colSpan: columns.length,
                                    className: "h-24 text-center",
                                    children: "No results."
                                })
                            })
                        })
                    ]
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "flex items-center justify-end space-x-2 py-4",
                children: /*#__PURE__*/ jsx_runtime_.jsx(DataTablePagination, {
                    table: table
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "text-right",
                children: table.getFilteredSelectedRowModel().rows.length > 0 && /*#__PURE__*/ (0,jsx_runtime_.jsxs)(ui_button/* Button */.z, {
                    onClick: downloadFiles,
                    children: [
                        "Download (",
                        table.getFilteredSelectedRowModel().rows.length,
                        ") files"
                    ]
                })
            })
        ]
    });
}

;// CONCATENATED MODULE: ./app/attestation/[id]/attestion-table/attestion-data.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 




function AttestionData({ id, attestations }) {
    const [data, setData] = (0,react_.useState)([]);
    const [loading, setLoading] = (0,react_.useState)(false);
    console.log(attestations);
    return /*#__PURE__*/ jsx_runtime_.jsx("div", {
        className: "container mx-auto py-10",
        children: loading ? /*#__PURE__*/ jsx_runtime_.jsx(loading_loading/* default */.Z, {}) : /*#__PURE__*/ jsx_runtime_.jsx(AttestionDataTable, {
            columns: AttestionColumns,
            data: attestations
        })
    });
}

;// CONCATENATED MODULE: ./app/attestation/[id]/resolve-table/resolve-columns.tsx
/* __next_internal_client_entry_do_not_use__ resolveColumns auto */ 



const resolveColumns = [
    {
        accessorKey: "attester",
        header: "attester",
        cell: ({ row })=>{
            const attester = row.getValue("attester");
            return /*#__PURE__*/ jsx_runtime_.jsx((link_default()), {
                className: "text-right font-medium text-green-300 hover:text-green-500",
                href: `/profile/${attester}`,
                children: "View Attester"
            });
        }
    },
    {
        accessorKey: "decodedDataJson",
        header: "name",
        cell: ({ row })=>{
            const data = row.getValue("decodedDataJson");
            return /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "text-right font-medium",
                children: data.name
            });
        }
    },
    {
        accessorKey: "decodedDataJson",
        header: "file",
        cell: ({ row })=>{
            const data = row.getValue("decodedDataJson");
            return /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "text-right font-medium",
                children: data.file
            });
        }
    },
    {
        accessorKey: "decodedDataJson",
        header: "description",
        cell: ({ row })=>{
            const data = row.getValue("decodedDataJson");
            return /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "text-right font-medium",
                children: data.description
            });
        }
    },
    {
        accessorKey: "timeCreated",
        header: "timeCreated",
        cell: ({ row })=>/*#__PURE__*/ jsx_runtime_.jsx(CountdownCell, {
                futureTimestamp: parseFloat(row.getValue("timeCreated"))
            })
    },
    {
        id: "select",
        header: ({ table })=>/*#__PURE__*/ jsx_runtime_.jsx(Checkbox, {
                checked: table.getIsAllPageRowsSelected(),
                onCheckedChange: (value)=>table.toggleAllPageRowsSelected(!!value),
                "aria-label": "Select all"
            }),
        cell: ({ row })=>/*#__PURE__*/ jsx_runtime_.jsx(Checkbox, {
                checked: row.getIsSelected(),
                onCheckedChange: (value)=>row.toggleSelected(!!value),
                "aria-label": "Select row"
            }),
        enableSorting: false,
        enableHiding: false
    }
];
const CountdownCell = ({ futureTimestamp })=>{
    const [secondsLeft, setSecondsLeft] = (0,react_.useState)(futureTimestamp - Math.floor(Date.now() / 1000));
    (0,react_.useEffect)(()=>{
        const interval = setInterval(()=>{
            let currentTimestamp = Math.floor(Date.now() / 1000);
            setSecondsLeft(futureTimestamp + 3600 - currentTimestamp);
        }, 1000);
        return ()=>clearInterval(interval); // Clean up on component unmount
    }, [
        futureTimestamp
    ]);
    return /*#__PURE__*/ jsx_runtime_.jsx("div", {
        className: "text-right font-medium",
        children: secondsLeft
    });
};

;// CONCATENATED MODULE: ./app/attestation/[id]/resolve-table/resolve-table.tsx
/* __next_internal_client_entry_do_not_use__ ResolveTable auto */ 








function ResolveTable({ columns, data }) {
    const [sorting, setSorting] = (0,react_.useState)([]);
    const [rowSelection, setRowSelection] = (0,react_.useState)({});
    const signer = useEthersSigner();
    const table = (0,build_lib/* useReactTable */.b7)({
        data,
        columns,
        getCoreRowModel: (0,table_core_build_lib/* getCoreRowModel */.sC)(),
        getPaginationRowModel: (0,table_core_build_lib/* getPaginationRowModel */.G_)(),
        onSortingChange: setSorting,
        getSortedRowModel: (0,table_core_build_lib/* getSortedRowModel */.tj)(),
        onRowSelectionChange: setRowSelection,
        state: {
            sorting,
            rowSelection
        }
    });
    const revokeCid = async ()=>{
        console.log("testing if this display anything");
        console.log(table);
        const resolveId = table.getFilteredSelectedRowModel().rows.map((row)=>{
            //@ts-ignore
            return row.original.id;
        });
        const schema = table.getFilteredSelectedRowModel().rows.map((row)=>{
            //@ts-ignore
            return row.original.schemaId;
        });
        const EASoGoerli = "0x4200000000000000000000000000000000000021";
        const eas = new eas_sdk_dist.EAS(EASoGoerli);
        //const signer = walletClientToSigner(walletCline);
        //@ts-ignore
        eas.connect(signer);
        react_toastify_esm/* toast */.Am.promise(eas.revoke({
            schema: schema[0],
            data: {
                uid: resolveId[0]
            }
        }), {
            pending: "Revoking CID",
            success: "You succesfully revoked the attstation.",
            error: "Error while revoking attestation."
        });
    ///now we integrate eas. 
    };
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "rounded-md border",
                children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Table, {
                    children: [
                        /*#__PURE__*/ jsx_runtime_.jsx(TableHeader, {
                            children: table.getHeaderGroups().map((headerGroup)=>/*#__PURE__*/ jsx_runtime_.jsx(TableRow, {
                                    children: headerGroup.headers.map((header)=>{
                                        return /*#__PURE__*/ jsx_runtime_.jsx(TableHead, {
                                            children: header.isPlaceholder ? null : (0,build_lib/* flexRender */.ie)(header.column.columnDef.header, header.getContext())
                                        }, header.id);
                                    })
                                }, headerGroup.id))
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx(TableBody, {
                            children: table.getRowModel().rows?.length ? table.getRowModel().rows.map((row)=>/*#__PURE__*/ jsx_runtime_.jsx(TableRow, {
                                    "data-state": row.getIsSelected() && "selected",
                                    children: row.getVisibleCells().map((cell)=>/*#__PURE__*/ jsx_runtime_.jsx(TableCell, {
                                            children: (0,build_lib/* flexRender */.ie)(cell.column.columnDef.cell, cell.getContext())
                                        }, cell.id))
                                }, row.id)) : /*#__PURE__*/ jsx_runtime_.jsx(TableRow, {
                                children: /*#__PURE__*/ jsx_runtime_.jsx(TableCell, {
                                    colSpan: columns.length,
                                    className: "h-24 text-center",
                                    children: "No results."
                                })
                            })
                        })
                    ]
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "flex items-center justify-end space-x-2 py-4",
                children: /*#__PURE__*/ jsx_runtime_.jsx(DataTablePagination, {
                    table: table
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "text-right",
                children: table.getFilteredSelectedRowModel().rows.length > 0 && /*#__PURE__*/ (0,jsx_runtime_.jsxs)(ui_button/* Button */.z, {
                    onClick: revokeCid,
                    children: [
                        "Revoke (",
                        table.getFilteredSelectedRowModel().rows.length,
                        ") issues"
                    ]
                })
            })
        ]
    });
}

;// CONCATENATED MODULE: ./app/attestation/[id]/resolve-table/resolve-data.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 




function ResolveData({ id, attestations }) {
    const [data, setData] = (0,react_.useState)([]);
    const [loading, setLoading] = (0,react_.useState)(false);
    return /*#__PURE__*/ jsx_runtime_.jsx("div", {
        className: "container mx-auto py-10",
        children: loading ? /*#__PURE__*/ jsx_runtime_.jsx(loading_loading/* default */.Z, {}) : /*#__PURE__*/ jsx_runtime_.jsx(ResolveTable, {
            columns: resolveColumns,
            data: attestations
        })
    });
}

;// CONCATENATED MODULE: ./app/attestation/[id]/attestion-details.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 









function AttestionDetails({ attestations, id, schema, hasAccess, resolutionDays, details }) {
    const [data, setData] = (0,react_.useState)([]);
    const [listAttest, setListAttest] = (0,react_.useState)([]);
    const [listResolve, setListResolve] = (0,react_.useState)([]);
    const [listRevoke, setListRevoke] = (0,react_.useState)([]);
    const [loading, setLoading] = (0,react_.useState)(true);
    const [resolver, setResolver] = (0,react_.useState)("");
    (0,react_.useEffect)(()=>{
        const getData = async (schemaUID, clientId = 420)=>{
            const api = "https://api.dataponte.com" || 0;
            const response = await fetch(`${api}/library/attestation/${schemaUID}?clientId=${clientId}`);
            const result = await response.json();
            console.log(result);
            //filter attestions based on status and set to state
            const resolve = result.filter((item)=>item.status == "Active");
            const revoke = result.filter((item)=>item.status == "Revoke");
            const attest = result.filter((item)=>item.status == "Expired");
            setData(result);
            setListResolve(resolve);
            setListRevoke(revoke);
            setListAttest(attest);
            setResolver(result?.resolver);
            setLoading(false);
            return result;
        };
        if (id) {
            getData(id);
        }
    }, [
        attestations,
        id,
        resolutionDays
    ]);
    // TODOOOO @tse-lao display those tokenGated rules on the Library page
    // Returrns  [ enum type ,  tokenGatedAddress, tokenID]
    const { data: attestersGatingToken, isLoading } = (0,dist/* useContractRead */["do"])({
        // @ts-ignore
        address: resolver,
        abi: contracts/* CONTRACTS */.q.attestation[420].abi,
        functionName: "attestersGatingToken",
        args: []
    });
    // Returrns  [ enum type ,  tokenGatedAddress, tokenID]
    const { data: revokersGatingToken, isLoading: isLOading } = (0,dist/* useContractRead */["do"])({
        // @ts-ignore
        address: resolver,
        abi: contracts/* CONTRACTS */.q.attestation[420].abi,
        functionName: "revokersGatingToken",
        args: []
    });
    if (loading) return /*#__PURE__*/ jsx_runtime_.jsx(loading_loading/* default */.Z, {});
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Tabs, {
        defaultValue: "attest",
        className: "w-full flex flex-col items-center",
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)(TabsList, {
                className: "grid max-w-2xl grid-cols-3 mb-4",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx(TabsTrigger, {
                        value: "attest",
                        disabled: !hasAccess.attest,
                        children: "Attest"
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx(TabsTrigger, {
                        value: "view",
                        disabled: !hasAccess.fileAccess,
                        children: "View Attestations"
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx(TabsTrigger, {
                        value: "revoke",
                        disabled: !hasAccess.revoke,
                        children: "Revoke"
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(TabsContent, {
                value: "attest",
                className: "min-w-[300px]",
                children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)(card/* Card */.Zb, {
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)(card/* CardHeader */.Ol, {
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx(card/* CardTitle */.ll, {
                                    className: "text-gray-300 tracking-wider font-light",
                                    children: "Create Attestation"
                                }),
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)(card/* CardDescription */.SZ, {
                                    className: "text-green-300",
                                    children: [
                                        "Reward ",
                                        details.attestReward,
                                        " ETH"
                                    ]
                                })
                            ]
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx(card/* CardContent */.aY, {
                            className: "space-y-2",
                            children: /*#__PURE__*/ jsx_runtime_.jsx(SchemaForm, {
                                schema: schema,
                                schemaUID: id
                            })
                        })
                    ]
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(TabsContent, {
                value: "view",
                className: "w-full",
                children: hasAccess.fileAccess ? /*#__PURE__*/ jsx_runtime_.jsx(AttestionData, {
                    id: id,
                    attestations: listAttest
                }) : /*#__PURE__*/ jsx_runtime_.jsx("div", {
                    children: " No access "
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(TabsContent, {
                value: "revoke",
                className: "w-full",
                children: hasAccess.revoke ? /*#__PURE__*/ jsx_runtime_.jsx("div", {
                    children: /*#__PURE__*/ jsx_runtime_.jsx(ResolveData, {
                        id: id,
                        attestations: listResolve
                    })
                }) : /*#__PURE__*/ jsx_runtime_.jsx("span", {
                    children: "No access "
                })
            })
        ]
    });
}

;// CONCATENATED MODULE: ./app/attestation/[id]/page.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 












function AttestationPage({ params }) {
    const [data, setData] = (0,react_.useState)({});
    const [details, setDetails] = (0,react_.useState)({
        mintPrice: "0"
    });
    const [loading, setLoading] = (0,react_.useState)(false);
    const [hasAccess, setHasAccess] = (0,react_.useState)({
        revoke: false,
        attest: false,
        fileAccess: false
    });
    const { address } = (0,dist/* useAccount */.mA)();
    const { isLoading: minting, write: mint } = (0,dist/* useContractWrite */.GG)({
        address: contracts/* CONTRACTS */.q.attestionFactory[420].contract,
        abi: contracts/* CONTRACTS */.q.attestionFactory[420].abi,
        functionName: "mint",
        args: [
            params.id,
            1
        ],
        value: data?.mintPrice
    });
    const { isLoading: resolveLoading, write: resolve } = (0,dist/* useContractWrite */.GG)({
        address: data?.resolver,
        abi: contracts/* CONTRACTS */.q.attestation[420].abi,
        functionName: "resolveAttestations"
    });
    const { isLoading: splitLoading, write: splitFunds } = (0,dist/* useContractWrite */.GG)({
        address: data?.resolver,
        abi: contracts/* CONTRACTS */.q.attestation[420].abi,
        functionName: "splitMintingFunds"
    });
    (0,react_.useEffect)(()=>{
        //get by chain.id 
        async function getSchemaById(schemaUID, clientId = 420) {
            const api = "https://api.dataponte.com" || 0;
            const response = await fetch(`${api}/library/schema/${schemaUID}?clientId=${clientId}`);
            const result = await response.json();
            console.log(result);
            setData(result);
            setLoading(false);
        }
        //get data from own GRAPH.
        const getAccess = async (schemaUID)=>{
            const fileAccess = await (0,chunk_LAFZBYO7/* readContract */.a4)({
                address: contracts/* CONTRACTS */.q.attestionFactory[420].contract,
                abi: contracts/* CONTRACTS */.q.attestionFactory[420].abi,
                functionName: "hasAccess",
                args: [
                    schemaUID,
                    address
                ]
            });
            const revokeAccess = await (0,chunk_LAFZBYO7/* readContract */.a4)({
                address: contracts/* CONTRACTS */.q.attestionFactory[420].contract,
                abi: contracts/* CONTRACTS */.q.attestionFactory[420].abi,
                functionName: "hasRevokeAccess",
                args: [
                    schemaUID,
                    address
                ]
            });
            const attestAccess = await (0,chunk_LAFZBYO7/* readContract */.a4)({
                address: contracts/* CONTRACTS */.q.attestionFactory[420].contract,
                abi: contracts/* CONTRACTS */.q.attestionFactory[420].abi,
                functionName: "hasAttestAccess",
                args: [
                    schemaUID,
                    address
                ]
            });
            setHasAccess({
                revoke: revokeAccess,
                attest: attestAccess,
                fileAccess: fileAccess
            });
            console.log(revokeAccess, attestAccess, fileAccess);
        };
        if (params.id, address) {
            setLoading(true);
            getSchemaById(params.id);
            getAccess(params.id);
        }
    }, [
        params,
        address
    ]);
    if (loading) return /*#__PURE__*/ jsx_runtime_.jsx(loading_loading/* default */.Z, {});
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("main", {
        className: "flex flex-col items-center text-left gap-8 m-12",
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "max-w-4xl flex flex-col gap-4 items-center text-gray-300",
                children: [
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                        className: "flex md:flex-row flex-col justify-between w-full gap-8",
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                className: "flex flex-col gap-4",
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("h1", {
                                        className: "text-left text-2xl tracking-wider font-light text-green-300",
                                        children: data.name
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                        className: "text-sm text-left",
                                        children: data.description
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                        className: "flex gap-2",
                                        children: data.tags?.map((tag, index)=>/*#__PURE__*/ jsx_runtime_.jsx(badge/* Badge */.C, {
                                                color: "var(--color-green-300)",
                                                children: tag
                                            }, index))
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("span", {
                                        className: "text-gray-400 m-4",
                                        children: [
                                            "Revocation period: ",
                                            (0,utils/* secondsToDaysAndHours */.s)(data.attestResolutionDays)
                                        ]
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("h3", {
                                        className: "font-medium tracking-wider text-green-300",
                                        children: "Schema Attributes"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx(schema_list/* default */.Z, {
                                        list: data.schema
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                className: "flex flex-col gap-4",
                                children: [
                                    hasAccess.fileAccess ? !data.isMintable ? /*#__PURE__*/ jsx_runtime_.jsx(ui_button/* Button */.z, {
                                        onClick: ()=>{
                                            resolve();
                                        },
                                        disabled: resolveLoading,
                                        children: resolveLoading ? /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx(react_icons_cjs_production_min/* ReloadIcon */.BGW, {
                                                    className: "mr-2 h-4 w-4 animate-spin"
                                                }),
                                                " ",
                                                "Resolving..."
                                            ]
                                        }) : "Resolve Attestations"
                                    }) : /*#__PURE__*/ jsx_runtime_.jsx(ui_button/* Button */.z, {
                                        onClick: ()=>{
                                            splitFunds();
                                        },
                                        disabled: splitLoading,
                                        children: splitLoading ? /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx(react_icons_cjs_production_min/* ReloadIcon */.BGW, {
                                                    className: "mr-2 h-4 w-4 animate-spin"
                                                }),
                                                " ",
                                                "Splitting..."
                                            ]
                                        }) : "Splitting Funds"
                                    }) : data.isMintable ? /*#__PURE__*/ (0,jsx_runtime_.jsxs)(ui_button/* Button */.z, {
                                        onClick: ()=>mint(),
                                        disabled: minting,
                                        children: [
                                            minting ? /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
                                                children: [
                                                    /*#__PURE__*/ jsx_runtime_.jsx(react_icons_cjs_production_min/* ReloadIcon */.BGW, {}),
                                                    " Minting.."
                                                ]
                                            }) : "Subscribe to get access ",
                                            "price : ",
                                            data.mintPrice / 1000000000000 / 1000000,
                                            " ETH"
                                        ]
                                    }) : /*#__PURE__*/ jsx_runtime_.jsx(ui_button/* Button */.z, {
                                        disabled: true,
                                        children: "Private DataPool"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx(AccessType, {
                                        type: "Revoke",
                                        access: hasAccess.revoke
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx(AccessType, {
                                        type: "Attest",
                                        access: hasAccess.attest
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx(AccessType, {
                                        type: "View",
                                        access: hasAccess.fileAccess
                                    })
                                ]
                            })
                        ]
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: "flex flex-col gap-4 w-full text-left mt-4"
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(AttestionDetails, {
                attestations: data._count?.attestations,
                id: data.id,
                resolutionDays: data.attestResolutionDays,
                schema: data.schema,
                hasAccess: hasAccess,
                details: data
            })
        ]
    });
}


/***/ }),

/***/ 16782:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $$typeof: () => (/* binding */ $$typeof),
/* harmony export */   __esModule: () => (/* binding */ __esModule),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(61363);

const proxy = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/Users/koenschuite/github/super-attestations/client/app/attestation/[id]/page.tsx`)

// Accessing the __esModule property and exporting $$typeof are required here.
// The __esModule getter forces the proxy target to create the default export
// and the $$typeof value is for rendering logic to determine if the module
// is a client boundary.
const { __esModule, $$typeof } = proxy;
const __default__ = proxy.default;


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__default__);

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [697,311,854,589,638,335,18,463,737,448,979], () => (__webpack_exec__(16894)));
module.exports = __webpack_exports__;

})();