(function($n,wt){typeof exports=="object"&&typeof module<"u"?wt(exports):typeof define=="function"&&define.amd?define(["exports"],wt):($n=typeof globalThis<"u"?globalThis:$n||self,wt($n["@walletconnect/universal-provider"]={}))})(this,function($n){"use strict";var wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Mn(n){var e=n.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var o=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:function(){return n[s]}})}),t}var Qt={exports:{}},ui=typeof Reflect=="object"?Reflect:null,ef=ui&&typeof ui.apply=="function"?ui.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)},As;ui&&typeof ui.ownKeys=="function"?As=ui.ownKeys:Object.getOwnPropertySymbols?As=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:As=function(e){return Object.getOwnPropertyNames(e)};function mg(n){console&&console.warn&&console.warn(n)}var tf=Number.isNaN||function(e){return e!==e};function st(){st.init.call(this)}Qt.exports=st,Qt.exports.once=xg,st.EventEmitter=st,st.prototype._events=void 0,st.prototype._eventsCount=0,st.prototype._maxListeners=void 0;var rf=10;function Ps(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(st,"defaultMaxListeners",{enumerable:!0,get:function(){return rf},set:function(n){if(typeof n!="number"||n<0||tf(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");rf=n}}),st.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},st.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||tf(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function nf(n){return n._maxListeners===void 0?st.defaultMaxListeners:n._maxListeners}st.prototype.getMaxListeners=function(){return nf(this)},st.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var o=e==="error",c=this._events;if(c!==void 0)o=o&&c.error===void 0;else if(!o)return!1;if(o){var f;if(t.length>0&&(f=t[0]),f instanceof Error)throw f;var l=new Error("Unhandled error."+(f?" ("+f.message+")":""));throw l.context=f,l}var _=c[e];if(_===void 0)return!1;if(typeof _=="function")ef(_,this,t);else for(var p=_.length,E=uf(_,p),s=0;s<p;++s)ef(E[s],this,t);return!0};function sf(n,e,t,s){var o,c,f;if(Ps(t),c=n._events,c===void 0?(c=n._events=Object.create(null),n._eventsCount=0):(c.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),c=n._events),f=c[e]),f===void 0)f=c[e]=t,++n._eventsCount;else if(typeof f=="function"?f=c[e]=s?[t,f]:[f,t]:s?f.unshift(t):f.push(t),o=nf(n),o>0&&f.length>o&&!f.warned){f.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=n,l.type=e,l.count=f.length,mg(l)}return n}st.prototype.addListener=function(e,t){return sf(this,e,t,!1)},st.prototype.on=st.prototype.addListener,st.prototype.prependListener=function(e,t){return sf(this,e,t,!0)};function Eg(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function of(n,e,t){var s={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},o=Eg.bind(s);return o.listener=t,s.wrapFn=o,o}st.prototype.once=function(e,t){return Ps(t),this.on(e,of(this,e,t)),this},st.prototype.prependOnceListener=function(e,t){return Ps(t),this.prependListener(e,of(this,e,t)),this},st.prototype.removeListener=function(e,t){var s,o,c,f,l;if(Ps(t),o=this._events,o===void 0)return this;if(s=o[e],s===void 0)return this;if(s===t||s.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,s.listener||t));else if(typeof s!="function"){for(c=-1,f=s.length-1;f>=0;f--)if(s[f]===t||s[f].listener===t){l=s[f].listener,c=f;break}if(c<0)return this;c===0?s.shift():Sg(s,c),s.length===1&&(o[e]=s[0]),o.removeListener!==void 0&&this.emit("removeListener",e,l||t)}return this},st.prototype.off=st.prototype.removeListener,st.prototype.removeAllListeners=function(e){var t,s,o;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var c=Object.keys(s),f;for(o=0;o<c.length;++o)f=c[o],f!=="removeListener"&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=s[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function af(n,e,t){var s=n._events;if(s===void 0)return[];var o=s[e];return o===void 0?[]:typeof o=="function"?t?[o.listener||o]:[o]:t?Dg(o):uf(o,o.length)}st.prototype.listeners=function(e){return af(this,e,!0)},st.prototype.rawListeners=function(e){return af(this,e,!1)},st.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):cf.call(n,e)},st.prototype.listenerCount=cf;function cf(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}st.prototype.eventNames=function(){return this._eventsCount>0?As(this._events):[]};function uf(n,e){for(var t=new Array(e),s=0;s<e;++s)t[s]=n[s];return t}function Sg(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function Dg(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function xg(n,e){return new Promise(function(t,s){function o(f){n.removeListener(e,c),s(f)}function c(){typeof n.removeListener=="function"&&n.removeListener("error",o),t([].slice.call(arguments))}ff(n,e,c,{once:!0}),e!=="error"&&Og(n,o,{once:!0})})}function Og(n,e,t){typeof n.on=="function"&&ff(n,"error",e,t)}function ff(n,e,t,s){if(typeof n.on=="function")s.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function o(c){s.once&&n.removeEventListener(e,o),t(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var Ts={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var ca=function(n,e){return ca=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},ca(n,e)};function Ig(n,e){ca(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ua=function(){return ua=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},ua.apply(this,arguments)};function Ag(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function Pg(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var l=n.length-1;l>=0;l--)(f=n[l])&&(c=(o<3?f(c):o>3?f(e,t,c):f(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function Tg(n,e){return function(t,s){e(t,s,n)}}function Cg(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Rg(n,e,t,s){function o(c){return c instanceof t?c:new t(function(f){f(c)})}return new(t||(t=Promise))(function(c,f){function l(E){try{p(s.next(E))}catch(T){f(T)}}function _(E){try{p(s.throw(E))}catch(T){f(T)}}function p(E){E.done?c(E.value):o(E.value).then(l,_)}p((s=s.apply(n,e||[])).next())})}function Ng(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,f;return f={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function l(p){return function(E){return _([p,E])}}function _(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(E){p=[6,E],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Lg(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function Fg(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function fa(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hf(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],f;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(l){f={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(f)throw f.error}}return c}function Ug(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(hf(arguments[e]));return n}function $g(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],f=0,l=c.length;f<l;f++,o++)s[o]=c[f];return s}function Bi(n){return this instanceof Bi?(this.v=n,this):new Bi(n)}function Mg(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(D){s[D]&&(o[D]=function(C){return new Promise(function(R,q){c.push([D,C,R,q])>1||l(D,C)})})}function l(D,C){try{_(s[D](C))}catch(R){T(c[0][3],R)}}function _(D){D.value instanceof Bi?Promise.resolve(D.value.v).then(p,E):T(c[0][2],D)}function p(D){l("next",D)}function E(D){l("throw",D)}function T(D,C){D(C),c.shift(),c.length&&l(c[0][0],c[0][1])}}function Bg(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(f){return(t=!t)?{value:Bi(n[o](f)),done:o==="return"}:c?c(f):f}:c}}function Hg(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof fa=="function"?fa(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(f){return new Promise(function(l,_){f=n[c](f),o(l,_,f.done,f.value)})}}function o(c,f,l,_){Promise.resolve(_).then(function(p){c({value:p,done:l})},f)}}function jg(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function qg(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function zg(n){return n&&n.__esModule?n:{default:n}}function Kg(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function Gg(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var Wg=Object.freeze({__proto__:null,__extends:Ig,get __assign(){return ua},__rest:Ag,__decorate:Pg,__param:Tg,__metadata:Cg,__awaiter:Rg,__generator:Ng,__createBinding:Lg,__exportStar:Fg,__values:fa,__read:hf,__spread:Ug,__spreadArrays:$g,__await:Bi,__asyncGenerator:Mg,__asyncDelegator:Bg,__asyncValues:Hg,__makeTemplateObject:jg,__importStar:qg,__importDefault:zg,__classPrivateFieldGet:Kg,__classPrivateFieldSet:Gg}),lf=Mn(Wg),Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});function Vg(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}Hi.safeJsonParse=Vg;function Yg(n){return typeof n=="string"?n:JSON.stringify(n,(e,t)=>typeof t>"u"?null:t)}Hi.safeJsonStringify=Yg;var ji={exports:{}},df;function kg(){return df||(df=1,function(){let n;function e(){}n=e,n.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},n.prototype.setItem=function(t,s){this[t]=String(s)},n.prototype.removeItem=function(t){delete this[t]},n.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(s){t[s]=void 0,delete t[s]})},n.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof wt<"u"&&wt.localStorage?ji.exports=wt.localStorage:typeof window<"u"&&window.localStorage?ji.exports=window.localStorage:ji.exports=new e}()),ji.exports}var ha={},qi={},pf;function Jg(){if(pf)return qi;pf=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.IKeyValueStorage=void 0;class n{}return qi.IKeyValueStorage=n,qi}var zi={},gf;function Xg(){if(gf)return zi;gf=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.parseEntry=void 0;const n=Hi;function e(t){var s;return[t[0],n.safeJsonParse((s=t[1])!==null&&s!==void 0?s:"")]}return zi.parseEntry=e,zi}var _f;function Zg(){return _f||(_f=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=lf;e.__exportStar(Jg(),n),e.__exportStar(Xg(),n)}(ha)),ha}Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.KeyValueStorage=void 0;const fi=lf,yf=Hi,Qg=fi.__importDefault(kg()),e0=Zg();class vf{constructor(){this.localStorage=Qg.default}getKeys(){return fi.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return fi.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(e0.parseEntry)})}getItem(e){return fi.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(e);if(t!==null)return yf.safeJsonParse(t)})}setItem(e,t){return fi.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,yf.safeJsonStringify(t))})}removeItem(e){return fi.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}Ts.KeyValueStorage=vf;var t0=Ts.default=vf,hi={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var la=function(n,e){return la=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},la(n,e)};function r0(n,e){la(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var da=function(){return da=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},da.apply(this,arguments)};function n0(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function i0(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var l=n.length-1;l>=0;l--)(f=n[l])&&(c=(o<3?f(c):o>3?f(e,t,c):f(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function s0(n,e){return function(t,s){e(t,s,n)}}function o0(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function a0(n,e,t,s){function o(c){return c instanceof t?c:new t(function(f){f(c)})}return new(t||(t=Promise))(function(c,f){function l(E){try{p(s.next(E))}catch(T){f(T)}}function _(E){try{p(s.throw(E))}catch(T){f(T)}}function p(E){E.done?c(E.value):o(E.value).then(l,_)}p((s=s.apply(n,e||[])).next())})}function c0(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,f;return f={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function l(p){return function(E){return _([p,E])}}function _(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(E){p=[6,E],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function u0(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function f0(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function pa(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bf(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],f;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(l){f={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(f)throw f.error}}return c}function h0(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(bf(arguments[e]));return n}function l0(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],f=0,l=c.length;f<l;f++,o++)s[o]=c[f];return s}function Ki(n){return this instanceof Ki?(this.v=n,this):new Ki(n)}function d0(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(D){s[D]&&(o[D]=function(C){return new Promise(function(R,q){c.push([D,C,R,q])>1||l(D,C)})})}function l(D,C){try{_(s[D](C))}catch(R){T(c[0][3],R)}}function _(D){D.value instanceof Ki?Promise.resolve(D.value.v).then(p,E):T(c[0][2],D)}function p(D){l("next",D)}function E(D){l("throw",D)}function T(D,C){D(C),c.shift(),c.length&&l(c[0][0],c[0][1])}}function p0(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(f){return(t=!t)?{value:Ki(n[o](f)),done:o==="return"}:c?c(f):f}:c}}function g0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof pa=="function"?pa(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(f){return new Promise(function(l,_){f=n[c](f),o(l,_,f.done,f.value)})}}function o(c,f,l,_){Promise.resolve(_).then(function(p){c({value:p,done:l})},f)}}function _0(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function y0(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function v0(n){return n&&n.__esModule?n:{default:n}}function b0(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function w0(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var m0=Object.freeze({__proto__:null,__extends:r0,get __assign(){return da},__rest:n0,__decorate:i0,__param:s0,__metadata:o0,__awaiter:a0,__generator:c0,__createBinding:u0,__exportStar:f0,__values:pa,__read:bf,__spread:h0,__spreadArrays:l0,__await:Ki,__asyncGenerator:d0,__asyncDelegator:p0,__asyncValues:g0,__makeTemplateObject:_0,__importStar:y0,__importDefault:v0,__classPrivateFieldGet:b0,__classPrivateFieldSet:w0}),Cs=Mn(m0),Gi={},ye={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var ga=function(n,e){return ga=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},ga(n,e)};function E0(n,e){ga(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var _a=function(){return _a=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},_a.apply(this,arguments)};function S0(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function D0(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var l=n.length-1;l>=0;l--)(f=n[l])&&(c=(o<3?f(c):o>3?f(e,t,c):f(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function x0(n,e){return function(t,s){e(t,s,n)}}function O0(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function I0(n,e,t,s){function o(c){return c instanceof t?c:new t(function(f){f(c)})}return new(t||(t=Promise))(function(c,f){function l(E){try{p(s.next(E))}catch(T){f(T)}}function _(E){try{p(s.throw(E))}catch(T){f(T)}}function p(E){E.done?c(E.value):o(E.value).then(l,_)}p((s=s.apply(n,e||[])).next())})}function A0(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,f;return f={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function l(p){return function(E){return _([p,E])}}function _(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(E){p=[6,E],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function P0(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function T0(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function ya(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wf(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],f;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(l){f={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(f)throw f.error}}return c}function C0(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(wf(arguments[e]));return n}function R0(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],f=0,l=c.length;f<l;f++,o++)s[o]=c[f];return s}function Wi(n){return this instanceof Wi?(this.v=n,this):new Wi(n)}function N0(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(D){s[D]&&(o[D]=function(C){return new Promise(function(R,q){c.push([D,C,R,q])>1||l(D,C)})})}function l(D,C){try{_(s[D](C))}catch(R){T(c[0][3],R)}}function _(D){D.value instanceof Wi?Promise.resolve(D.value.v).then(p,E):T(c[0][2],D)}function p(D){l("next",D)}function E(D){l("throw",D)}function T(D,C){D(C),c.shift(),c.length&&l(c[0][0],c[0][1])}}function L0(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(f){return(t=!t)?{value:Wi(n[o](f)),done:o==="return"}:c?c(f):f}:c}}function F0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ya=="function"?ya(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(f){return new Promise(function(l,_){f=n[c](f),o(l,_,f.done,f.value)})}}function o(c,f,l,_){Promise.resolve(_).then(function(p){c({value:p,done:l})},f)}}function U0(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function $0(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function M0(n){return n&&n.__esModule?n:{default:n}}function B0(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function H0(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var j0=Object.freeze({__proto__:null,__extends:E0,get __assign(){return _a},__rest:S0,__decorate:D0,__param:x0,__metadata:O0,__awaiter:I0,__generator:A0,__createBinding:P0,__exportStar:T0,__values:ya,__read:wf,__spread:C0,__spreadArrays:R0,__await:Wi,__asyncGenerator:N0,__asyncDelegator:L0,__asyncValues:F0,__makeTemplateObject:U0,__importStar:$0,__importDefault:M0,__classPrivateFieldGet:B0,__classPrivateFieldSet:H0}),Rs=Mn(j0),va={},Vi={},mf;function q0(){if(mf)return Vi;mf=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.delay=void 0;function n(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return Vi.delay=n,Vi}var Bn={},ba={},Hn={},Ef;function z0(){return Ef||(Ef=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.ONE_THOUSAND=Hn.ONE_HUNDRED=void 0,Hn.ONE_HUNDRED=100,Hn.ONE_THOUSAND=1e3),Hn}var wa={},Sf;function K0(){return Sf||(Sf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(wa)),wa}var Df;function xf(){return Df||(Df=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Rs;e.__exportStar(z0(),n),e.__exportStar(K0(),n)}(ba)),ba}var Of;function G0(){if(Of)return Bn;Of=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.fromMiliseconds=Bn.toMiliseconds=void 0;const n=xf();function e(s){return s*n.ONE_THOUSAND}Bn.toMiliseconds=e;function t(s){return Math.floor(s/n.ONE_THOUSAND)}return Bn.fromMiliseconds=t,Bn}var If;function W0(){return If||(If=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Rs;e.__exportStar(q0(),n),e.__exportStar(G0(),n)}(va)),va}var li={},Af;function V0(){if(Af)return li;Af=1,Object.defineProperty(li,"__esModule",{value:!0}),li.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const s=this.get(t);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-s.started;this.timestamps.set(t,{started:s.started,elapsed:o})}get(t){const s=this.timestamps.get(t);if(typeof s>"u")throw new Error(`No timestamp found for label: ${t}`);return s}elapsed(t){const s=this.get(t);return s.elapsed||Date.now()-s.started}}return li.Watch=n,li.default=n,li}var ma={},Yi={},Pf;function Y0(){if(Pf)return Yi;Pf=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.IWatch=void 0;class n{}return Yi.IWatch=n,Yi}var Tf;function k0(){return Tf||(Tf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Rs.__exportStar(Y0(),n)}(ma)),ma}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Rs;e.__exportStar(W0(),n),e.__exportStar(V0(),n),e.__exportStar(k0(),n),e.__exportStar(xf(),n)})(ye);var Ea={},ki={};class jn{}var J0=Object.freeze({__proto__:null,IEvents:jn}),X0=Mn(J0),Cf;function Z0(){if(Cf)return ki;Cf=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.IHeartBeat=void 0;const n=X0;class e extends n.IEvents{constructor(s){super()}}return ki.IHeartBeat=e,ki}var Rf;function Nf(){return Rf||(Rf=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Cs.__exportStar(Z0(),n)}(Ea)),Ea}var Sa={},qn={},Lf;function Q0(){if(Lf)return qn;Lf=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.HEARTBEAT_EVENTS=qn.HEARTBEAT_INTERVAL=void 0;const n=ye;return qn.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,qn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},qn}var Ff;function Uf(){return Ff||(Ff=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Cs.__exportStar(Q0(),n)}(Sa)),Sa}var $f;function e_(){if($f)return Gi;$f=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.HeartBeat=void 0;const n=Cs,e=Qt.exports,t=ye,s=Nf(),o=Uf();class c extends s.IHeartBeat{constructor(l){super(l),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=l?.interval||o.HEARTBEAT_INTERVAL}static init(l){return n.__awaiter(this,void 0,void 0,function*(){const _=new c(l);return yield _.init(),_})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(l,_){this.events.on(l,_)}once(l,_){this.events.once(l,_)}off(l,_){this.events.off(l,_)}removeListener(l,_){this.events.removeListener(l,_)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return Gi.HeartBeat=c,Gi}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Cs;e.__exportStar(e_(),n),e.__exportStar(Nf(),n),e.__exportStar(Uf(),n)})(hi);var Je={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Da=function(n,e){return Da=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},Da(n,e)};function t_(n,e){Da(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var xa=function(){return xa=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},xa.apply(this,arguments)};function r_(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function n_(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var l=n.length-1;l>=0;l--)(f=n[l])&&(c=(o<3?f(c):o>3?f(e,t,c):f(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function i_(n,e){return function(t,s){e(t,s,n)}}function s_(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function o_(n,e,t,s){function o(c){return c instanceof t?c:new t(function(f){f(c)})}return new(t||(t=Promise))(function(c,f){function l(E){try{p(s.next(E))}catch(T){f(T)}}function _(E){try{p(s.throw(E))}catch(T){f(T)}}function p(E){E.done?c(E.value):o(E.value).then(l,_)}p((s=s.apply(n,e||[])).next())})}function a_(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,f;return f={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function l(p){return function(E){return _([p,E])}}function _(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(E){p=[6,E],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function c_(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function u_(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Oa(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mf(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],f;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(l){f={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(f)throw f.error}}return c}function f_(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Mf(arguments[e]));return n}function h_(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],f=0,l=c.length;f<l;f++,o++)s[o]=c[f];return s}function Ji(n){return this instanceof Ji?(this.v=n,this):new Ji(n)}function l_(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(D){s[D]&&(o[D]=function(C){return new Promise(function(R,q){c.push([D,C,R,q])>1||l(D,C)})})}function l(D,C){try{_(s[D](C))}catch(R){T(c[0][3],R)}}function _(D){D.value instanceof Ji?Promise.resolve(D.value.v).then(p,E):T(c[0][2],D)}function p(D){l("next",D)}function E(D){l("throw",D)}function T(D,C){D(C),c.shift(),c.length&&l(c[0][0],c[0][1])}}function d_(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(f){return(t=!t)?{value:Ji(n[o](f)),done:o==="return"}:c?c(f):f}:c}}function p_(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Oa=="function"?Oa(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(f){return new Promise(function(l,_){f=n[c](f),o(l,_,f.done,f.value)})}}function o(c,f,l,_){Promise.resolve(_).then(function(p){c({value:p,done:l})},f)}}function g_(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function __(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function y_(n){return n&&n.__esModule?n:{default:n}}function v_(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function b_(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var w_=Object.freeze({__proto__:null,__extends:t_,get __assign(){return xa},__rest:r_,__decorate:n_,__param:i_,__metadata:s_,__awaiter:o_,__generator:a_,__createBinding:c_,__exportStar:u_,__values:Oa,__read:Mf,__spread:f_,__spreadArrays:h_,__await:Ji,__asyncGenerator:l_,__asyncDelegator:d_,__asyncValues:p_,__makeTemplateObject:g_,__importStar:__,__importDefault:y_,__classPrivateFieldGet:v_,__classPrivateFieldSet:b_}),m_=Mn(w_),Ia,Bf;function E_(){if(Bf)return Ia;Bf=1;function n(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}Ia=e;function e(t,s,o){var c=o&&o.stringify||n,f=1;if(typeof t=="object"&&t!==null){var l=s.length+f;if(l===1)return t;var _=new Array(l);_[0]=c(t);for(var p=1;p<l;p++)_[p]=c(s[p]);return _.join(" ")}if(typeof t!="string")return t;var E=s.length;if(E===0)return t;for(var T="",D=1-f,C=-1,R=t&&t.length||0,q=0;q<R;){if(t.charCodeAt(q)===37&&q+1<R){switch(C=C>-1?C:0,t.charCodeAt(q+1)){case 100:case 102:if(D>=E||s[D]==null)break;C<q&&(T+=t.slice(C,q)),T+=Number(s[D]),C=q+2,q++;break;case 105:if(D>=E||s[D]==null)break;C<q&&(T+=t.slice(C,q)),T+=Math.floor(Number(s[D])),C=q+2,q++;break;case 79:case 111:case 106:if(D>=E||s[D]===void 0)break;C<q&&(T+=t.slice(C,q));var K=typeof s[D];if(K==="string"){T+="'"+s[D]+"'",C=q+2,q++;break}if(K==="function"){T+=s[D].name||"<anonymous>",C=q+2,q++;break}T+=c(s[D]),C=q+2,q++;break;case 115:if(D>=E)break;C<q&&(T+=t.slice(C,q)),T+=String(s[D]),C=q+2,q++;break;case 37:C<q&&(T+=t.slice(C,q)),T+="%",C=q+2,q++,D--;break}++D}++q}return C===-1?t:(C<R&&(T+=t.slice(C)),T)}return Ia}var Aa,Hf;function S_(){if(Hf)return Aa;Hf=1;const n=E_();Aa=o;const e=P().console||{},t={mapHttpRequest:R,mapHttpResponse:R,wrapRequestSerializer:q,wrapResponseSerializer:q,wrapErrorSerializer:q,req:R,res:R,err:D};function s(m,u){return Array.isArray(m)?m.filter(function(V){return V!=="!stdSerializers.err"}):m===!0?Object.keys(u):!1}function o(m){m=m||{},m.browser=m.browser||{};const u=m.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const b=m.browser.write||e;m.browser.write&&(m.browser.asObject=!0);const V=m.serializers||{},k=s(m.browser.serialize,V);let ie=m.browser.serialize;Array.isArray(m.browser.serialize)&&m.browser.serialize.indexOf("!stdSerializers.err")>-1&&(ie=!1);const ce=["error","fatal","warn","info","debug","trace"];typeof b=="function"&&(b.error=b.fatal=b.warn=b.info=b.debug=b.trace=b),m.enabled===!1&&(m.level="silent");const de=m.level||"info",w=Object.create(b);w.log||(w.log=K),Object.defineProperty(w,"levelVal",{get:ee}),Object.defineProperty(w,"level",{get:X,set:G});const I={transmit:u,serialize:k,asObject:m.browser.asObject,levels:ce,timestamp:C(m)};w.levels=o.levels,w.level=de,w.setMaxListeners=w.getMaxListeners=w.emit=w.addListener=w.on=w.prependListener=w.once=w.prependOnceListener=w.removeListener=w.removeAllListeners=w.listeners=w.listenerCount=w.eventNames=w.write=w.flush=K,w.serializers=V,w._serialize=k,w._stdErrSerialize=ie,w.child=W,u&&(w._logEvent=T());function ee(){return this.level==="silent"?1/0:this.levels.values[this.level]}function X(){return this._level}function G(J){if(J!=="silent"&&!this.levels.values[J])throw Error("unknown level "+J);this._level=J,c(I,w,"error","log"),c(I,w,"fatal","error"),c(I,w,"warn","error"),c(I,w,"info","log"),c(I,w,"debug","log"),c(I,w,"trace","log")}function W(J,re){if(!J)throw new Error("missing bindings for child Pino");re=re||{},k&&J.serializers&&(re.serializers=J.serializers);const we=re.serializers;if(k&&we){var oe=Object.assign({},V,we),me=m.browser.serialize===!0?Object.keys(oe):k;delete J.serializers,_([J],me,oe,this._stdErrSerialize)}function he(ve){this._childLevel=(ve._childLevel|0)+1,this.error=p(ve,J,"error"),this.fatal=p(ve,J,"fatal"),this.warn=p(ve,J,"warn"),this.info=p(ve,J,"info"),this.debug=p(ve,J,"debug"),this.trace=p(ve,J,"trace"),oe&&(this.serializers=oe,this._serialize=me),u&&(this._logEvent=T([].concat(ve._logEvent.bindings,J)))}return he.prototype=this,new he(this)}return w}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=t,o.stdTimeFunctions=Object.assign({},{nullTime:se,epochTime:L,unixTime:M,isoTime:x});function c(m,u,b,V){const k=Object.getPrototypeOf(u);u[b]=u.levelVal>u.levels.values[b]?K:k[b]?k[b]:e[b]||e[V]||K,f(m,u,b)}function f(m,u,b){!m.transmit&&u[b]===K||(u[b]=function(V){return function(){const ie=m.timestamp(),ce=new Array(arguments.length),de=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var w=0;w<ce.length;w++)ce[w]=arguments[w];if(m.serialize&&!m.asObject&&_(ce,this._serialize,this.serializers,this._stdErrSerialize),m.asObject?V.call(de,l(this,b,ce,ie)):V.apply(de,ce),m.transmit){const I=m.transmit.level||u.level,ee=o.levels.values[I],X=o.levels.values[b];if(X<ee)return;E(this,{ts:ie,methodLevel:b,methodValue:X,transmitLevel:I,transmitValue:o.levels.values[m.transmit.level||u.level],send:m.transmit.send,val:u.levelVal},ce)}}}(u[b]))}function l(m,u,b,V){m._serialize&&_(b,m._serialize,m.serializers,m._stdErrSerialize);const k=b.slice();let ie=k[0];const ce={};V&&(ce.time=V),ce.level=o.levels.values[u];let de=(m._childLevel|0)+1;if(de<1&&(de=1),ie!==null&&typeof ie=="object"){for(;de--&&typeof k[0]=="object";)Object.assign(ce,k.shift());ie=k.length?n(k.shift(),k):void 0}else typeof ie=="string"&&(ie=n(k.shift(),k));return ie!==void 0&&(ce.msg=ie),ce}function _(m,u,b,V){for(const k in m)if(V&&m[k]instanceof Error)m[k]=o.stdSerializers.err(m[k]);else if(typeof m[k]=="object"&&!Array.isArray(m[k]))for(const ie in m[k])u&&u.indexOf(ie)>-1&&ie in b&&(m[k][ie]=b[ie](m[k][ie]))}function p(m,u,b){return function(){const V=new Array(1+arguments.length);V[0]=u;for(var k=1;k<V.length;k++)V[k]=arguments[k-1];return m[b].apply(this,V)}}function E(m,u,b){const V=u.send,k=u.ts,ie=u.methodLevel,ce=u.methodValue,de=u.val,w=m._logEvent.bindings;_(b,m._serialize||Object.keys(m.serializers),m.serializers,m._stdErrSerialize===void 0?!0:m._stdErrSerialize),m._logEvent.ts=k,m._logEvent.messages=b.filter(function(I){return w.indexOf(I)===-1}),m._logEvent.level.label=ie,m._logEvent.level.value=ce,V(ie,m._logEvent,de),m._logEvent=T(w)}function T(m){return{ts:0,messages:[],bindings:m||[],level:{label:"",value:0}}}function D(m){const u={type:m.constructor.name,msg:m.message,stack:m.stack};for(const b in m)u[b]===void 0&&(u[b]=m[b]);return u}function C(m){return typeof m.timestamp=="function"?m.timestamp:m.timestamp===!1?se:L}function R(){return{}}function q(m){return m}function K(){}function se(){return!1}function L(){return Date.now()}function M(){return Math.round(Date.now()/1e3)}function x(){return new Date(Date.now()).toISOString()}function P(){function m(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return m(self)||m(window)||m(this)||{}}}return Aa}var zn={},jf;function qf(){return jf||(jf=1,Object.defineProperty(zn,"__esModule",{value:!0}),zn.PINO_CUSTOM_CONTEXT_KEY=zn.PINO_LOGGER_DEFAULTS=void 0,zn.PINO_LOGGER_DEFAULTS={level:"info"},zn.PINO_CUSTOM_CONTEXT_KEY="custom_context"),zn}var nr={},zf;function D_(){if(zf)return nr;zf=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.generateChildLogger=nr.formatChildLoggerContext=nr.getLoggerContext=nr.setBrowserLoggerContext=nr.getBrowserLoggerContext=nr.getDefaultLoggerOptions=void 0;const n=qf();function e(l){return Object.assign(Object.assign({},l),{level:l?.level||n.PINO_LOGGER_DEFAULTS.level})}nr.getDefaultLoggerOptions=e;function t(l,_=n.PINO_CUSTOM_CONTEXT_KEY){return l[_]||""}nr.getBrowserLoggerContext=t;function s(l,_,p=n.PINO_CUSTOM_CONTEXT_KEY){return l[p]=_,l}nr.setBrowserLoggerContext=s;function o(l,_=n.PINO_CUSTOM_CONTEXT_KEY){let p="";return typeof l.bindings>"u"?p=t(l,_):p=l.bindings().context||"",p}nr.getLoggerContext=o;function c(l,_,p=n.PINO_CUSTOM_CONTEXT_KEY){const E=o(l,p);return E.trim()?`${E}/${_}`:_}nr.formatChildLoggerContext=c;function f(l,_,p=n.PINO_CUSTOM_CONTEXT_KEY){const E=c(l,_,p),T=l.child({context:E});return s(T,E,p)}return nr.generateChildLogger=f,nr}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const e=m_,t=e.__importDefault(S_());Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(qf(),n),e.__exportStar(D_(),n)})(Je);class x_ extends jn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class O_ extends jn{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class I_{constructor(e,t){this.logger=e,this.core=t}}class A_ extends jn{constructor(e,t){super(),this.relayer=e,this.logger=t}}class P_ extends jn{constructor(e){super()}}class T_{constructor(e,t,s,o){this.core=e,this.logger=t,this.name=s}}class C_ extends jn{constructor(e,t){super(),this.relayer=e,this.logger=t}}class R_ extends jn{constructor(e,t){super(),this.core=e,this.logger=t}}class N_{constructor(e,t){this.projectId=e,this.logger=t}}class L_{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class F_{constructor(e){this.client=e}}const U_=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),$_=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Pa(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return $_(n)}catch{return n}}function Xi(n){return typeof n=="string"?n:U_(n)||""}var Ta={},di={},Ns={},Ls={};Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.BrowserRandomSource=void 0;const Kf=65536;class M_{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let s=0;s<t.length;s+=Kf)this._crypto.getRandomValues(t.subarray(s,s+Math.min(t.length-s,Kf)));return t}}Ls.BrowserRandomSource=M_;function B_(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fs={},Er={};Object.defineProperty(Er,"__esModule",{value:!0});function H_(n){for(var e=0;e<n.length;e++)n[e]=0;return n}Er.wipe=H_;var j_={},q_=Object.freeze({__proto__:null,default:j_}),z_=Mn(q_);Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.NodeRandomSource=void 0;const K_=Er;class G_{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof B_<"u"){const e=z_;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let o=0;o<s.length;o++)s[o]=t[o];return(0,K_.wipe)(t),s}}Fs.NodeRandomSource=G_,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.SystemRandomSource=void 0;const W_=Ls,V_=Fs;class Y_{constructor(){if(this.isAvailable=!1,this.name="",this._source=new W_.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new V_.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Ns.SystemRandomSource=Y_;var Ne={},Gf={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(l,_){var p=l>>>16&65535,E=l&65535,T=_>>>16&65535,D=_&65535;return E*D+(p*D+E*T<<16>>>0)|0}n.mul=Math.imul||e;function t(l,_){return l+_|0}n.add=t;function s(l,_){return l-_|0}n.sub=s;function o(l,_){return l<<_|l>>>32-_}n.rotl=o;function c(l,_){return l<<32-_|l>>>_}n.rotr=c;function f(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l}n.isInteger=Number.isInteger||f,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(l){return n.isInteger(l)&&l>=-n.MAX_SAFE_INTEGER&&l<=n.MAX_SAFE_INTEGER}})(Gf),Object.defineProperty(Ne,"__esModule",{value:!0});var Wf=Gf;function k_(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])<<16>>16}Ne.readInt16BE=k_;function J_(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])>>>0}Ne.readUint16BE=J_;function X_(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])<<16>>16}Ne.readInt16LE=X_;function Z_(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])>>>0}Ne.readUint16LE=Z_;function Vf(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>8,e[t+1]=n>>>0,e}Ne.writeUint16BE=Vf,Ne.writeInt16BE=Vf;function Yf(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e}Ne.writeUint16LE=Yf,Ne.writeInt16LE=Yf;function Ca(n,e){return e===void 0&&(e=0),n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}Ne.readInt32BE=Ca;function Ra(n,e){return e===void 0&&(e=0),(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}Ne.readUint32BE=Ra;function Na(n,e){return e===void 0&&(e=0),n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]}Ne.readInt32LE=Na;function La(n,e){return e===void 0&&(e=0),(n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e])>>>0}Ne.readUint32LE=La;function Us(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>24,e[t+1]=n>>>16,e[t+2]=n>>>8,e[t+3]=n>>>0,e}Ne.writeUint32BE=Us,Ne.writeInt32BE=Us;function $s(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e[t+2]=n>>>16,e[t+3]=n>>>24,e}Ne.writeUint32LE=$s,Ne.writeInt32LE=$s;function Q_(n,e){e===void 0&&(e=0);var t=Ca(n,e),s=Ca(n,e+4);return t*4294967296+s-(s>>31)*4294967296}Ne.readInt64BE=Q_;function ey(n,e){e===void 0&&(e=0);var t=Ra(n,e),s=Ra(n,e+4);return t*4294967296+s}Ne.readUint64BE=ey;function ty(n,e){e===void 0&&(e=0);var t=Na(n,e),s=Na(n,e+4);return s*4294967296+t-(t>>31)*4294967296}Ne.readInt64LE=ty;function ry(n,e){e===void 0&&(e=0);var t=La(n,e),s=La(n,e+4);return s*4294967296+t}Ne.readUint64LE=ry;function kf(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Us(n/4294967296>>>0,e,t),Us(n>>>0,e,t+4),e}Ne.writeUint64BE=kf,Ne.writeInt64BE=kf;function Jf(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),$s(n>>>0,e,t),$s(n/4294967296>>>0,e,t+4),e}Ne.writeUint64LE=Jf,Ne.writeInt64LE=Jf;function ny(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,c=n/8+t-1;c>=t;c--)s+=e[c]*o,o*=256;return s}Ne.readUintBE=ny;function iy(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,c=t;c<t+n/8;c++)s+=e[c]*o,o*=256;return s}Ne.readUintLE=iy;function sy(n,e,t,s){if(t===void 0&&(t=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Wf.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,c=n/8+s-1;c>=s;c--)t[c]=e/o&255,o*=256;return t}Ne.writeUintBE=sy;function oy(n,e,t,s){if(t===void 0&&(t=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Wf.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,c=s;c<s+n/8;c++)t[c]=e/o&255,o*=256;return t}Ne.writeUintLE=oy;function ay(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e)}Ne.readFloat32BE=ay;function cy(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e,!0)}Ne.readFloat32LE=cy;function uy(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e)}Ne.readFloat64BE=uy;function fy(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e,!0)}Ne.readFloat64LE=fy;function hy(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,n),e}Ne.writeFloat32BE=hy;function ly(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,n,!0),e}Ne.writeFloat32LE=ly;function dy(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,n),e}Ne.writeFloat64BE=dy;function py(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,n,!0),e}Ne.writeFloat64LE=py,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const e=Ns,t=Ne,s=Er;n.defaultRandomSource=new e.SystemRandomSource;function o(p,E=n.defaultRandomSource){return E.randomBytes(p)}n.randomBytes=o;function c(p=n.defaultRandomSource){const E=o(4,p),T=(0,t.readUint32LE)(E);return(0,s.wipe)(E),T}n.randomUint32=c;const f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function l(p,E=f,T=n.defaultRandomSource){if(E.length<2)throw new Error("randomString charset is too short");if(E.length>256)throw new Error("randomString charset is too long");let D="";const C=E.length,R=256-256%C;for(;p>0;){const q=o(Math.ceil(p*256/R),T);for(let K=0;K<q.length&&p>0;K++){const se=q[K];se<R&&(D+=E.charAt(se%C),p--)}(0,s.wipe)(q)}return D}n.randomString=l;function _(p,E=f,T=n.defaultRandomSource){const D=Math.ceil(p/(Math.log(E.length)/Math.LN2));return l(D,E,T)}n.randomStringForEntropy=_}(di);var Xf={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ne,t=Er;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var s=function(){function l(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},l.prototype.update=function(_,p){if(p===void 0&&(p=_.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var E=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&p>0;)this._buffer[this._bufferLength++]=_[E++],p--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(E=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,_,E,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=_[E++],p--;return this},l.prototype.finish=function(_){if(!this._finished){var p=this._bytesHashed,E=this._bufferLength,T=p/536870912|0,D=p<<3,C=p%128<112?128:256;this._buffer[E]=128;for(var R=E+1;R<C-8;R++)this._buffer[R]=0;e.writeUint32BE(T,this._buffer,C-8),e.writeUint32BE(D,this._buffer,C-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,C),this._finished=!0}for(var R=0;R<this.digestLength/8;R++)e.writeUint32BE(this._stateHi[R],_,R*8),e.writeUint32BE(this._stateLo[R],_,R*8+4);return this},l.prototype.digest=function(){var _=new Uint8Array(this.digestLength);return this.finish(_),_},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(_){return this._stateHi.set(_.stateHi),this._stateLo.set(_.stateLo),this._bufferLength=_.bufferLength,_.buffer&&this._buffer.set(_.buffer),this._bytesHashed=_.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(_){t.wipe(_.stateHi),t.wipe(_.stateLo),_.buffer&&t.wipe(_.buffer),_.bufferLength=0,_.bytesHashed=0},l}();n.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(l,_,p,E,T,D,C){for(var R=p[0],q=p[1],K=p[2],se=p[3],L=p[4],M=p[5],x=p[6],P=p[7],m=E[0],u=E[1],b=E[2],V=E[3],k=E[4],ie=E[5],ce=E[6],de=E[7],w,I,ee,X,G,W,J,re;C>=128;){for(var we=0;we<16;we++){var oe=8*we+D;l[we]=e.readUint32BE(T,oe),_[we]=e.readUint32BE(T,oe+4)}for(var we=0;we<80;we++){var me=R,he=q,ve=K,j=se,H=L,F=M,d=x,A=P,ae=m,le=u,xe=b,qe=V,Ge=k,$e=ie,gt=ce,_t=de;if(w=P,I=de,G=I&65535,W=I>>>16,J=w&65535,re=w>>>16,w=(L>>>14|k<<32-14)^(L>>>18|k<<32-18)^(k>>>41-32|L<<32-(41-32)),I=(k>>>14|L<<32-14)^(k>>>18|L<<32-18)^(L>>>41-32|k<<32-(41-32)),G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,w=L&M^~L&x,I=k&ie^~k&ce,G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,w=o[we*2],I=o[we*2+1],G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,w=l[we%16],I=_[we%16],G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,W+=G>>>16,J+=W>>>16,re+=J>>>16,ee=J&65535|re<<16,X=G&65535|W<<16,w=ee,I=X,G=I&65535,W=I>>>16,J=w&65535,re=w>>>16,w=(R>>>28|m<<32-28)^(m>>>34-32|R<<32-(34-32))^(m>>>39-32|R<<32-(39-32)),I=(m>>>28|R<<32-28)^(R>>>34-32|m<<32-(34-32))^(R>>>39-32|m<<32-(39-32)),G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,w=R&q^R&K^q&K,I=m&u^m&b^u&b,G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,W+=G>>>16,J+=W>>>16,re+=J>>>16,A=J&65535|re<<16,_t=G&65535|W<<16,w=j,I=qe,G=I&65535,W=I>>>16,J=w&65535,re=w>>>16,w=ee,I=X,G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,W+=G>>>16,J+=W>>>16,re+=J>>>16,j=J&65535|re<<16,qe=G&65535|W<<16,q=me,K=he,se=ve,L=j,M=H,x=F,P=d,R=A,u=ae,b=le,V=xe,k=qe,ie=Ge,ce=$e,de=gt,m=_t,we%16===15)for(var oe=0;oe<16;oe++)w=l[oe],I=_[oe],G=I&65535,W=I>>>16,J=w&65535,re=w>>>16,w=l[(oe+9)%16],I=_[(oe+9)%16],G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,ee=l[(oe+1)%16],X=_[(oe+1)%16],w=(ee>>>1|X<<32-1)^(ee>>>8|X<<32-8)^ee>>>7,I=(X>>>1|ee<<32-1)^(X>>>8|ee<<32-8)^(X>>>7|ee<<32-7),G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,ee=l[(oe+14)%16],X=_[(oe+14)%16],w=(ee>>>19|X<<32-19)^(X>>>61-32|ee<<32-(61-32))^ee>>>6,I=(X>>>19|ee<<32-19)^(ee>>>61-32|X<<32-(61-32))^(X>>>6|ee<<32-6),G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,W+=G>>>16,J+=W>>>16,re+=J>>>16,l[oe]=J&65535|re<<16,_[oe]=G&65535|W<<16}w=R,I=m,G=I&65535,W=I>>>16,J=w&65535,re=w>>>16,w=p[0],I=E[0],G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,W+=G>>>16,J+=W>>>16,re+=J>>>16,p[0]=R=J&65535|re<<16,E[0]=m=G&65535|W<<16,w=q,I=u,G=I&65535,W=I>>>16,J=w&65535,re=w>>>16,w=p[1],I=E[1],G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,W+=G>>>16,J+=W>>>16,re+=J>>>16,p[1]=q=J&65535|re<<16,E[1]=u=G&65535|W<<16,w=K,I=b,G=I&65535,W=I>>>16,J=w&65535,re=w>>>16,w=p[2],I=E[2],G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,W+=G>>>16,J+=W>>>16,re+=J>>>16,p[2]=K=J&65535|re<<16,E[2]=b=G&65535|W<<16,w=se,I=V,G=I&65535,W=I>>>16,J=w&65535,re=w>>>16,w=p[3],I=E[3],G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,W+=G>>>16,J+=W>>>16,re+=J>>>16,p[3]=se=J&65535|re<<16,E[3]=V=G&65535|W<<16,w=L,I=k,G=I&65535,W=I>>>16,J=w&65535,re=w>>>16,w=p[4],I=E[4],G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,W+=G>>>16,J+=W>>>16,re+=J>>>16,p[4]=L=J&65535|re<<16,E[4]=k=G&65535|W<<16,w=M,I=ie,G=I&65535,W=I>>>16,J=w&65535,re=w>>>16,w=p[5],I=E[5],G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,W+=G>>>16,J+=W>>>16,re+=J>>>16,p[5]=M=J&65535|re<<16,E[5]=ie=G&65535|W<<16,w=x,I=ce,G=I&65535,W=I>>>16,J=w&65535,re=w>>>16,w=p[6],I=E[6],G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,W+=G>>>16,J+=W>>>16,re+=J>>>16,p[6]=x=J&65535|re<<16,E[6]=ce=G&65535|W<<16,w=P,I=de,G=I&65535,W=I>>>16,J=w&65535,re=w>>>16,w=p[7],I=E[7],G+=I&65535,W+=I>>>16,J+=w&65535,re+=w>>>16,W+=G>>>16,J+=W>>>16,re+=J>>>16,p[7]=P=J&65535|re<<16,E[7]=de=G&65535|W<<16,D+=128,C-=128}return D}function f(l){var _=new s;_.update(l);var p=_.digest();return _.clean(),p}n.hash=f})(Xf),function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const e=di,t=Xf,s=Er;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function o(j){const H=new Float64Array(16);if(j)for(let F=0;F<j.length;F++)H[F]=j[F];return H}const c=new Uint8Array(32);c[0]=9;const f=o(),l=o([1]),_=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),E=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),T=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),D=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function C(j,H){for(let F=0;F<16;F++)j[F]=H[F]|0}function R(j){let H=1;for(let F=0;F<16;F++){let d=j[F]+H+65535;H=Math.floor(d/65536),j[F]=d-H*65536}j[0]+=H-1+37*(H-1)}function q(j,H,F){const d=~(F-1);for(let A=0;A<16;A++){const ae=d&(j[A]^H[A]);j[A]^=ae,H[A]^=ae}}function K(j,H){const F=o(),d=o();for(let A=0;A<16;A++)d[A]=H[A];R(d),R(d),R(d);for(let A=0;A<2;A++){F[0]=d[0]-65517;for(let le=1;le<15;le++)F[le]=d[le]-65535-(F[le-1]>>16&1),F[le-1]&=65535;F[15]=d[15]-32767-(F[14]>>16&1);const ae=F[15]>>16&1;F[14]&=65535,q(d,F,1-ae)}for(let A=0;A<16;A++)j[2*A]=d[A]&255,j[2*A+1]=d[A]>>8}function se(j,H){let F=0;for(let d=0;d<32;d++)F|=j[d]^H[d];return(1&F-1>>>8)-1}function L(j,H){const F=new Uint8Array(32),d=new Uint8Array(32);return K(F,j),K(d,H),se(F,d)}function M(j){const H=new Uint8Array(32);return K(H,j),H[0]&1}function x(j,H){for(let F=0;F<16;F++)j[F]=H[2*F]+(H[2*F+1]<<8);j[15]&=32767}function P(j,H,F){for(let d=0;d<16;d++)j[d]=H[d]+F[d]}function m(j,H,F){for(let d=0;d<16;d++)j[d]=H[d]-F[d]}function u(j,H,F){let d,A,ae=0,le=0,xe=0,qe=0,Ge=0,$e=0,gt=0,_t=0,Be=0,Oe=0,Le=0,Fe=0,He=0,Ae=0,Ue=0,De=0,Pe=0,ze=0,Ie=0,We=0,Ye=0,et=0,tt=0,Xe=0,cr=0,_r=0,Zr=0,ur=0,cn=0,On=0,kn=0,Dt=F[0],yt=F[1],xt=F[2],Ot=F[3],mt=F[4],vt=F[5],Mt=F[6],Bt=F[7],It=F[8],Ht=F[9],At=F[10],Rt=F[11],Pt=F[12],lt=F[13],jt=F[14],qt=F[15];d=H[0],ae+=d*Dt,le+=d*yt,xe+=d*xt,qe+=d*Ot,Ge+=d*mt,$e+=d*vt,gt+=d*Mt,_t+=d*Bt,Be+=d*It,Oe+=d*Ht,Le+=d*At,Fe+=d*Rt,He+=d*Pt,Ae+=d*lt,Ue+=d*jt,De+=d*qt,d=H[1],le+=d*Dt,xe+=d*yt,qe+=d*xt,Ge+=d*Ot,$e+=d*mt,gt+=d*vt,_t+=d*Mt,Be+=d*Bt,Oe+=d*It,Le+=d*Ht,Fe+=d*At,He+=d*Rt,Ae+=d*Pt,Ue+=d*lt,De+=d*jt,Pe+=d*qt,d=H[2],xe+=d*Dt,qe+=d*yt,Ge+=d*xt,$e+=d*Ot,gt+=d*mt,_t+=d*vt,Be+=d*Mt,Oe+=d*Bt,Le+=d*It,Fe+=d*Ht,He+=d*At,Ae+=d*Rt,Ue+=d*Pt,De+=d*lt,Pe+=d*jt,ze+=d*qt,d=H[3],qe+=d*Dt,Ge+=d*yt,$e+=d*xt,gt+=d*Ot,_t+=d*mt,Be+=d*vt,Oe+=d*Mt,Le+=d*Bt,Fe+=d*It,He+=d*Ht,Ae+=d*At,Ue+=d*Rt,De+=d*Pt,Pe+=d*lt,ze+=d*jt,Ie+=d*qt,d=H[4],Ge+=d*Dt,$e+=d*yt,gt+=d*xt,_t+=d*Ot,Be+=d*mt,Oe+=d*vt,Le+=d*Mt,Fe+=d*Bt,He+=d*It,Ae+=d*Ht,Ue+=d*At,De+=d*Rt,Pe+=d*Pt,ze+=d*lt,Ie+=d*jt,We+=d*qt,d=H[5],$e+=d*Dt,gt+=d*yt,_t+=d*xt,Be+=d*Ot,Oe+=d*mt,Le+=d*vt,Fe+=d*Mt,He+=d*Bt,Ae+=d*It,Ue+=d*Ht,De+=d*At,Pe+=d*Rt,ze+=d*Pt,Ie+=d*lt,We+=d*jt,Ye+=d*qt,d=H[6],gt+=d*Dt,_t+=d*yt,Be+=d*xt,Oe+=d*Ot,Le+=d*mt,Fe+=d*vt,He+=d*Mt,Ae+=d*Bt,Ue+=d*It,De+=d*Ht,Pe+=d*At,ze+=d*Rt,Ie+=d*Pt,We+=d*lt,Ye+=d*jt,et+=d*qt,d=H[7],_t+=d*Dt,Be+=d*yt,Oe+=d*xt,Le+=d*Ot,Fe+=d*mt,He+=d*vt,Ae+=d*Mt,Ue+=d*Bt,De+=d*It,Pe+=d*Ht,ze+=d*At,Ie+=d*Rt,We+=d*Pt,Ye+=d*lt,et+=d*jt,tt+=d*qt,d=H[8],Be+=d*Dt,Oe+=d*yt,Le+=d*xt,Fe+=d*Ot,He+=d*mt,Ae+=d*vt,Ue+=d*Mt,De+=d*Bt,Pe+=d*It,ze+=d*Ht,Ie+=d*At,We+=d*Rt,Ye+=d*Pt,et+=d*lt,tt+=d*jt,Xe+=d*qt,d=H[9],Oe+=d*Dt,Le+=d*yt,Fe+=d*xt,He+=d*Ot,Ae+=d*mt,Ue+=d*vt,De+=d*Mt,Pe+=d*Bt,ze+=d*It,Ie+=d*Ht,We+=d*At,Ye+=d*Rt,et+=d*Pt,tt+=d*lt,Xe+=d*jt,cr+=d*qt,d=H[10],Le+=d*Dt,Fe+=d*yt,He+=d*xt,Ae+=d*Ot,Ue+=d*mt,De+=d*vt,Pe+=d*Mt,ze+=d*Bt,Ie+=d*It,We+=d*Ht,Ye+=d*At,et+=d*Rt,tt+=d*Pt,Xe+=d*lt,cr+=d*jt,_r+=d*qt,d=H[11],Fe+=d*Dt,He+=d*yt,Ae+=d*xt,Ue+=d*Ot,De+=d*mt,Pe+=d*vt,ze+=d*Mt,Ie+=d*Bt,We+=d*It,Ye+=d*Ht,et+=d*At,tt+=d*Rt,Xe+=d*Pt,cr+=d*lt,_r+=d*jt,Zr+=d*qt,d=H[12],He+=d*Dt,Ae+=d*yt,Ue+=d*xt,De+=d*Ot,Pe+=d*mt,ze+=d*vt,Ie+=d*Mt,We+=d*Bt,Ye+=d*It,et+=d*Ht,tt+=d*At,Xe+=d*Rt,cr+=d*Pt,_r+=d*lt,Zr+=d*jt,ur+=d*qt,d=H[13],Ae+=d*Dt,Ue+=d*yt,De+=d*xt,Pe+=d*Ot,ze+=d*mt,Ie+=d*vt,We+=d*Mt,Ye+=d*Bt,et+=d*It,tt+=d*Ht,Xe+=d*At,cr+=d*Rt,_r+=d*Pt,Zr+=d*lt,ur+=d*jt,cn+=d*qt,d=H[14],Ue+=d*Dt,De+=d*yt,Pe+=d*xt,ze+=d*Ot,Ie+=d*mt,We+=d*vt,Ye+=d*Mt,et+=d*Bt,tt+=d*It,Xe+=d*Ht,cr+=d*At,_r+=d*Rt,Zr+=d*Pt,ur+=d*lt,cn+=d*jt,On+=d*qt,d=H[15],De+=d*Dt,Pe+=d*yt,ze+=d*xt,Ie+=d*Ot,We+=d*mt,Ye+=d*vt,et+=d*Mt,tt+=d*Bt,Xe+=d*It,cr+=d*Ht,_r+=d*At,Zr+=d*Rt,ur+=d*Pt,cn+=d*lt,On+=d*jt,kn+=d*qt,ae+=38*Pe,le+=38*ze,xe+=38*Ie,qe+=38*We,Ge+=38*Ye,$e+=38*et,gt+=38*tt,_t+=38*Xe,Be+=38*cr,Oe+=38*_r,Le+=38*Zr,Fe+=38*ur,He+=38*cn,Ae+=38*On,Ue+=38*kn,A=1,d=ae+A+65535,A=Math.floor(d/65536),ae=d-A*65536,d=le+A+65535,A=Math.floor(d/65536),le=d-A*65536,d=xe+A+65535,A=Math.floor(d/65536),xe=d-A*65536,d=qe+A+65535,A=Math.floor(d/65536),qe=d-A*65536,d=Ge+A+65535,A=Math.floor(d/65536),Ge=d-A*65536,d=$e+A+65535,A=Math.floor(d/65536),$e=d-A*65536,d=gt+A+65535,A=Math.floor(d/65536),gt=d-A*65536,d=_t+A+65535,A=Math.floor(d/65536),_t=d-A*65536,d=Be+A+65535,A=Math.floor(d/65536),Be=d-A*65536,d=Oe+A+65535,A=Math.floor(d/65536),Oe=d-A*65536,d=Le+A+65535,A=Math.floor(d/65536),Le=d-A*65536,d=Fe+A+65535,A=Math.floor(d/65536),Fe=d-A*65536,d=He+A+65535,A=Math.floor(d/65536),He=d-A*65536,d=Ae+A+65535,A=Math.floor(d/65536),Ae=d-A*65536,d=Ue+A+65535,A=Math.floor(d/65536),Ue=d-A*65536,d=De+A+65535,A=Math.floor(d/65536),De=d-A*65536,ae+=A-1+37*(A-1),A=1,d=ae+A+65535,A=Math.floor(d/65536),ae=d-A*65536,d=le+A+65535,A=Math.floor(d/65536),le=d-A*65536,d=xe+A+65535,A=Math.floor(d/65536),xe=d-A*65536,d=qe+A+65535,A=Math.floor(d/65536),qe=d-A*65536,d=Ge+A+65535,A=Math.floor(d/65536),Ge=d-A*65536,d=$e+A+65535,A=Math.floor(d/65536),$e=d-A*65536,d=gt+A+65535,A=Math.floor(d/65536),gt=d-A*65536,d=_t+A+65535,A=Math.floor(d/65536),_t=d-A*65536,d=Be+A+65535,A=Math.floor(d/65536),Be=d-A*65536,d=Oe+A+65535,A=Math.floor(d/65536),Oe=d-A*65536,d=Le+A+65535,A=Math.floor(d/65536),Le=d-A*65536,d=Fe+A+65535,A=Math.floor(d/65536),Fe=d-A*65536,d=He+A+65535,A=Math.floor(d/65536),He=d-A*65536,d=Ae+A+65535,A=Math.floor(d/65536),Ae=d-A*65536,d=Ue+A+65535,A=Math.floor(d/65536),Ue=d-A*65536,d=De+A+65535,A=Math.floor(d/65536),De=d-A*65536,ae+=A-1+37*(A-1),j[0]=ae,j[1]=le,j[2]=xe,j[3]=qe,j[4]=Ge,j[5]=$e,j[6]=gt,j[7]=_t,j[8]=Be,j[9]=Oe,j[10]=Le,j[11]=Fe,j[12]=He,j[13]=Ae,j[14]=Ue,j[15]=De}function b(j,H){u(j,H,H)}function V(j,H){const F=o();let d;for(d=0;d<16;d++)F[d]=H[d];for(d=253;d>=0;d--)b(F,F),d!==2&&d!==4&&u(F,F,H);for(d=0;d<16;d++)j[d]=F[d]}function k(j,H){const F=o();let d;for(d=0;d<16;d++)F[d]=H[d];for(d=250;d>=0;d--)b(F,F),d!==1&&u(F,F,H);for(d=0;d<16;d++)j[d]=F[d]}function ie(j,H){const F=o(),d=o(),A=o(),ae=o(),le=o(),xe=o(),qe=o(),Ge=o(),$e=o();m(F,j[1],j[0]),m($e,H[1],H[0]),u(F,F,$e),P(d,j[0],j[1]),P($e,H[0],H[1]),u(d,d,$e),u(A,j[3],H[3]),u(A,A,p),u(ae,j[2],H[2]),P(ae,ae,ae),m(le,d,F),m(xe,ae,A),P(qe,ae,A),P(Ge,d,F),u(j[0],le,xe),u(j[1],Ge,qe),u(j[2],qe,xe),u(j[3],le,Ge)}function ce(j,H,F){for(let d=0;d<4;d++)q(j[d],H[d],F)}function de(j,H){const F=o(),d=o(),A=o();V(A,H[2]),u(F,H[0],A),u(d,H[1],A),K(j,d),j[31]^=M(F)<<7}function w(j,H,F){C(j[0],f),C(j[1],l),C(j[2],l),C(j[3],f);for(let d=255;d>=0;--d){const A=F[d/8|0]>>(d&7)&1;ce(j,H,A),ie(H,j),ie(j,j),ce(j,H,A)}}function I(j,H){const F=[o(),o(),o(),o()];C(F[0],E),C(F[1],T),C(F[2],l),u(F[3],E,T),w(j,F,H)}function ee(j){if(j.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const H=(0,t.hash)(j);H[0]&=248,H[31]&=127,H[31]|=64;const F=new Uint8Array(32),d=[o(),o(),o(),o()];I(d,H),de(F,d);const A=new Uint8Array(64);return A.set(j),A.set(F,32),{publicKey:F,secretKey:A}}n.generateKeyPairFromSeed=ee;function X(j){const H=(0,e.randomBytes)(32,j),F=ee(H);return(0,s.wipe)(H),F}n.generateKeyPair=X;function G(j){if(j.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(j.subarray(32))}n.extractPublicKeyFromSecretKey=G;const W=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function J(j,H){let F,d,A,ae;for(d=63;d>=32;--d){for(F=0,A=d-32,ae=d-12;A<ae;++A)H[A]+=F-16*H[d]*W[A-(d-32)],F=Math.floor((H[A]+128)/256),H[A]-=F*256;H[A]+=F,H[d]=0}for(F=0,A=0;A<32;A++)H[A]+=F-(H[31]>>4)*W[A],F=H[A]>>8,H[A]&=255;for(A=0;A<32;A++)H[A]-=F*W[A];for(d=0;d<32;d++)H[d+1]+=H[d]>>8,j[d]=H[d]&255}function re(j){const H=new Float64Array(64);for(let F=0;F<64;F++)H[F]=j[F];for(let F=0;F<64;F++)j[F]=0;J(j,H)}function we(j,H){const F=new Float64Array(64),d=[o(),o(),o(),o()],A=(0,t.hash)(j.subarray(0,32));A[0]&=248,A[31]&=127,A[31]|=64;const ae=new Uint8Array(64);ae.set(A.subarray(32),32);const le=new t.SHA512;le.update(ae.subarray(32)),le.update(H);const xe=le.digest();le.clean(),re(xe),I(d,xe),de(ae,d),le.reset(),le.update(ae.subarray(0,32)),le.update(j.subarray(32)),le.update(H);const qe=le.digest();re(qe);for(let Ge=0;Ge<32;Ge++)F[Ge]=xe[Ge];for(let Ge=0;Ge<32;Ge++)for(let $e=0;$e<32;$e++)F[Ge+$e]+=qe[Ge]*A[$e];return J(ae.subarray(32),F),ae}n.sign=we;function oe(j,H){const F=o(),d=o(),A=o(),ae=o(),le=o(),xe=o(),qe=o();return C(j[2],l),x(j[1],H),b(A,j[1]),u(ae,A,_),m(A,A,j[2]),P(ae,j[2],ae),b(le,ae),b(xe,le),u(qe,xe,le),u(F,qe,A),u(F,F,ae),k(F,F),u(F,F,A),u(F,F,ae),u(F,F,ae),u(j[0],F,ae),b(d,j[0]),u(d,d,ae),L(d,A)&&u(j[0],j[0],D),b(d,j[0]),u(d,d,ae),L(d,A)?-1:(M(j[0])===H[31]>>7&&m(j[0],f,j[0]),u(j[3],j[0],j[1]),0)}function me(j,H,F){const d=new Uint8Array(32),A=[o(),o(),o(),o()],ae=[o(),o(),o(),o()];if(F.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(oe(ae,j))return!1;const le=new t.SHA512;le.update(F.subarray(0,32)),le.update(j),le.update(H);const xe=le.digest();return re(xe),w(A,ae,xe),I(ae,F.subarray(32)),ie(A,ae),de(d,A),!se(F,d)}n.verify=me;function he(j){let H=[o(),o(),o(),o()];if(oe(H,j))throw new Error("Ed25519: invalid public key");let F=o(),d=o(),A=H[1];P(F,l,A),m(d,l,A),V(d,d),u(F,F,d);let ae=new Uint8Array(32);return K(ae,F),ae}n.convertPublicKeyToX25519=he;function ve(j){const H=(0,t.hash)(j.subarray(0,32));H[0]&=248,H[31]&=127,H[31]|=64;const F=new Uint8Array(H.subarray(0,32));return(0,s.wipe)(H),F}n.convertSecretKeyToX25519=ve}(Ta);const gy="EdDSA",_y="JWT",Zf=".",Qf="base64url",yy="utf8",vy="utf8",by=":",wy="did",my="key",eh="base58btc",Ey="z",Sy="K36",Dy=32;function Fa(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function th(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Fa(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Ua(n,e){e||(e=n.reduce((o,c)=>o+c.length,0));const t=th(e);let s=0;for(const o of n)t.set(o,s),s+=o.length;return Fa(t)}function xy(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<n.length;o++){var c=n.charAt(o),f=c.charCodeAt(0);if(t[f]!==255)throw new TypeError(c+" is ambiguous");t[f]=o}var l=n.length,_=n.charAt(0),p=Math.log(l)/Math.log(256),E=Math.log(256)/Math.log(l);function T(R){if(R instanceof Uint8Array||(ArrayBuffer.isView(R)?R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength):Array.isArray(R)&&(R=Uint8Array.from(R))),!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length===0)return"";for(var q=0,K=0,se=0,L=R.length;se!==L&&R[se]===0;)se++,q++;for(var M=(L-se)*E+1>>>0,x=new Uint8Array(M);se!==L;){for(var P=R[se],m=0,u=M-1;(P!==0||m<K)&&u!==-1;u--,m++)P+=256*x[u]>>>0,x[u]=P%l>>>0,P=P/l>>>0;if(P!==0)throw new Error("Non-zero carry");K=m,se++}for(var b=M-K;b!==M&&x[b]===0;)b++;for(var V=_.repeat(q);b<M;++b)V+=n.charAt(x[b]);return V}function D(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return new Uint8Array;var q=0;if(R[q]!==" "){for(var K=0,se=0;R[q]===_;)K++,q++;for(var L=(R.length-q)*p+1>>>0,M=new Uint8Array(L);R[q];){var x=t[R.charCodeAt(q)];if(x===255)return;for(var P=0,m=L-1;(x!==0||P<se)&&m!==-1;m--,P++)x+=l*M[m]>>>0,M[m]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");se=P,q++}if(R[q]!==" "){for(var u=L-se;u!==L&&M[u]===0;)u++;for(var b=new Uint8Array(K+(L-u)),V=K;u!==L;)b[V++]=M[u++];return b}}}function C(R){var q=D(R);if(q)return q;throw new Error(`Non-${e} character`)}return{encode:T,decodeUnsafe:D,decode:C}}var Oy=xy,Iy=Oy;const rh=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Ay=n=>new TextEncoder().encode(n),Py=n=>new TextDecoder().decode(n);class Ty{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Cy{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return nh(this,e)}}class Ry{constructor(e){this.decoders=e}or(e){return nh(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const nh=(n,e)=>new Ry({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class Ny{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new Ty(e,t,s),this.decoder=new Cy(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ms=({name:n,prefix:e,encode:t,decode:s})=>new Ny(n,e,t,s),Zi=({prefix:n,name:e,alphabet:t})=>{const{encode:s,decode:o}=Iy(t,e);return Ms({prefix:n,name:e,encode:s,decode:c=>rh(o(c))})},Ly=(n,e,t,s)=>{const o={};for(let E=0;E<e.length;++E)o[e[E]]=E;let c=n.length;for(;n[c-1]==="=";)--c;const f=new Uint8Array(c*t/8|0);let l=0,_=0,p=0;for(let E=0;E<c;++E){const T=o[n[E]];if(T===void 0)throw new SyntaxError(`Non-${s} character`);_=_<<t|T,l+=t,l>=8&&(l-=8,f[p++]=255&_>>l)}if(l>=t||255&_<<8-l)throw new SyntaxError("Unexpected end of data");return f},Fy=(n,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",f=0,l=0;for(let _=0;_<n.length;++_)for(l=l<<8|n[_],f+=8;f>t;)f-=t,c+=e[o&l>>f];if(f&&(c+=e[o&l<<t-f]),s)for(;c.length*t&7;)c+="=";return c},Jt=({name:n,prefix:e,bitsPerChar:t,alphabet:s})=>Ms({prefix:e,name:n,encode(o){return Fy(o,s,t)},decode(o){return Ly(o,s,t,n)}}),Uy=Ms({prefix:"\0",name:"identity",encode:n=>Py(n),decode:n=>Ay(n)});var $y=Object.freeze({__proto__:null,identity:Uy});const My=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var By=Object.freeze({__proto__:null,base2:My});const Hy=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var jy=Object.freeze({__proto__:null,base8:Hy});const qy=Zi({prefix:"9",name:"base10",alphabet:"0123456789"});var zy=Object.freeze({__proto__:null,base10:qy});const Ky=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Gy=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Wy=Object.freeze({__proto__:null,base16:Ky,base16upper:Gy});const Vy=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Yy=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ky=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Jy=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Xy=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Zy=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Qy=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),e1=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),t1=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var r1=Object.freeze({__proto__:null,base32:Vy,base32upper:Yy,base32pad:ky,base32padupper:Jy,base32hex:Xy,base32hexupper:Zy,base32hexpad:Qy,base32hexpadupper:e1,base32z:t1});const n1=Zi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),i1=Zi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var s1=Object.freeze({__proto__:null,base36:n1,base36upper:i1});const o1=Zi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),a1=Zi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var c1=Object.freeze({__proto__:null,base58btc:o1,base58flickr:a1});const u1=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),f1=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),h1=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),l1=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var d1=Object.freeze({__proto__:null,base64:u1,base64pad:f1,base64url:h1,base64urlpad:l1});const ih=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),p1=ih.reduce((n,e,t)=>(n[t]=e,n),[]),g1=ih.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function _1(n){return n.reduce((e,t)=>(e+=p1[t],e),"")}function y1(n){const e=[];for(const t of n){const s=g1[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const v1=Ms({prefix:"\u{1F680}",name:"base256emoji",encode:_1,decode:y1});var b1=Object.freeze({__proto__:null,base256emoji:v1}),w1=oh,sh=128,m1=127,E1=~m1,S1=Math.pow(2,31);function oh(n,e,t){e=e||[],t=t||0;for(var s=t;n>=S1;)e[t++]=n&255|sh,n/=128;for(;n&E1;)e[t++]=n&255|sh,n>>>=7;return e[t]=n|0,oh.bytes=t-s+1,e}var D1=$a,x1=128,ah=127;function $a(n,s){var t=0,s=s||0,o=0,c=s,f,l=n.length;do{if(c>=l)throw $a.bytes=0,new RangeError("Could not decode varint");f=n[c++],t+=o<28?(f&ah)<<o:(f&ah)*Math.pow(2,o),o+=7}while(f>=x1);return $a.bytes=c-s,t}var O1=Math.pow(2,7),I1=Math.pow(2,14),A1=Math.pow(2,21),P1=Math.pow(2,28),T1=Math.pow(2,35),C1=Math.pow(2,42),R1=Math.pow(2,49),N1=Math.pow(2,56),L1=Math.pow(2,63),F1=function(n){return n<O1?1:n<I1?2:n<A1?3:n<P1?4:n<T1?5:n<C1?6:n<R1?7:n<N1?8:n<L1?9:10},U1={encode:w1,decode:D1,encodingLength:F1},ch=U1;const uh=(n,e,t=0)=>(ch.encode(n,e,t),e),fh=n=>ch.encodingLength(n),Ma=(n,e)=>{const t=e.byteLength,s=fh(n),o=s+fh(t),c=new Uint8Array(o+t);return uh(n,c,0),uh(t,c,s),c.set(e,o),new $1(n,t,e,c)};class $1{constructor(e,t,s,o){this.code=e,this.size=t,this.digest=s,this.bytes=o}}const hh=({name:n,code:e,encode:t})=>new M1(n,e,t);class M1{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Ma(this.code,t):t.then(s=>Ma(this.code,s))}else throw Error("Unknown type, must be binary type")}}const lh=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),B1=hh({name:"sha2-256",code:18,encode:lh("SHA-256")}),H1=hh({name:"sha2-512",code:19,encode:lh("SHA-512")});var j1=Object.freeze({__proto__:null,sha256:B1,sha512:H1});const dh=0,q1="identity",ph=rh;var z1=Object.freeze({__proto__:null,identity:{code:dh,name:q1,encode:ph,digest:n=>Ma(dh,ph(n))}});new TextEncoder,new TextDecoder;const gh={...$y,...By,...jy,...zy,...Wy,...r1,...s1,...c1,...d1,...b1};({...j1,...z1});function _h(n,e,t,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:s}}}const yh=_h("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Ba=_h("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=th(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),vh={utf8:yh,"utf-8":yh,hex:gh.base16,latin1:Ba,ascii:Ba,binary:Ba,...gh};function ir(n,e="utf8"){const t=vh[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}function pr(n,e="utf8"){const t=vh[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Fa(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function Bs(n){return ir(pr(Xi(n),yy),Qf)}function bh(n){const e=pr(Sy,eh),t=Ey+ir(Ua([e,n]),eh);return[wy,my,t].join(by)}function K1(n){return ir(n,Qf)}function G1(n){return pr([Bs(n.header),Bs(n.payload)].join(Zf),vy)}function W1(n){return[Bs(n.header),Bs(n.payload),K1(n.signature)].join(Zf)}function wh(n=di.randomBytes(Dy)){return Ta.generateKeyPairFromSeed(n)}async function V1(n,e,t,s,o=ye.fromMiliseconds(Date.now())){const c={alg:gy,typ:_y},f=bh(s.publicKey),l=o+t,_={iss:f,sub:n,aud:e,iat:o,exp:l},p=G1({header:c,payload:_}),E=Ta.sign(s.secretKey,p);return W1({header:c,payload:_,signature:E})}var Ha={},Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});var er=Ne,ja=Er,Y1=20;function k1(n,e,t){for(var s=1634760805,o=857760878,c=2036477234,f=1797285236,l=t[3]<<24|t[2]<<16|t[1]<<8|t[0],_=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],E=t[15]<<24|t[14]<<16|t[13]<<8|t[12],T=t[19]<<24|t[18]<<16|t[17]<<8|t[16],D=t[23]<<24|t[22]<<16|t[21]<<8|t[20],C=t[27]<<24|t[26]<<16|t[25]<<8|t[24],R=t[31]<<24|t[30]<<16|t[29]<<8|t[28],q=e[3]<<24|e[2]<<16|e[1]<<8|e[0],K=e[7]<<24|e[6]<<16|e[5]<<8|e[4],se=e[11]<<24|e[10]<<16|e[9]<<8|e[8],L=e[15]<<24|e[14]<<16|e[13]<<8|e[12],M=s,x=o,P=c,m=f,u=l,b=_,V=p,k=E,ie=T,ce=D,de=C,w=R,I=q,ee=K,X=se,G=L,W=0;W<Y1;W+=2)M=M+u|0,I^=M,I=I>>>32-16|I<<16,ie=ie+I|0,u^=ie,u=u>>>32-12|u<<12,x=x+b|0,ee^=x,ee=ee>>>32-16|ee<<16,ce=ce+ee|0,b^=ce,b=b>>>32-12|b<<12,P=P+V|0,X^=P,X=X>>>32-16|X<<16,de=de+X|0,V^=de,V=V>>>32-12|V<<12,m=m+k|0,G^=m,G=G>>>32-16|G<<16,w=w+G|0,k^=w,k=k>>>32-12|k<<12,P=P+V|0,X^=P,X=X>>>32-8|X<<8,de=de+X|0,V^=de,V=V>>>32-7|V<<7,m=m+k|0,G^=m,G=G>>>32-8|G<<8,w=w+G|0,k^=w,k=k>>>32-7|k<<7,x=x+b|0,ee^=x,ee=ee>>>32-8|ee<<8,ce=ce+ee|0,b^=ce,b=b>>>32-7|b<<7,M=M+u|0,I^=M,I=I>>>32-8|I<<8,ie=ie+I|0,u^=ie,u=u>>>32-7|u<<7,M=M+b|0,G^=M,G=G>>>32-16|G<<16,de=de+G|0,b^=de,b=b>>>32-12|b<<12,x=x+V|0,I^=x,I=I>>>32-16|I<<16,w=w+I|0,V^=w,V=V>>>32-12|V<<12,P=P+k|0,ee^=P,ee=ee>>>32-16|ee<<16,ie=ie+ee|0,k^=ie,k=k>>>32-12|k<<12,m=m+u|0,X^=m,X=X>>>32-16|X<<16,ce=ce+X|0,u^=ce,u=u>>>32-12|u<<12,P=P+k|0,ee^=P,ee=ee>>>32-8|ee<<8,ie=ie+ee|0,k^=ie,k=k>>>32-7|k<<7,m=m+u|0,X^=m,X=X>>>32-8|X<<8,ce=ce+X|0,u^=ce,u=u>>>32-7|u<<7,x=x+V|0,I^=x,I=I>>>32-8|I<<8,w=w+I|0,V^=w,V=V>>>32-7|V<<7,M=M+b|0,G^=M,G=G>>>32-8|G<<8,de=de+G|0,b^=de,b=b>>>32-7|b<<7;er.writeUint32LE(M+s|0,n,0),er.writeUint32LE(x+o|0,n,4),er.writeUint32LE(P+c|0,n,8),er.writeUint32LE(m+f|0,n,12),er.writeUint32LE(u+l|0,n,16),er.writeUint32LE(b+_|0,n,20),er.writeUint32LE(V+p|0,n,24),er.writeUint32LE(k+E|0,n,28),er.writeUint32LE(ie+T|0,n,32),er.writeUint32LE(ce+D|0,n,36),er.writeUint32LE(de+C|0,n,40),er.writeUint32LE(w+R|0,n,44),er.writeUint32LE(I+q|0,n,48),er.writeUint32LE(ee+K|0,n,52),er.writeUint32LE(X+se|0,n,56),er.writeUint32LE(G+L|0,n,60)}function mh(n,e,t,s,o){if(o===void 0&&(o=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<t.length)throw new Error("ChaCha: destination is shorter than source");var c,f;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),f=c.length-e.length,c.set(e,f)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,f=o}for(var l=new Uint8Array(64),_=0;_<t.length;_+=64){k1(l,c,n);for(var p=_;p<_+64&&p<t.length;p++)s[p]=t[p]^l[p-_];X1(c,0,f)}return ja.wipe(l),o===0&&ja.wipe(c),s}Hs.streamXOR=mh;function J1(n,e,t,s){return s===void 0&&(s=0),ja.wipe(t),mh(n,e,t,t,s)}Hs.stream=J1;function X1(n,e,t){for(var s=1;t--;)s=s+(n[e]&255)|0,n[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var Eh={},wn={};Object.defineProperty(wn,"__esModule",{value:!0});function Z1(n,e,t){return~(n-1)&e|n-1&t}wn.select=Z1;function Q1(n,e){return(n|0)-(e|0)-1>>>31&1}wn.lessOrEqual=Q1;function Sh(n,e){if(n.length!==e.length)return 0;for(var t=0,s=0;s<n.length;s++)t|=n[s]^e[s];return 1&t-1>>>8}wn.compare=Sh;function ev(n,e){return n.length===0||e.length===0?!1:Sh(n,e)!==0}wn.equal=ev,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=wn,t=Er;n.DIGEST_LENGTH=16;var s=function(){function f(l){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var _=l[0]|l[1]<<8;this._r[0]=_&8191;var p=l[2]|l[3]<<8;this._r[1]=(_>>>13|p<<3)&8191;var E=l[4]|l[5]<<8;this._r[2]=(p>>>10|E<<6)&7939;var T=l[6]|l[7]<<8;this._r[3]=(E>>>7|T<<9)&8191;var D=l[8]|l[9]<<8;this._r[4]=(T>>>4|D<<12)&255,this._r[5]=D>>>1&8190;var C=l[10]|l[11]<<8;this._r[6]=(D>>>14|C<<2)&8191;var R=l[12]|l[13]<<8;this._r[7]=(C>>>11|R<<5)&8065;var q=l[14]|l[15]<<8;this._r[8]=(R>>>8|q<<8)&8191,this._r[9]=q>>>5&127,this._pad[0]=l[16]|l[17]<<8,this._pad[1]=l[18]|l[19]<<8,this._pad[2]=l[20]|l[21]<<8,this._pad[3]=l[22]|l[23]<<8,this._pad[4]=l[24]|l[25]<<8,this._pad[5]=l[26]|l[27]<<8,this._pad[6]=l[28]|l[29]<<8,this._pad[7]=l[30]|l[31]<<8}return f.prototype._blocks=function(l,_,p){for(var E=this._fin?0:2048,T=this._h[0],D=this._h[1],C=this._h[2],R=this._h[3],q=this._h[4],K=this._h[5],se=this._h[6],L=this._h[7],M=this._h[8],x=this._h[9],P=this._r[0],m=this._r[1],u=this._r[2],b=this._r[3],V=this._r[4],k=this._r[5],ie=this._r[6],ce=this._r[7],de=this._r[8],w=this._r[9];p>=16;){var I=l[_+0]|l[_+1]<<8;T+=I&8191;var ee=l[_+2]|l[_+3]<<8;D+=(I>>>13|ee<<3)&8191;var X=l[_+4]|l[_+5]<<8;C+=(ee>>>10|X<<6)&8191;var G=l[_+6]|l[_+7]<<8;R+=(X>>>7|G<<9)&8191;var W=l[_+8]|l[_+9]<<8;q+=(G>>>4|W<<12)&8191,K+=W>>>1&8191;var J=l[_+10]|l[_+11]<<8;se+=(W>>>14|J<<2)&8191;var re=l[_+12]|l[_+13]<<8;L+=(J>>>11|re<<5)&8191;var we=l[_+14]|l[_+15]<<8;M+=(re>>>8|we<<8)&8191,x+=we>>>5|E;var oe=0,me=oe;me+=T*P,me+=D*(5*w),me+=C*(5*de),me+=R*(5*ce),me+=q*(5*ie),oe=me>>>13,me&=8191,me+=K*(5*k),me+=se*(5*V),me+=L*(5*b),me+=M*(5*u),me+=x*(5*m),oe+=me>>>13,me&=8191;var he=oe;he+=T*m,he+=D*P,he+=C*(5*w),he+=R*(5*de),he+=q*(5*ce),oe=he>>>13,he&=8191,he+=K*(5*ie),he+=se*(5*k),he+=L*(5*V),he+=M*(5*b),he+=x*(5*u),oe+=he>>>13,he&=8191;var ve=oe;ve+=T*u,ve+=D*m,ve+=C*P,ve+=R*(5*w),ve+=q*(5*de),oe=ve>>>13,ve&=8191,ve+=K*(5*ce),ve+=se*(5*ie),ve+=L*(5*k),ve+=M*(5*V),ve+=x*(5*b),oe+=ve>>>13,ve&=8191;var j=oe;j+=T*b,j+=D*u,j+=C*m,j+=R*P,j+=q*(5*w),oe=j>>>13,j&=8191,j+=K*(5*de),j+=se*(5*ce),j+=L*(5*ie),j+=M*(5*k),j+=x*(5*V),oe+=j>>>13,j&=8191;var H=oe;H+=T*V,H+=D*b,H+=C*u,H+=R*m,H+=q*P,oe=H>>>13,H&=8191,H+=K*(5*w),H+=se*(5*de),H+=L*(5*ce),H+=M*(5*ie),H+=x*(5*k),oe+=H>>>13,H&=8191;var F=oe;F+=T*k,F+=D*V,F+=C*b,F+=R*u,F+=q*m,oe=F>>>13,F&=8191,F+=K*P,F+=se*(5*w),F+=L*(5*de),F+=M*(5*ce),F+=x*(5*ie),oe+=F>>>13,F&=8191;var d=oe;d+=T*ie,d+=D*k,d+=C*V,d+=R*b,d+=q*u,oe=d>>>13,d&=8191,d+=K*m,d+=se*P,d+=L*(5*w),d+=M*(5*de),d+=x*(5*ce),oe+=d>>>13,d&=8191;var A=oe;A+=T*ce,A+=D*ie,A+=C*k,A+=R*V,A+=q*b,oe=A>>>13,A&=8191,A+=K*u,A+=se*m,A+=L*P,A+=M*(5*w),A+=x*(5*de),oe+=A>>>13,A&=8191;var ae=oe;ae+=T*de,ae+=D*ce,ae+=C*ie,ae+=R*k,ae+=q*V,oe=ae>>>13,ae&=8191,ae+=K*b,ae+=se*u,ae+=L*m,ae+=M*P,ae+=x*(5*w),oe+=ae>>>13,ae&=8191;var le=oe;le+=T*w,le+=D*de,le+=C*ce,le+=R*ie,le+=q*k,oe=le>>>13,le&=8191,le+=K*V,le+=se*b,le+=L*u,le+=M*m,le+=x*P,oe+=le>>>13,le&=8191,oe=(oe<<2)+oe|0,oe=oe+me|0,me=oe&8191,oe=oe>>>13,he+=oe,T=me,D=he,C=ve,R=j,q=H,K=F,se=d,L=A,M=ae,x=le,_+=16,p-=16}this._h[0]=T,this._h[1]=D,this._h[2]=C,this._h[3]=R,this._h[4]=q,this._h[5]=K,this._h[6]=se,this._h[7]=L,this._h[8]=M,this._h[9]=x},f.prototype.finish=function(l,_){_===void 0&&(_=0);var p=new Uint16Array(10),E,T,D,C;if(this._leftover){for(C=this._leftover,this._buffer[C++]=1;C<16;C++)this._buffer[C]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(E=this._h[1]>>>13,this._h[1]&=8191,C=2;C<10;C++)this._h[C]+=E,E=this._h[C]>>>13,this._h[C]&=8191;for(this._h[0]+=E*5,E=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=E,E=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=E,p[0]=this._h[0]+5,E=p[0]>>>13,p[0]&=8191,C=1;C<10;C++)p[C]=this._h[C]+E,E=p[C]>>>13,p[C]&=8191;for(p[9]-=8192,T=(E^1)-1,C=0;C<10;C++)p[C]&=T;for(T=~T,C=0;C<10;C++)this._h[C]=this._h[C]&T|p[C];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,D=this._h[0]+this._pad[0],this._h[0]=D&65535,C=1;C<8;C++)D=(this._h[C]+this._pad[C]|0)+(D>>>16)|0,this._h[C]=D&65535;return l[_+0]=this._h[0]>>>0,l[_+1]=this._h[0]>>>8,l[_+2]=this._h[1]>>>0,l[_+3]=this._h[1]>>>8,l[_+4]=this._h[2]>>>0,l[_+5]=this._h[2]>>>8,l[_+6]=this._h[3]>>>0,l[_+7]=this._h[3]>>>8,l[_+8]=this._h[4]>>>0,l[_+9]=this._h[4]>>>8,l[_+10]=this._h[5]>>>0,l[_+11]=this._h[5]>>>8,l[_+12]=this._h[6]>>>0,l[_+13]=this._h[6]>>>8,l[_+14]=this._h[7]>>>0,l[_+15]=this._h[7]>>>8,this._finished=!0,this},f.prototype.update=function(l){var _=0,p=l.length,E;if(this._leftover){E=16-this._leftover,E>p&&(E=p);for(var T=0;T<E;T++)this._buffer[this._leftover+T]=l[_+T];if(p-=E,_+=E,this._leftover+=E,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(p>=16&&(E=p-p%16,this._blocks(l,_,E),_+=E,p-=E),p){for(var T=0;T<p;T++)this._buffer[this._leftover+T]=l[_+T];this._leftover+=p}return this},f.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var l=new Uint8Array(16);return this.finish(l),l},f.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},f}();n.Poly1305=s;function o(f,l){var _=new s(f);_.update(l);var p=_.digest();return _.clean(),p}n.oneTimeAuth=o;function c(f,l){return f.length!==n.DIGEST_LENGTH||l.length!==n.DIGEST_LENGTH?!1:e.equal(f,l)}n.equal=c}(Eh),function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Hs,t=Eh,s=Er,o=Ne,c=wn;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var f=new Uint8Array(16),l=function(){function _(p){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,p.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(p)}return _.prototype.seal=function(p,E,T,D){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var C=new Uint8Array(16);C.set(p,C.length-p.length);var R=new Uint8Array(32);e.stream(this._key,C,R,4);var q=E.length+this.tagLength,K;if(D){if(D.length!==q)throw new Error("ChaCha20Poly1305: incorrect destination length");K=D}else K=new Uint8Array(q);return e.streamXOR(this._key,C,E,K,4),this._authenticate(K.subarray(K.length-this.tagLength,K.length),R,K.subarray(0,K.length-this.tagLength),T),s.wipe(C),K},_.prototype.open=function(p,E,T,D){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(E.length<this.tagLength)return null;var C=new Uint8Array(16);C.set(p,C.length-p.length);var R=new Uint8Array(32);e.stream(this._key,C,R,4);var q=new Uint8Array(this.tagLength);if(this._authenticate(q,R,E.subarray(0,E.length-this.tagLength),T),!c.equal(q,E.subarray(E.length-this.tagLength,E.length)))return null;var K=E.length-this.tagLength,se;if(D){if(D.length!==K)throw new Error("ChaCha20Poly1305: incorrect destination length");se=D}else se=new Uint8Array(K);return e.streamXOR(this._key,C,E.subarray(0,E.length-this.tagLength),se,4),s.wipe(C),se},_.prototype.clean=function(){return s.wipe(this._key),this},_.prototype._authenticate=function(p,E,T,D){var C=new t.Poly1305(E);D&&(C.update(D),D.length%16>0&&C.update(f.subarray(D.length%16))),C.update(T),T.length%16>0&&C.update(f.subarray(T.length%16));var R=new Uint8Array(8);D&&o.writeUint64LE(D.length,R),C.update(R),o.writeUint64LE(T.length,R),C.update(R);for(var q=C.digest(),K=0;K<q.length;K++)p[K]=q[K];C.clean(),s.wipe(q),s.wipe(R)},_}();n.ChaCha20Poly1305=l}(Ha);var Dh={},Qi={},qa={};Object.defineProperty(qa,"__esModule",{value:!0});function tv(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}qa.isSerializableHash=tv,Object.defineProperty(Qi,"__esModule",{value:!0});var kr=qa,rv=wn,nv=Er,xh=function(){function n(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(s).clean():s.set(t);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),kr.isSerializableHash(this._inner)&&kr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),nv.wipe(s)}return n.prototype.reset=function(){if(!kr.isSerializableHash(this._inner)||!kr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){kr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),kr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(e){return this._inner.update(e),this},n.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},n.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},n.prototype.saveState=function(){if(!kr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(e){if(!kr.isSerializableHash(this._inner)||!kr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(e){if(!kr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},n}();Qi.HMAC=xh;function iv(n,e,t){var s=new xh(n,e);s.update(t);var o=s.digest();return s.clean(),o}Qi.hmac=iv,Qi.equal=rv.equal,Object.defineProperty(Dh,"__esModule",{value:!0});var Oh=Qi,Ih=Er,sv=function(){function n(e,t,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var c=Oh.hmac(this._hash,s,t);this._hmac=new Oh.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(e){for(var t=new Uint8Array(e),s=0;s<t.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[s]=this._buffer[this._bufpos++];return t},n.prototype.clean=function(){this._hmac.clean(),Ih.wipe(this._buffer),Ih.wipe(this._counter),this._bufpos=0},n}(),ov=Dh.HKDF=sv,js={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ne,t=Er;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var s=function(){function l(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},l.prototype.update=function(_,p){if(p===void 0&&(p=_.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var E=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&p>0;)this._buffer[this._bufferLength++]=_[E++],p--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(E=c(this._temp,this._state,_,E,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=_[E++],p--;return this},l.prototype.finish=function(_){if(!this._finished){var p=this._bytesHashed,E=this._bufferLength,T=p/536870912|0,D=p<<3,C=p%64<56?64:128;this._buffer[E]=128;for(var R=E+1;R<C-8;R++)this._buffer[R]=0;e.writeUint32BE(T,this._buffer,C-8),e.writeUint32BE(D,this._buffer,C-4),c(this._temp,this._state,this._buffer,0,C),this._finished=!0}for(var R=0;R<this.digestLength/4;R++)e.writeUint32BE(this._state[R],_,R*4);return this},l.prototype.digest=function(){var _=new Uint8Array(this.digestLength);return this.finish(_),_},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(_){return this._state.set(_.state),this._bufferLength=_.bufferLength,_.buffer&&this._buffer.set(_.buffer),this._bytesHashed=_.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(_){t.wipe(_.state),_.buffer&&t.wipe(_.buffer),_.bufferLength=0,_.bytesHashed=0},l}();n.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(l,_,p,E,T){for(;T>=64;){for(var D=_[0],C=_[1],R=_[2],q=_[3],K=_[4],se=_[5],L=_[6],M=_[7],x=0;x<16;x++){var P=E+x*4;l[x]=e.readUint32BE(p,P)}for(var x=16;x<64;x++){var m=l[x-2],u=(m>>>17|m<<32-17)^(m>>>19|m<<32-19)^m>>>10;m=l[x-15];var b=(m>>>7|m<<32-7)^(m>>>18|m<<32-18)^m>>>3;l[x]=(u+l[x-7]|0)+(b+l[x-16]|0)}for(var x=0;x<64;x++){var u=(((K>>>6|K<<26)^(K>>>11|K<<21)^(K>>>25|K<<7))+(K&se^~K&L)|0)+(M+(o[x]+l[x]|0)|0)|0,b=((D>>>2|D<<32-2)^(D>>>13|D<<32-13)^(D>>>22|D<<32-22))+(D&C^D&R^C&R)|0;M=L,L=se,se=K,K=q+u|0,q=R,R=C,C=D,D=u+b|0}_[0]+=D,_[1]+=C,_[2]+=R,_[3]+=q,_[4]+=K,_[5]+=se,_[6]+=L,_[7]+=M,E+=64,T-=64}return E}function f(l){var _=new s;_.update(l);var p=_.digest();return _.clean(),p}n.hash=f})(js);var za={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const e=di,t=Er;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function s(x){const P=new Float64Array(16);if(x)for(let m=0;m<x.length;m++)P[m]=x[m];return P}const o=new Uint8Array(32);o[0]=9;const c=s([56129,1]);function f(x){let P=1;for(let m=0;m<16;m++){let u=x[m]+P+65535;P=Math.floor(u/65536),x[m]=u-P*65536}x[0]+=P-1+37*(P-1)}function l(x,P,m){const u=~(m-1);for(let b=0;b<16;b++){const V=u&(x[b]^P[b]);x[b]^=V,P[b]^=V}}function _(x,P){const m=s(),u=s();for(let b=0;b<16;b++)u[b]=P[b];f(u),f(u),f(u);for(let b=0;b<2;b++){m[0]=u[0]-65517;for(let k=1;k<15;k++)m[k]=u[k]-65535-(m[k-1]>>16&1),m[k-1]&=65535;m[15]=u[15]-32767-(m[14]>>16&1);const V=m[15]>>16&1;m[14]&=65535,l(u,m,1-V)}for(let b=0;b<16;b++)x[2*b]=u[b]&255,x[2*b+1]=u[b]>>8}function p(x,P){for(let m=0;m<16;m++)x[m]=P[2*m]+(P[2*m+1]<<8);x[15]&=32767}function E(x,P,m){for(let u=0;u<16;u++)x[u]=P[u]+m[u]}function T(x,P,m){for(let u=0;u<16;u++)x[u]=P[u]-m[u]}function D(x,P,m){let u,b,V=0,k=0,ie=0,ce=0,de=0,w=0,I=0,ee=0,X=0,G=0,W=0,J=0,re=0,we=0,oe=0,me=0,he=0,ve=0,j=0,H=0,F=0,d=0,A=0,ae=0,le=0,xe=0,qe=0,Ge=0,$e=0,gt=0,_t=0,Be=m[0],Oe=m[1],Le=m[2],Fe=m[3],He=m[4],Ae=m[5],Ue=m[6],De=m[7],Pe=m[8],ze=m[9],Ie=m[10],We=m[11],Ye=m[12],et=m[13],tt=m[14],Xe=m[15];u=P[0],V+=u*Be,k+=u*Oe,ie+=u*Le,ce+=u*Fe,de+=u*He,w+=u*Ae,I+=u*Ue,ee+=u*De,X+=u*Pe,G+=u*ze,W+=u*Ie,J+=u*We,re+=u*Ye,we+=u*et,oe+=u*tt,me+=u*Xe,u=P[1],k+=u*Be,ie+=u*Oe,ce+=u*Le,de+=u*Fe,w+=u*He,I+=u*Ae,ee+=u*Ue,X+=u*De,G+=u*Pe,W+=u*ze,J+=u*Ie,re+=u*We,we+=u*Ye,oe+=u*et,me+=u*tt,he+=u*Xe,u=P[2],ie+=u*Be,ce+=u*Oe,de+=u*Le,w+=u*Fe,I+=u*He,ee+=u*Ae,X+=u*Ue,G+=u*De,W+=u*Pe,J+=u*ze,re+=u*Ie,we+=u*We,oe+=u*Ye,me+=u*et,he+=u*tt,ve+=u*Xe,u=P[3],ce+=u*Be,de+=u*Oe,w+=u*Le,I+=u*Fe,ee+=u*He,X+=u*Ae,G+=u*Ue,W+=u*De,J+=u*Pe,re+=u*ze,we+=u*Ie,oe+=u*We,me+=u*Ye,he+=u*et,ve+=u*tt,j+=u*Xe,u=P[4],de+=u*Be,w+=u*Oe,I+=u*Le,ee+=u*Fe,X+=u*He,G+=u*Ae,W+=u*Ue,J+=u*De,re+=u*Pe,we+=u*ze,oe+=u*Ie,me+=u*We,he+=u*Ye,ve+=u*et,j+=u*tt,H+=u*Xe,u=P[5],w+=u*Be,I+=u*Oe,ee+=u*Le,X+=u*Fe,G+=u*He,W+=u*Ae,J+=u*Ue,re+=u*De,we+=u*Pe,oe+=u*ze,me+=u*Ie,he+=u*We,ve+=u*Ye,j+=u*et,H+=u*tt,F+=u*Xe,u=P[6],I+=u*Be,ee+=u*Oe,X+=u*Le,G+=u*Fe,W+=u*He,J+=u*Ae,re+=u*Ue,we+=u*De,oe+=u*Pe,me+=u*ze,he+=u*Ie,ve+=u*We,j+=u*Ye,H+=u*et,F+=u*tt,d+=u*Xe,u=P[7],ee+=u*Be,X+=u*Oe,G+=u*Le,W+=u*Fe,J+=u*He,re+=u*Ae,we+=u*Ue,oe+=u*De,me+=u*Pe,he+=u*ze,ve+=u*Ie,j+=u*We,H+=u*Ye,F+=u*et,d+=u*tt,A+=u*Xe,u=P[8],X+=u*Be,G+=u*Oe,W+=u*Le,J+=u*Fe,re+=u*He,we+=u*Ae,oe+=u*Ue,me+=u*De,he+=u*Pe,ve+=u*ze,j+=u*Ie,H+=u*We,F+=u*Ye,d+=u*et,A+=u*tt,ae+=u*Xe,u=P[9],G+=u*Be,W+=u*Oe,J+=u*Le,re+=u*Fe,we+=u*He,oe+=u*Ae,me+=u*Ue,he+=u*De,ve+=u*Pe,j+=u*ze,H+=u*Ie,F+=u*We,d+=u*Ye,A+=u*et,ae+=u*tt,le+=u*Xe,u=P[10],W+=u*Be,J+=u*Oe,re+=u*Le,we+=u*Fe,oe+=u*He,me+=u*Ae,he+=u*Ue,ve+=u*De,j+=u*Pe,H+=u*ze,F+=u*Ie,d+=u*We,A+=u*Ye,ae+=u*et,le+=u*tt,xe+=u*Xe,u=P[11],J+=u*Be,re+=u*Oe,we+=u*Le,oe+=u*Fe,me+=u*He,he+=u*Ae,ve+=u*Ue,j+=u*De,H+=u*Pe,F+=u*ze,d+=u*Ie,A+=u*We,ae+=u*Ye,le+=u*et,xe+=u*tt,qe+=u*Xe,u=P[12],re+=u*Be,we+=u*Oe,oe+=u*Le,me+=u*Fe,he+=u*He,ve+=u*Ae,j+=u*Ue,H+=u*De,F+=u*Pe,d+=u*ze,A+=u*Ie,ae+=u*We,le+=u*Ye,xe+=u*et,qe+=u*tt,Ge+=u*Xe,u=P[13],we+=u*Be,oe+=u*Oe,me+=u*Le,he+=u*Fe,ve+=u*He,j+=u*Ae,H+=u*Ue,F+=u*De,d+=u*Pe,A+=u*ze,ae+=u*Ie,le+=u*We,xe+=u*Ye,qe+=u*et,Ge+=u*tt,$e+=u*Xe,u=P[14],oe+=u*Be,me+=u*Oe,he+=u*Le,ve+=u*Fe,j+=u*He,H+=u*Ae,F+=u*Ue,d+=u*De,A+=u*Pe,ae+=u*ze,le+=u*Ie,xe+=u*We,qe+=u*Ye,Ge+=u*et,$e+=u*tt,gt+=u*Xe,u=P[15],me+=u*Be,he+=u*Oe,ve+=u*Le,j+=u*Fe,H+=u*He,F+=u*Ae,d+=u*Ue,A+=u*De,ae+=u*Pe,le+=u*ze,xe+=u*Ie,qe+=u*We,Ge+=u*Ye,$e+=u*et,gt+=u*tt,_t+=u*Xe,V+=38*he,k+=38*ve,ie+=38*j,ce+=38*H,de+=38*F,w+=38*d,I+=38*A,ee+=38*ae,X+=38*le,G+=38*xe,W+=38*qe,J+=38*Ge,re+=38*$e,we+=38*gt,oe+=38*_t,b=1,u=V+b+65535,b=Math.floor(u/65536),V=u-b*65536,u=k+b+65535,b=Math.floor(u/65536),k=u-b*65536,u=ie+b+65535,b=Math.floor(u/65536),ie=u-b*65536,u=ce+b+65535,b=Math.floor(u/65536),ce=u-b*65536,u=de+b+65535,b=Math.floor(u/65536),de=u-b*65536,u=w+b+65535,b=Math.floor(u/65536),w=u-b*65536,u=I+b+65535,b=Math.floor(u/65536),I=u-b*65536,u=ee+b+65535,b=Math.floor(u/65536),ee=u-b*65536,u=X+b+65535,b=Math.floor(u/65536),X=u-b*65536,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=W+b+65535,b=Math.floor(u/65536),W=u-b*65536,u=J+b+65535,b=Math.floor(u/65536),J=u-b*65536,u=re+b+65535,b=Math.floor(u/65536),re=u-b*65536,u=we+b+65535,b=Math.floor(u/65536),we=u-b*65536,u=oe+b+65535,b=Math.floor(u/65536),oe=u-b*65536,u=me+b+65535,b=Math.floor(u/65536),me=u-b*65536,V+=b-1+37*(b-1),b=1,u=V+b+65535,b=Math.floor(u/65536),V=u-b*65536,u=k+b+65535,b=Math.floor(u/65536),k=u-b*65536,u=ie+b+65535,b=Math.floor(u/65536),ie=u-b*65536,u=ce+b+65535,b=Math.floor(u/65536),ce=u-b*65536,u=de+b+65535,b=Math.floor(u/65536),de=u-b*65536,u=w+b+65535,b=Math.floor(u/65536),w=u-b*65536,u=I+b+65535,b=Math.floor(u/65536),I=u-b*65536,u=ee+b+65535,b=Math.floor(u/65536),ee=u-b*65536,u=X+b+65535,b=Math.floor(u/65536),X=u-b*65536,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=W+b+65535,b=Math.floor(u/65536),W=u-b*65536,u=J+b+65535,b=Math.floor(u/65536),J=u-b*65536,u=re+b+65535,b=Math.floor(u/65536),re=u-b*65536,u=we+b+65535,b=Math.floor(u/65536),we=u-b*65536,u=oe+b+65535,b=Math.floor(u/65536),oe=u-b*65536,u=me+b+65535,b=Math.floor(u/65536),me=u-b*65536,V+=b-1+37*(b-1),x[0]=V,x[1]=k,x[2]=ie,x[3]=ce,x[4]=de,x[5]=w,x[6]=I,x[7]=ee,x[8]=X,x[9]=G,x[10]=W,x[11]=J,x[12]=re,x[13]=we,x[14]=oe,x[15]=me}function C(x,P){D(x,P,P)}function R(x,P){const m=s();for(let u=0;u<16;u++)m[u]=P[u];for(let u=253;u>=0;u--)C(m,m),u!==2&&u!==4&&D(m,m,P);for(let u=0;u<16;u++)x[u]=m[u]}function q(x,P){const m=new Uint8Array(32),u=new Float64Array(80),b=s(),V=s(),k=s(),ie=s(),ce=s(),de=s();for(let X=0;X<31;X++)m[X]=x[X];m[31]=x[31]&127|64,m[0]&=248,p(u,P);for(let X=0;X<16;X++)V[X]=u[X];b[0]=ie[0]=1;for(let X=254;X>=0;--X){const G=m[X>>>3]>>>(X&7)&1;l(b,V,G),l(k,ie,G),E(ce,b,k),T(b,b,k),E(k,V,ie),T(V,V,ie),C(ie,ce),C(de,b),D(b,k,b),D(k,V,ce),E(ce,b,k),T(b,b,k),C(V,b),T(k,ie,de),D(b,k,c),E(b,b,ie),D(k,k,b),D(b,ie,de),D(ie,V,u),C(V,ce),l(b,V,G),l(k,ie,G)}for(let X=0;X<16;X++)u[X+16]=b[X],u[X+32]=k[X],u[X+48]=V[X],u[X+64]=ie[X];const w=u.subarray(32),I=u.subarray(16);R(w,w),D(I,I,w);const ee=new Uint8Array(32);return _(ee,I),ee}n.scalarMult=q;function K(x){return q(x,o)}n.scalarMultBase=K;function se(x){if(x.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const P=new Uint8Array(x);return{publicKey:K(P),secretKey:P}}n.generateKeyPairFromSeed=se;function L(x){const P=(0,e.randomBytes)(32,x),m=se(P);return(0,t.wipe)(P),m}n.generateKeyPair=L;function M(x,P,m=!1){if(x.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(P.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=q(x,P);if(m){let b=0;for(let V=0;V<u.length;V++)b|=u[V];if(b===0)throw new Error("X25519: invalid shared key")}return u}n.sharedKey=M})(za);var Ah=function(n,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,c;s<o;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return n.concat(c||Array.prototype.slice.call(e))},av=function(){function n(e,t,s){this.name=e,this.version=t,this.os=s,this.type="browser"}return n}(),cv=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),uv=function(){function n(e,t,s,o){this.name=e,this.version=t,this.os=s,this.bot=o,this.type="bot-device"}return n}(),fv=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),hv=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),lv=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,dv=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ph=3,pv=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",lv]],Th=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function gv(n){return n?Ch(n):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new hv:typeof navigator<"u"?Ch(navigator.userAgent):vv()}function _v(n){return n!==""&&pv.reduce(function(e,t){var s=t[0],o=t[1];if(e)return e;var c=o.exec(n);return!!c&&[s,c]},!1)}function Ch(n){var e=_v(n);if(!e)return null;var t=e[0],s=e[1];if(t==="searchbot")return new fv;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<Ph&&(o=Ah(Ah([],o,!0),bv(Ph-o.length),!0)):o=[];var c=o.join("."),f=yv(n),l=dv.exec(n);return l&&l[1]?new uv(t,c,f,l[1]):new av(t,c,f)}function yv(n){for(var e=0,t=Th.length;e<t;e++){var s=Th[e],o=s[0],c=s[1],f=c.exec(n);if(f)return o}return null}function vv(){var n=typeof process<"u"&&process.version;return n?new cv(process.version.slice(1)):null}function bv(n){for(var e=[],t=0;t<n;t++)e.push("0");return e}var ht={};Object.defineProperty(ht,"__esModule",{value:!0}),ht.getLocalStorage=ht.getLocalStorageOrThrow=ht.getCrypto=ht.getCryptoOrThrow=Nh=ht.getLocation=ht.getLocationOrThrow=Ka=ht.getNavigator=ht.getNavigatorOrThrow=Rh=ht.getDocument=ht.getDocumentOrThrow=ht.getFromWindowOrThrow=ht.getFromWindow=void 0;function Kn(n){let e;return typeof window<"u"&&typeof window[n]<"u"&&(e=window[n]),e}ht.getFromWindow=Kn;function pi(n){const e=Kn(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}ht.getFromWindowOrThrow=pi;function wv(){return pi("document")}ht.getDocumentOrThrow=wv;function mv(){return Kn("document")}var Rh=ht.getDocument=mv;function Ev(){return pi("navigator")}ht.getNavigatorOrThrow=Ev;function Sv(){return Kn("navigator")}var Ka=ht.getNavigator=Sv;function Dv(){return pi("location")}ht.getLocationOrThrow=Dv;function xv(){return Kn("location")}var Nh=ht.getLocation=xv;function Ov(){return pi("crypto")}ht.getCryptoOrThrow=Ov;function Iv(){return Kn("crypto")}ht.getCrypto=Iv;function Av(){return pi("localStorage")}ht.getLocalStorageOrThrow=Av;function Pv(){return Kn("localStorage")}ht.getLocalStorage=Pv;var Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});var Lh=Ga.getWindowMetadata=void 0;const Fh=ht;function Tv(){let n,e;try{n=Fh.getDocumentOrThrow(),e=Fh.getLocationOrThrow()}catch{return null}function t(){const T=n.getElementsByTagName("link"),D=[];for(let C=0;C<T.length;C++){const R=T[C],q=R.getAttribute("rel");if(q&&q.toLowerCase().indexOf("icon")>-1){const K=R.getAttribute("href");if(K)if(K.toLowerCase().indexOf("https:")===-1&&K.toLowerCase().indexOf("http:")===-1&&K.indexOf("//")!==0){let se=e.protocol+"//"+e.host;if(K.indexOf("/")===0)se+=K;else{const L=e.pathname.split("/");L.pop();const M=L.join("/");se+=M+"/"+K}D.push(se)}else if(K.indexOf("//")===0){const se=e.protocol+K;D.push(se)}else D.push(K)}}return D}function s(...T){const D=n.getElementsByTagName("meta");for(let C=0;C<D.length;C++){const R=D[C],q=["itemprop","property","name"].map(K=>R.getAttribute(K)).filter(K=>K?T.includes(K):!1);if(q.length&&q){const K=R.getAttribute("content");if(K)return K}}return""}function o(){let T=s("name","og:site_name","og:title","twitter:title");return T||(T=n.title),T}function c(){return s("description","og:description","twitter:description","keywords")}const f=o(),l=c(),_=e.origin,p=t();return{description:l,url:_,icons:p,name:f}}Lh=Ga.getWindowMetadata=Tv;var es={},Cv=n=>encodeURIComponent(n).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Uh="%[a-f0-9]{2}",$h=new RegExp("("+Uh+")|([^%]+?)","gi"),Mh=new RegExp("("+Uh+")+","gi");function Wa(n,e){try{return[decodeURIComponent(n.join(""))]}catch{}if(n.length===1)return n;e=e||1;var t=n.slice(0,e),s=n.slice(e);return Array.prototype.concat.call([],Wa(t),Wa(s))}function Rv(n){try{return decodeURIComponent(n)}catch{for(var e=n.match($h)||[],t=1;t<e.length;t++)n=Wa(e,t).join(""),e=n.match($h)||[];return n}}function Nv(n){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},t=Mh.exec(n);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var s=Rv(t[0]);s!==t[0]&&(e[t[0]]=s)}t=Mh.exec(n)}e["%C2"]="\uFFFD";for(var o=Object.keys(e),c=0;c<o.length;c++){var f=o[c];n=n.replace(new RegExp(f,"g"),e[f])}return n}var Lv=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return Nv(n)}},Fv=(n,e)=>{if(!(typeof n=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[n];const t=n.indexOf(e);return t===-1?[n]:[n.slice(0,t),n.slice(t+e.length)]},Uv=function(n,e){for(var t={},s=Object.keys(n),o=Array.isArray(e),c=0;c<s.length;c++){var f=s[c],l=n[f];(o?e.indexOf(f)!==-1:e(f,l,n))&&(t[f]=l)}return t};(function(n){const e=Cv,t=Lv,s=Fv,o=Uv,c=L=>L==null,f=Symbol("encodeFragmentIdentifier");function l(L){switch(L.arrayFormat){case"index":return M=>(x,P)=>{const m=x.length;return P===void 0||L.skipNull&&P===null||L.skipEmptyString&&P===""?x:P===null?[...x,[E(M,L),"[",m,"]"].join("")]:[...x,[E(M,L),"[",E(m,L),"]=",E(P,L)].join("")]};case"bracket":return M=>(x,P)=>P===void 0||L.skipNull&&P===null||L.skipEmptyString&&P===""?x:P===null?[...x,[E(M,L),"[]"].join("")]:[...x,[E(M,L),"[]=",E(P,L)].join("")];case"colon-list-separator":return M=>(x,P)=>P===void 0||L.skipNull&&P===null||L.skipEmptyString&&P===""?x:P===null?[...x,[E(M,L),":list="].join("")]:[...x,[E(M,L),":list=",E(P,L)].join("")];case"comma":case"separator":case"bracket-separator":{const M=L.arrayFormat==="bracket-separator"?"[]=":"=";return x=>(P,m)=>m===void 0||L.skipNull&&m===null||L.skipEmptyString&&m===""?P:(m=m===null?"":m,P.length===0?[[E(x,L),M,E(m,L)].join("")]:[[P,E(m,L)].join(L.arrayFormatSeparator)])}default:return M=>(x,P)=>P===void 0||L.skipNull&&P===null||L.skipEmptyString&&P===""?x:P===null?[...x,E(M,L)]:[...x,[E(M,L),"=",E(P,L)].join("")]}}function _(L){let M;switch(L.arrayFormat){case"index":return(x,P,m)=>{if(M=/\[(\d*)\]$/.exec(x),x=x.replace(/\[\d*\]$/,""),!M){m[x]=P;return}m[x]===void 0&&(m[x]={}),m[x][M[1]]=P};case"bracket":return(x,P,m)=>{if(M=/(\[\])$/.exec(x),x=x.replace(/\[\]$/,""),!M){m[x]=P;return}if(m[x]===void 0){m[x]=[P];return}m[x]=[].concat(m[x],P)};case"colon-list-separator":return(x,P,m)=>{if(M=/(:list)$/.exec(x),x=x.replace(/:list$/,""),!M){m[x]=P;return}if(m[x]===void 0){m[x]=[P];return}m[x]=[].concat(m[x],P)};case"comma":case"separator":return(x,P,m)=>{const u=typeof P=="string"&&P.includes(L.arrayFormatSeparator),b=typeof P=="string"&&!u&&T(P,L).includes(L.arrayFormatSeparator);P=b?T(P,L):P;const V=u||b?P.split(L.arrayFormatSeparator).map(k=>T(k,L)):P===null?P:T(P,L);m[x]=V};case"bracket-separator":return(x,P,m)=>{const u=/(\[\])$/.test(x);if(x=x.replace(/\[\]$/,""),!u){m[x]=P&&T(P,L);return}const b=P===null?[]:P.split(L.arrayFormatSeparator).map(V=>T(V,L));if(m[x]===void 0){m[x]=b;return}m[x]=[].concat(m[x],b)};default:return(x,P,m)=>{if(m[x]===void 0){m[x]=P;return}m[x]=[].concat(m[x],P)}}}function p(L){if(typeof L!="string"||L.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function E(L,M){return M.encode?M.strict?e(L):encodeURIComponent(L):L}function T(L,M){return M.decode?t(L):L}function D(L){return Array.isArray(L)?L.sort():typeof L=="object"?D(Object.keys(L)).sort((M,x)=>Number(M)-Number(x)).map(M=>L[M]):L}function C(L){const M=L.indexOf("#");return M!==-1&&(L=L.slice(0,M)),L}function R(L){let M="";const x=L.indexOf("#");return x!==-1&&(M=L.slice(x)),M}function q(L){L=C(L);const M=L.indexOf("?");return M===-1?"":L.slice(M+1)}function K(L,M){return M.parseNumbers&&!Number.isNaN(Number(L))&&typeof L=="string"&&L.trim()!==""?L=Number(L):M.parseBooleans&&L!==null&&(L.toLowerCase()==="true"||L.toLowerCase()==="false")&&(L=L.toLowerCase()==="true"),L}function se(L,M){M=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},M),p(M.arrayFormatSeparator);const x=_(M),P=Object.create(null);if(typeof L!="string"||(L=L.trim().replace(/^[?#&]/,""),!L))return P;for(const m of L.split("&")){if(m==="")continue;let[u,b]=s(M.decode?m.replace(/\+/g," "):m,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(M.arrayFormat)?b:T(b,M),x(T(u,M),b,P)}for(const m of Object.keys(P)){const u=P[m];if(typeof u=="object"&&u!==null)for(const b of Object.keys(u))u[b]=K(u[b],M);else P[m]=K(u,M)}return M.sort===!1?P:(M.sort===!0?Object.keys(P).sort():Object.keys(P).sort(M.sort)).reduce((m,u)=>{const b=P[u];return b&&typeof b=="object"&&!Array.isArray(b)?m[u]=D(b):m[u]=b,m},Object.create(null))}n.extract=q,n.parse=se,n.stringify=(L,M)=>{if(!L)return"";M=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},M),p(M.arrayFormatSeparator);const x=b=>M.skipNull&&c(L[b])||M.skipEmptyString&&L[b]==="",P=l(M),m={};for(const b of Object.keys(L))x(b)||(m[b]=L[b]);const u=Object.keys(m);return M.sort!==!1&&u.sort(M.sort),u.map(b=>{const V=L[b];return V===void 0?"":V===null?E(b,M):Array.isArray(V)?V.length===0&&M.arrayFormat==="bracket-separator"?E(b,M)+"[]":V.reduce(P(b),[]).join("&"):E(b,M)+"="+E(V,M)}).filter(b=>b.length>0).join("&")},n.parseUrl=(L,M)=>{M=Object.assign({decode:!0},M);const[x,P]=s(L,"#");return Object.assign({url:x.split("?")[0]||"",query:se(q(L),M)},M&&M.parseFragmentIdentifier&&P?{fragmentIdentifier:T(P,M)}:{})},n.stringifyUrl=(L,M)=>{M=Object.assign({encode:!0,strict:!0,[f]:!0},M);const x=C(L.url).split("?")[0]||"",P=n.extract(L.url),m=n.parse(P,{sort:!1}),u=Object.assign(m,L.query);let b=n.stringify(u,M);b&&(b=`?${b}`);let V=R(L.url);return L.fragmentIdentifier&&(V=`#${M[f]?E(L.fragmentIdentifier,M):L.fragmentIdentifier}`),`${x}${b}${V}`},n.pick=(L,M,x)=>{x=Object.assign({parseFragmentIdentifier:!0,[f]:!1},x);const{url:P,query:m,fragmentIdentifier:u}=n.parseUrl(L,x);return n.stringifyUrl({url:P,query:o(m,M),fragmentIdentifier:u},x)},n.exclude=(L,M,x)=>{const P=Array.isArray(M)?m=>!M.includes(m):(m,u)=>!M(m,u);return n.pick(L,P,x)}})(es);const $v={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Bh(n,e){return n.includes(":")?[n]:e.chains||[]}const Hh="base10",sr="base16",Va="base64pad",Ya="utf8",jh=0,Gn=1,Mv=0,qh=1,ka=12,Ja=32;function Bv(){const n=za.generateKeyPair();return{privateKey:ir(n.secretKey,sr),publicKey:ir(n.publicKey,sr)}}function Xa(){const n=di.randomBytes(Ja);return ir(n,sr)}function Hv(n,e){const t=za.sharedKey(pr(n,sr),pr(e,sr)),s=new ov(js.SHA256,t).expand(Ja);return ir(s,sr)}function jv(n){const e=js.hash(pr(n,sr));return ir(e,sr)}function gi(n){const e=js.hash(pr(n,Ya));return ir(e,sr)}function qv(n){return pr(`${n}`,Hh)}function ts(n){return Number(ir(n,Hh))}function zv(n){const e=qv(typeof n.type<"u"?n.type:jh);if(ts(e)===Gn&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?pr(n.senderPublicKey,sr):void 0,s=typeof n.iv<"u"?pr(n.iv,sr):di.randomBytes(ka),o=new Ha.ChaCha20Poly1305(pr(n.symKey,sr)).seal(s,pr(n.message,Ya));return Gv({type:e,sealed:o,iv:s,senderPublicKey:t})}function Kv(n){const e=new Ha.ChaCha20Poly1305(pr(n.symKey,sr)),{sealed:t,iv:s}=qs(n.encoded),o=e.open(s,t);if(o===null)throw new Error("Failed to decrypt");return ir(o,Ya)}function Gv(n){if(ts(n.type)===Gn){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ir(Ua([n.type,n.senderPublicKey,n.iv,n.sealed]),Va)}return ir(Ua([n.type,n.iv,n.sealed]),Va)}function qs(n){const e=pr(n,Va),t=e.slice(Mv,qh),s=qh;if(ts(t)===Gn){const l=s+Ja,_=l+ka,p=e.slice(s,l),E=e.slice(l,_),T=e.slice(_);return{type:t,sealed:T,iv:E,senderPublicKey:p}}const o=s+ka,c=e.slice(s,o),f=e.slice(o);return{type:t,sealed:f,iv:c}}function Wv(n,e){const t=qs(n);return zh({type:ts(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?ir(t.senderPublicKey,sr):void 0,receiverPublicKey:e?.receiverPublicKey})}function zh(n){const e=n?.type||jh;if(e===Gn){if(typeof n?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof n?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n?.senderPublicKey,receiverPublicKey:n?.receiverPublicKey}}function Kh(n){return n.type===Gn&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var Vv=Object.defineProperty,Gh=Object.getOwnPropertySymbols,Yv=Object.prototype.hasOwnProperty,kv=Object.prototype.propertyIsEnumerable,Wh=(n,e,t)=>e in n?Vv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Vh=(n,e)=>{for(var t in e||(e={}))Yv.call(e,t)&&Wh(n,t,e[t]);if(Gh)for(var t of Gh(e))kv.call(e,t)&&Wh(n,t,e[t]);return n};const Jv="ReactNative",mn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Xv="js";function Za(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Yh(){return!Rh()&&!!Ka()&&navigator.product===Jv}function Qa(){return!Za()&&!!Ka()}function ec(){return Yh()?mn.reactNative:Za()?mn.node:Qa()?mn.browser:mn.unknown}function Zv(n,e){let t=es.parse(n);return t=Vh(Vh({},t),e),n=es.stringify(t),n}function Qv(){return Lh()||{name:"",description:"",url:"",icons:[""]}}function eb(){if(ec()===mn.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:s}=global.Platform;return[t,s].join("-")}const n=gv();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function tb(){var n;const e=ec();return e===mn.browser?[e,((n=Nh())==null?void 0:n.host)||"unknown"].join(":"):e}function rb(n,e,t){const s=eb(),o=tb();return[[n,e].join("-"),[Xv,t].join("-"),s,o].join("/")}function nb({protocol:n,version:e,relayUrl:t,sdkVersion:s,auth:o,projectId:c,useOnCloseEvent:f}){const l=t.split("?"),_=rb(n,e,s),p={auth:o,ua:_,projectId:c,useOnCloseEvent:f||void 0},E=Zv(l[1]||"",p);return l[0]+"?"+E}function Wn(n,e){return n.filter(t=>e.includes(t)).length===n.length}function kh(n){return Object.fromEntries(n.entries())}function Jh(n){return new Map(Object.entries(n))}function _i(n=ye.FIVE_MINUTES,e){const t=ye.toMiliseconds(n||ye.FIVE_MINUTES);let s,o,c;return{resolve:f=>{c&&s&&(clearTimeout(c),s(f))},reject:f=>{c&&o&&(clearTimeout(c),o(f))},done:()=>new Promise((f,l)=>{c=setTimeout(()=>{l(new Error(e))},t),s=f,o=l})}}function zs(n,e,t){return new Promise(async(s,o)=>{const c=setTimeout(()=>o(new Error(t)),e);try{const f=await n;s(f)}catch(f){o(f)}clearTimeout(c)})}function Xh(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function ib(n){return Xh("topic",n)}function sb(n){return Xh("id",n)}function Zh(n){const[e,t]=n.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")s.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))s.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return s}function jr(n,e){return ye.fromMiliseconds((e||Date.now())+ye.toMiliseconds(n))}function En(n){return Date.now()>=ye.toMiliseconds(n)}function Ut(n,e){return`${n}${e?`:${e}`:""}`}function tc(n=[],e=[]){return[...new Set([...n,...e])]}async function ob({id:n,topic:e,wcDeepLink:t}){try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t;let o=s?.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${n}&sessionTopic=${e}`,f=ec();f===mn.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):f===mn.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(s){console.error(s)}}const ab="irn";function rc(n){return n?.relay||{protocol:ab}}function Ks(n){const e=$v[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var cb=Object.defineProperty,Qh=Object.getOwnPropertySymbols,ub=Object.prototype.hasOwnProperty,fb=Object.prototype.propertyIsEnumerable,el=(n,e,t)=>e in n?cb(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hb=(n,e)=>{for(var t in e||(e={}))ub.call(e,t)&&el(n,t,e[t]);if(Qh)for(var t of Qh(e))fb.call(e,t)&&el(n,t,e[t]);return n};function lb(n,e="-"){const t={},s="relay"+e;return Object.keys(n).forEach(o=>{if(o.startsWith(s)){const c=o.replace(s,""),f=n[o];t[c]=f}}),t}function db(n){const e=n.indexOf(":"),t=n.indexOf("?")!==-1?n.indexOf("?"):void 0,s=n.substring(0,e),o=n.substring(e+1,t).split("@"),c=typeof t<"u"?n.substring(t):"",f=es.parse(c);return{protocol:s,topic:pb(o[0]),version:parseInt(o[1],10),symKey:f.symKey,relay:lb(f)}}function pb(n){return n.startsWith("//")?n.substring(2):n}function gb(n,e="-"){const t="relay",s={};return Object.keys(n).forEach(o=>{const c=t+e+o;n[o]&&(s[c]=n[o])}),s}function _b(n){return`${n.protocol}:${n.topic}@${n.version}?`+es.stringify(hb({symKey:n.symKey},gb(n.relay)))}function yi(n){const e=[];return n.forEach(t=>{const[s,o]=t.split(":");e.push(`${s}:${o}`)}),e}function yb(n){const e=[];return Object.values(n).forEach(t=>{e.push(...yi(t.accounts))}),e}function vb(n,e){const t=[];return Object.values(n).forEach(s=>{yi(s.accounts).includes(e)&&t.push(...s.methods)}),t}function bb(n,e){const t=[];return Object.values(n).forEach(s=>{yi(s.accounts).includes(e)&&t.push(...s.events)}),t}function wb(n,e){const t=Vs(n,e);if(t)throw new Error(t.message);const s={};for(const[o,c]of Object.entries(n))s[o]={methods:c.methods,events:c.events,chains:c.accounts.map(f=>`${f.split(":")[0]}:${f.split(":")[1]}`)};return s}function nc(n){return n.includes(":")}function Gs(n){return nc(n)?n.split(":")[0]:n}const mb={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Eb={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function fe(n,e){const{message:t,code:s}=Eb[n];return{message:e?`${t} ${e}`:t,code:s}}function $t(n,e){const{message:t,code:s}=mb[n];return{message:e?`${t} ${e}`:t,code:s}}function Vn(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}function vi(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function or(n){return typeof n>"u"}function Vt(n,e){return e&&or(n)?!0:typeof n=="string"&&!!n.trim().length}function ic(n,e){return e&&or(n)?!0:typeof n=="number"&&!isNaN(n)}function Sb(n,e){const{requiredNamespaces:t}=e,s=Object.keys(n.namespaces),o=Object.keys(t);let c=!0;return Wn(o,s)?(s.forEach(f=>{const{accounts:l,methods:_,events:p}=n.namespaces[f],E=yi(l),T=t[f];(!Wn(Bh(f,T),E)||!Wn(T.methods,_)||!Wn(T.events,p))&&(c=!1)}),c):!1}function Ws(n){return Vt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function Db(n){if(Vt(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Ws(t)}}return!1}function xb(n){if(Vt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function Ob(n){var e;return(e=n?.proposer)==null?void 0:e.publicKey}function Ib(n){return n?.topic}function Ab(n,e){let t=null;return Vt(n?.publicKey,!1)||(t=fe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function tl(n){let e=!0;return Vn(n)?n.length&&(e=n.every(t=>Vt(t,!1))):e=!1,e}function Pb(n,e,t){let s=null;return Vn(e)&&e.length?e.forEach(o=>{s||Ws(o)||(s=$t("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):Ws(n)||(s=$t("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function Tb(n,e,t){let s=null;return Object.entries(n).forEach(([o,c])=>{if(s)return;const f=Pb(o,Bh(o,c),`${e} ${t}`);f&&(s=f)}),s}function Cb(n,e){let t=null;return Vn(n)?n.forEach(s=>{t||Db(s)||(t=$t("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):t=$t("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function Rb(n,e){let t=null;return Object.values(n).forEach(s=>{if(t)return;const o=Cb(s?.accounts,`${e} namespace`);o&&(t=o)}),t}function Nb(n,e){let t=null;return tl(n?.methods)?tl(n?.events)||(t=$t("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=$t("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function rl(n,e){let t=null;return Object.values(n).forEach(s=>{if(t)return;const o=Nb(s,`${e}, namespace`);o&&(t=o)}),t}function Lb(n,e,t){let s=null;if(n&&vi(n)){const o=rl(n,e);o&&(s=o);const c=Tb(n,e,t);c&&(s=c)}else s=fe("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return s}function Vs(n,e){let t=null;if(n&&vi(n)){const s=rl(n,e);s&&(t=s);const o=Rb(n,e);o&&(t=o)}else t=fe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function nl(n){return Vt(n.protocol,!0)}function Fb(n,e){let t=!1;return e&&!n?t=!0:n&&Vn(n)&&n.length&&n.forEach(s=>{t=nl(s)}),t}function Ub(n){return typeof n=="number"}function gr(n){return typeof n<"u"&&typeof n!==null}function $b(n){return!(!n||typeof n!="object"||!n.code||!ic(n.code,!1)||!n.message||!Vt(n.message,!1))}function Mb(n){return!(or(n)||!Vt(n.method,!1))}function Bb(n){return!(or(n)||or(n.result)&&or(n.error)||!ic(n.id,!1)||!Vt(n.jsonrpc,!1))}function Hb(n){return!(or(n)||!Vt(n.name,!1))}function il(n,e){return!(!Ws(e)||!yb(n).includes(e))}function jb(n,e,t){return Vt(t,!1)?vb(n,e).includes(t):!1}function qb(n,e,t){return Vt(t,!1)?bb(n,e).includes(t):!1}function sl(n,e,t){let s=null;const o=zb(n),c=Kb(e),f=Object.keys(o),l=Object.keys(c),_=ol(Object.keys(n)),p=ol(Object.keys(e)),E=_.filter(T=>!p.includes(T));return E.length&&(s=fe("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${E.toString()}
      Received: ${Object.keys(e).toString()}`)),Wn(f,l)||(s=fe("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${f.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(T=>{if(!T.includes(":")||s)return;const D=yi(e[T].accounts);D.includes(T)||(s=fe("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${T}
        Required: ${T}
        Approved: ${D.toString()}`))}),f.forEach(T=>{s||(Wn(o[T].methods,c[T].methods)?Wn(o[T].events,c[T].events)||(s=fe("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${T}`)):s=fe("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${T}`))}),s}function zb(n){const e={};return Object.keys(n).forEach(t=>{var s;t.includes(":")?e[t]=n[t]:(s=n[t].chains)==null||s.forEach(o=>{e[o]={methods:n[t].methods,events:n[t].events}})}),e}function ol(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Kb(n){const e={};return Object.keys(n).forEach(t=>{if(t.includes(":"))e[t]=n[t];else{const s=yi(n[t].accounts);s?.forEach(o=>{e[o]={accounts:n[t].accounts.filter(c=>c.includes(`${o}:`)),methods:n[t].methods,events:n[t].events}})}}),e}function Gb(n,e){return ic(n,!1)&&n<=e.max&&n>=e.min}const Wb="PARSE_ERROR",Vb="INVALID_REQUEST",Yb="METHOD_NOT_FOUND",kb="INVALID_PARAMS",al="INTERNAL_ERROR",sc="SERVER_ERROR",Jb=[-32700,-32600,-32601,-32602,-32603],rs={[Wb]:{code:-32700,message:"Parse error"},[Vb]:{code:-32600,message:"Invalid Request"},[Yb]:{code:-32601,message:"Method not found"},[kb]:{code:-32602,message:"Invalid params"},[al]:{code:-32603,message:"Internal error"},[sc]:{code:-32e3,message:"Server error"}},cl=sc;function Xb(n){return Jb.includes(n)}function ul(n){return Object.keys(rs).includes(n)?rs[n]:rs[cl]}function Zb(n){const e=Object.values(rs).find(t=>t.code===n);return e||rs[cl]}function fl(n,e,t){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):n}var hl={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var oc=function(n,e){return oc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},oc(n,e)};function Qb(n,e){oc(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ac=function(){return ac=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},ac.apply(this,arguments)};function ew(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(n);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(n,s[o])&&(t[s[o]]=n[s[o]]);return t}function tw(n,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,e,t,s);else for(var l=n.length-1;l>=0;l--)(f=n[l])&&(c=(o<3?f(c):o>3?f(e,t,c):f(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function rw(n,e){return function(t,s){e(t,s,n)}}function nw(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function iw(n,e,t,s){function o(c){return c instanceof t?c:new t(function(f){f(c)})}return new(t||(t=Promise))(function(c,f){function l(E){try{p(s.next(E))}catch(T){f(T)}}function _(E){try{p(s.throw(E))}catch(T){f(T)}}function p(E){E.done?c(E.value):o(E.value).then(l,_)}p((s=s.apply(n,e||[])).next())})}function sw(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,f;return f={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function l(p){return function(E){return _([p,E])}}function _(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(E){p=[6,E],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function ow(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]}function aw(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function cc(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ll(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),o,c=[],f;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(l){f={error:l}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(f)throw f.error}}return c}function cw(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(ll(arguments[e]));return n}function uw(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),o=0,e=0;e<t;e++)for(var c=arguments[e],f=0,l=c.length;f<l;f++,o++)s[o]=c[f];return s}function ns(n){return this instanceof ns?(this.v=n,this):new ns(n)}function fw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),o,c=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(D){s[D]&&(o[D]=function(C){return new Promise(function(R,q){c.push([D,C,R,q])>1||l(D,C)})})}function l(D,C){try{_(s[D](C))}catch(R){T(c[0][3],R)}}function _(D){D.value instanceof ns?Promise.resolve(D.value.v).then(p,E):T(c[0][2],D)}function p(D){l("next",D)}function E(D){l("throw",D)}function T(D,C){D(C),c.shift(),c.length&&l(c[0][0],c[0][1])}}function hw(n){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=n[o]?function(f){return(t=!t)?{value:ns(n[o](f)),done:o==="return"}:c?c(f):f}:c}}function lw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof cc=="function"?cc(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=n[c]&&function(f){return new Promise(function(l,_){f=n[c](f),o(l,_,f.done,f.value)})}}function o(c,f,l,_){Promise.resolve(_).then(function(p){c({value:p,done:l})},f)}}function dw(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function pw(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function gw(n){return n&&n.__esModule?n:{default:n}}function _w(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function yw(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}var vw=Object.freeze({__proto__:null,__extends:Qb,get __assign(){return ac},__rest:ew,__decorate:tw,__param:rw,__metadata:nw,__awaiter:iw,__generator:sw,__createBinding:ow,__exportStar:aw,__values:cc,__read:ll,__spread:cw,__spreadArrays:uw,__await:ns,__asyncGenerator:fw,__asyncDelegator:hw,__asyncValues:lw,__makeTemplateObject:dw,__importStar:pw,__importDefault:gw,__classPrivateFieldGet:_w,__classPrivateFieldSet:yw}),bw=Mn(vw),sn={},dl;function ww(){if(dl)return sn;dl=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.isBrowserCryptoAvailable=sn.getSubtleCrypto=sn.getBrowerCrypto=void 0;function n(){return wt?.crypto||wt?.msCrypto||{}}sn.getBrowerCrypto=n;function e(){const s=n();return s.subtle||s.webkitSubtle}sn.getSubtleCrypto=e;function t(){return!!n()&&!!e()}return sn.isBrowserCryptoAvailable=t,sn}var on={},pl;function mw(){if(pl)return on;pl=1,Object.defineProperty(on,"__esModule",{value:!0}),on.isBrowser=on.isNode=on.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}on.isReactNative=n;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}on.isNode=e;function t(){return!n()&&!e()}return on.isBrowser=t,on}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=bw;e.__exportStar(ww(),n),e.__exportStar(mw(),n)})(hl);function gl(n=3){const e=Date.now()*Math.pow(10,n),t=Math.floor(Math.random()*Math.pow(10,n));return e+t}function uc(n=6){return BigInt(gl(n))}function Ys(n,e,t){return{id:t||gl(),jsonrpc:"2.0",method:n,params:e}}function fc(n,e){return{id:n,jsonrpc:"2.0",result:e}}function ks(n,e,t){return{id:n,jsonrpc:"2.0",error:Ew(e,t)}}function Ew(n,e){return typeof n>"u"?ul(al):(typeof n=="string"&&(n=Object.assign(Object.assign({},ul(sc)),{message:n})),typeof e<"u"&&(n.data=e),Xb(n.code)&&(n=Zb(n.code)),n)}class Sw{}class Dw extends Sw{constructor(){super()}}class xw extends Dw{constructor(e){super()}}const Ow="^https?:",Iw="^wss?:";function Aw(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function _l(n,e){const t=Aw(n);return typeof t>"u"?!1:new RegExp(e).test(t)}function yl(n){return _l(n,Ow)}function vl(n){return _l(n,Iw)}function Pw(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function bl(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function hc(n){return bl(n)&&"method"in n}function Js(n){return bl(n)&&(an(n)||qr(n))}function an(n){return"result"in n}function qr(n){return"error"in n}class Sn extends xw{constructor(e){super(e),this.events=new Qt.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Ys(e.method,e.params||[],e.id||uc().toString()),t)}async requestStrict(e,t){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{qr(c)?o(c.error):s(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Js(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Tw=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),Cw=()=>typeof window<"u",wl=n=>n.split("?")[0],ml=10,Rw=Tw();class Nw{constructor(e){if(this.url=e,this.events=new Qt.exports.EventEmitter,this.registering=!1,!vl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Xi(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!vl(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,s)=>{const o=hl.isReactNative()?void 0:{rejectUnauthorized:!Pw(e)},c=new Rw(e,[],o);Cw()?c.onerror=f=>{const l=f;s(this.emitError(l.error))}:c.on("error",f=>{s(this.emitError(f))}),c.onopen=()=>{this.onOpen(c),t(c)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Pa(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=ks(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return fl(e,wl(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>ml&&this.events.setMaxListeners(ml)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${wl(this.url)}`));return this.events.emit("register_error",t),t}}var lc={exports:{}};(function(n,e){var t=200,s="__lodash_hash_undefined__",o=1,c=2,f=9007199254740991,l="[object Arguments]",_="[object Array]",p="[object AsyncFunction]",E="[object Boolean]",T="[object Date]",D="[object Error]",C="[object Function]",R="[object GeneratorFunction]",q="[object Map]",K="[object Number]",se="[object Null]",L="[object Object]",M="[object Promise]",x="[object Proxy]",P="[object RegExp]",m="[object Set]",u="[object String]",b="[object Symbol]",V="[object Undefined]",k="[object WeakMap]",ie="[object ArrayBuffer]",ce="[object DataView]",de="[object Float32Array]",w="[object Float64Array]",I="[object Int8Array]",ee="[object Int16Array]",X="[object Int32Array]",G="[object Uint8Array]",W="[object Uint8ClampedArray]",J="[object Uint16Array]",re="[object Uint32Array]",we=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,me=/^(?:0|[1-9]\d*)$/,he={};he[de]=he[w]=he[I]=he[ee]=he[X]=he[G]=he[W]=he[J]=he[re]=!0,he[l]=he[_]=he[ie]=he[E]=he[ce]=he[T]=he[D]=he[C]=he[q]=he[K]=he[L]=he[P]=he[m]=he[u]=he[k]=!1;var ve=typeof wt=="object"&&wt&&wt.Object===Object&&wt,j=typeof self=="object"&&self&&self.Object===Object&&self,H=ve||j||Function("return this")(),F=e&&!e.nodeType&&e,d=F&&!0&&n&&!n.nodeType&&n,A=d&&d.exports===F,ae=A&&ve.process,le=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),xe=le&&le.isTypedArray;function qe(S,$){for(var te=-1,pe=S==null?0:S.length,ct=0,Ce=[];++te<pe;){var dt=S[te];$(dt,te,S)&&(Ce[ct++]=dt)}return Ce}function Ge(S,$){for(var te=-1,pe=$.length,ct=S.length;++te<pe;)S[ct+te]=$[te];return S}function $e(S,$){for(var te=-1,pe=S==null?0:S.length;++te<pe;)if($(S[te],te,S))return!0;return!1}function gt(S,$){for(var te=-1,pe=Array(S);++te<S;)pe[te]=$(te);return pe}function _t(S){return function($){return S($)}}function Be(S,$){return S.has($)}function Oe(S,$){return S?.[$]}function Le(S){var $=-1,te=Array(S.size);return S.forEach(function(pe,ct){te[++$]=[ct,pe]}),te}function Fe(S,$){return function(te){return S($(te))}}function He(S){var $=-1,te=Array(S.size);return S.forEach(function(pe){te[++$]=pe}),te}var Ae=Array.prototype,Ue=Function.prototype,De=Object.prototype,Pe=H["__core-js_shared__"],ze=Ue.toString,Ie=De.hasOwnProperty,We=function(){var S=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),Ye=De.toString,et=RegExp("^"+ze.call(Ie).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=A?H.Buffer:void 0,Xe=H.Symbol,cr=H.Uint8Array,_r=De.propertyIsEnumerable,Zr=Ae.splice,ur=Xe?Xe.toStringTag:void 0,cn=Object.getOwnPropertySymbols,On=tt?tt.isBuffer:void 0,kn=Fe(Object.keys,Object),Dt=Sr(H,"DataView"),yt=Sr(H,"Map"),xt=Sr(H,"Promise"),Ot=Sr(H,"Set"),mt=Sr(H,"WeakMap"),vt=Sr(Object,"create"),Mt=fn(Dt),Bt=fn(yt),It=fn(xt),Ht=fn(Ot),At=fn(mt),Rt=Xe?Xe.prototype:void 0,Pt=Rt?Rt.valueOf:void 0;function lt(S){var $=-1,te=S==null?0:S.length;for(this.clear();++$<te;){var pe=S[$];this.set(pe[0],pe[1])}}function jt(){this.__data__=vt?vt(null):{},this.size=0}function qt(S){var $=this.has(S)&&delete this.__data__[S];return this.size-=$?1:0,$}function Tc(S){var $=this.__data__;if(vt){var te=$[S];return te===s?void 0:te}return Ie.call($,S)?$[S]:void 0}function Cc(S){var $=this.__data__;return vt?$[S]!==void 0:Ie.call($,S)}function Rc(S,$){var te=this.__data__;return this.size+=this.has(S)?0:1,te[S]=vt&&$===void 0?s:$,this}lt.prototype.clear=jt,lt.prototype.delete=qt,lt.prototype.get=Tc,lt.prototype.has=Cc,lt.prototype.set=Rc;function Rr(S){var $=-1,te=S==null?0:S.length;for(this.clear();++$<te;){var pe=S[$];this.set(pe[0],pe[1])}}function Nc(){this.__data__=[],this.size=0}function Lc(S){var $=this.__data__,te=Jn($,S);if(te<0)return!1;var pe=$.length-1;return te==pe?$.pop():Zr.call($,te,1),--this.size,!0}function Fc(S){var $=this.__data__,te=Jn($,S);return te<0?void 0:$[te][1]}function Uc(S){return Jn(this.__data__,S)>-1}function $c(S,$){var te=this.__data__,pe=Jn(te,S);return pe<0?(++this.size,te.push([S,$])):te[pe][1]=$,this}Rr.prototype.clear=Nc,Rr.prototype.delete=Lc,Rr.prototype.get=Fc,Rr.prototype.has=Uc,Rr.prototype.set=$c;function un(S){var $=-1,te=S==null?0:S.length;for(this.clear();++$<te;){var pe=S[$];this.set(pe[0],pe[1])}}function bi(){this.size=0,this.__data__={hash:new lt,map:new(yt||Rr),string:new lt}}function Mc(S){var $=In(this,S).delete(S);return this.size-=$?1:0,$}function wi(S){return In(this,S).get(S)}function Bc(S){return In(this,S).has(S)}function Hc(S,$){var te=In(this,S),pe=te.size;return te.set(S,$),this.size+=te.size==pe?0:1,this}un.prototype.clear=bi,un.prototype.delete=Mc,un.prototype.get=wi,un.prototype.has=Bc,un.prototype.set=Hc;function mi(S){var $=-1,te=S==null?0:S.length;for(this.__data__=new un;++$<te;)this.add(S[$])}function no(S){return this.__data__.set(S,s),this}function io(S){return this.__data__.has(S)}mi.prototype.add=mi.prototype.push=no,mi.prototype.has=io;function zr(S){var $=this.__data__=new Rr(S);this.size=$.size}function jc(){this.__data__=new Rr,this.size=0}function qc(S){var $=this.__data__,te=$.delete(S);return this.size=$.size,te}function zc(S){return this.__data__.get(S)}function Kc(S){return this.__data__.has(S)}function so(S,$){var te=this.__data__;if(te instanceof Rr){var pe=te.__data__;if(!yt||pe.length<t-1)return pe.push([S,$]),this.size=++te.size,this;te=this.__data__=new un(pe)}return te.set(S,$),this.size=te.size,this}zr.prototype.clear=jc,zr.prototype.delete=qc,zr.prototype.get=zc,zr.prototype.has=Kc,zr.prototype.set=so;function oo(S,$){var te=Di(S),pe=!te&&bo(S),ct=!te&&!pe&&hs(S),Ce=!te&&!pe&&!ct&&Eo(S),dt=te||pe||ct||Ce,zt=dt?gt(S.length,String):[],Ze=zt.length;for(var ut in S)($||Ie.call(S,ut))&&!(dt&&(ut=="length"||ct&&(ut=="offset"||ut=="parent")||Ce&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||po(ut,Ze)))&&zt.push(ut);return zt}function Jn(S,$){for(var te=S.length;te--;)if(vo(S[te][0],$))return te;return-1}function us(S,$,te){var pe=$(S);return Di(S)?pe:Ge(pe,te(S))}function Xn(S){return S==null?S===void 0?V:se:ur&&ur in Object(S)?ho(S):Vc(S)}function fs(S){return Qn(S)&&Xn(S)==l}function Zn(S,$,te,pe,ct){return S===$?!0:S==null||$==null||!Qn(S)&&!Qn($)?S!==S&&$!==$:ao(S,$,te,pe,Zn,ct)}function ao(S,$,te,pe,ct,Ce){var dt=Di(S),zt=Di($),Ze=dt?_:Qr(S),ut=zt?_:Qr($);Ze=Ze==l?L:Ze,ut=ut==l?L:ut;var Nt=Ze==L,yr=ut==L,Kt=Ze==ut;if(Kt&&hs(S)){if(!hs($))return!1;dt=!0,Nt=!1}if(Kt&&!Nt)return Ce||(Ce=new zr),dt||Eo(S)?Ei(S,$,te,pe,ct,Ce):Wc(S,$,Ze,te,pe,ct,Ce);if(!(te&o)){var pt=Nt&&Ie.call(S,"__wrapped__"),fr=yr&&Ie.call($,"__wrapped__");if(pt||fr){var Kr=pt?S.value():S,Nr=fr?$.value():$;return Ce||(Ce=new zr),ct(Kr,Nr,te,pe,Ce)}}return Kt?(Ce||(Ce=new zr),fo(S,$,te,pe,ct,Ce)):!1}function Gc(S){if(!mo(S)||_o(S))return!1;var $=xi(S)?et:oe;return $.test(fn(S))}function co(S){return Qn(S)&&wo(S.length)&&!!he[Xn(S)]}function uo(S){if(!yo(S))return kn(S);var $=[];for(var te in Object(S))Ie.call(S,te)&&te!="constructor"&&$.push(te);return $}function Ei(S,$,te,pe,ct,Ce){var dt=te&o,zt=S.length,Ze=$.length;if(zt!=Ze&&!(dt&&Ze>zt))return!1;var ut=Ce.get(S);if(ut&&Ce.get($))return ut==$;var Nt=-1,yr=!0,Kt=te&c?new mi:void 0;for(Ce.set(S,$),Ce.set($,S);++Nt<zt;){var pt=S[Nt],fr=$[Nt];if(pe)var Kr=dt?pe(fr,pt,Nt,$,S,Ce):pe(pt,fr,Nt,S,$,Ce);if(Kr!==void 0){if(Kr)continue;yr=!1;break}if(Kt){if(!$e($,function(Nr,en){if(!Be(Kt,en)&&(pt===Nr||ct(pt,Nr,te,pe,Ce)))return Kt.push(en)})){yr=!1;break}}else if(!(pt===fr||ct(pt,fr,te,pe,Ce))){yr=!1;break}}return Ce.delete(S),Ce.delete($),yr}function Wc(S,$,te,pe,ct,Ce,dt){switch(te){case ce:if(S.byteLength!=$.byteLength||S.byteOffset!=$.byteOffset)return!1;S=S.buffer,$=$.buffer;case ie:return!(S.byteLength!=$.byteLength||!Ce(new cr(S),new cr($)));case E:case T:case K:return vo(+S,+$);case D:return S.name==$.name&&S.message==$.message;case P:case u:return S==$+"";case q:var zt=Le;case m:var Ze=pe&o;if(zt||(zt=He),S.size!=$.size&&!Ze)return!1;var ut=dt.get(S);if(ut)return ut==$;pe|=c,dt.set(S,$);var Nt=Ei(zt(S),zt($),pe,ct,Ce,dt);return dt.delete(S),Nt;case b:if(Pt)return Pt.call(S)==Pt.call($)}return!1}function fo(S,$,te,pe,ct,Ce){var dt=te&o,zt=Si(S),Ze=zt.length,ut=Si($),Nt=ut.length;if(Ze!=Nt&&!dt)return!1;for(var yr=Ze;yr--;){var Kt=zt[yr];if(!(dt?Kt in $:Ie.call($,Kt)))return!1}var pt=Ce.get(S);if(pt&&Ce.get($))return pt==$;var fr=!0;Ce.set(S,$),Ce.set($,S);for(var Kr=dt;++yr<Ze;){Kt=zt[yr];var Nr=S[Kt],en=$[Kt];if(pe)var ls=dt?pe(en,Nr,Kt,$,S,Ce):pe(Nr,en,Kt,S,$,Ce);if(!(ls===void 0?Nr===en||ct(Nr,en,te,pe,Ce):ls)){fr=!1;break}Kr||(Kr=Kt=="constructor")}if(fr&&!Kr){var ei=S.constructor,Yt=$.constructor;ei!=Yt&&"constructor"in S&&"constructor"in $&&!(typeof ei=="function"&&ei instanceof ei&&typeof Yt=="function"&&Yt instanceof Yt)&&(fr=!1)}return Ce.delete(S),Ce.delete($),fr}function Si(S){return us(S,Jc,lo)}function In(S,$){var te=S.__data__;return go($)?te[typeof $=="string"?"string":"hash"]:te.map}function Sr(S,$){var te=Oe(S,$);return Gc(te)?te:void 0}function ho(S){var $=Ie.call(S,ur),te=S[ur];try{S[ur]=void 0;var pe=!0}catch{}var ct=Ye.call(S);return pe&&($?S[ur]=te:delete S[ur]),ct}var lo=cn?function(S){return S==null?[]:(S=Object(S),qe(cn(S),function($){return _r.call(S,$)}))}:at,Qr=Xn;(Dt&&Qr(new Dt(new ArrayBuffer(1)))!=ce||yt&&Qr(new yt)!=q||xt&&Qr(xt.resolve())!=M||Ot&&Qr(new Ot)!=m||mt&&Qr(new mt)!=k)&&(Qr=function(S){var $=Xn(S),te=$==L?S.constructor:void 0,pe=te?fn(te):"";if(pe)switch(pe){case Mt:return ce;case Bt:return q;case It:return M;case Ht:return m;case At:return k}return $});function po(S,$){return $=$??f,!!$&&(typeof S=="number"||me.test(S))&&S>-1&&S%1==0&&S<$}function go(S){var $=typeof S;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?S!=="__proto__":S===null}function _o(S){return!!We&&We in S}function yo(S){var $=S&&S.constructor,te=typeof $=="function"&&$.prototype||De;return S===te}function Vc(S){return Ye.call(S)}function fn(S){if(S!=null){try{return ze.call(S)}catch{}try{return S+""}catch{}}return""}function vo(S,$){return S===$||S!==S&&$!==$}var bo=fs(function(){return arguments}())?fs:function(S){return Qn(S)&&Ie.call(S,"callee")&&!_r.call(S,"callee")},Di=Array.isArray;function Yc(S){return S!=null&&wo(S.length)&&!xi(S)}var hs=On||ot;function kc(S,$){return Zn(S,$)}function xi(S){if(!mo(S))return!1;var $=Xn(S);return $==C||$==R||$==p||$==x}function wo(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=f}function mo(S){var $=typeof S;return S!=null&&($=="object"||$=="function")}function Qn(S){return S!=null&&typeof S=="object"}var Eo=xe?_t(xe):co;function Jc(S){return Yc(S)?oo(S):uo(S)}function at(){return[]}function ot(){return!1}n.exports=kc})(lc,lc.exports);var Lw=lc.exports,Fw=Object.defineProperty,El=Object.getOwnPropertySymbols,Uw=Object.prototype.hasOwnProperty,$w=Object.prototype.propertyIsEnumerable,Sl=(n,e,t)=>e in n?Fw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ar=(n,e)=>{for(var t in e||(e={}))Uw.call(e,t)&&Sl(n,t,e[t]);if(El)for(var t of El(e))$w.call(e,t)&&Sl(n,t,e[t]);return n};function Mw(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<n.length;o++){var c=n.charAt(o),f=c.charCodeAt(0);if(t[f]!==255)throw new TypeError(c+" is ambiguous");t[f]=o}var l=n.length,_=n.charAt(0),p=Math.log(l)/Math.log(256),E=Math.log(256)/Math.log(l);function T(R){if(R instanceof Uint8Array||(ArrayBuffer.isView(R)?R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength):Array.isArray(R)&&(R=Uint8Array.from(R))),!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length===0)return"";for(var q=0,K=0,se=0,L=R.length;se!==L&&R[se]===0;)se++,q++;for(var M=(L-se)*E+1>>>0,x=new Uint8Array(M);se!==L;){for(var P=R[se],m=0,u=M-1;(P!==0||m<K)&&u!==-1;u--,m++)P+=256*x[u]>>>0,x[u]=P%l>>>0,P=P/l>>>0;if(P!==0)throw new Error("Non-zero carry");K=m,se++}for(var b=M-K;b!==M&&x[b]===0;)b++;for(var V=_.repeat(q);b<M;++b)V+=n.charAt(x[b]);return V}function D(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return new Uint8Array;var q=0;if(R[q]!==" "){for(var K=0,se=0;R[q]===_;)K++,q++;for(var L=(R.length-q)*p+1>>>0,M=new Uint8Array(L);R[q];){var x=t[R.charCodeAt(q)];if(x===255)return;for(var P=0,m=L-1;(x!==0||P<se)&&m!==-1;m--,P++)x+=l*M[m]>>>0,M[m]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");se=P,q++}if(R[q]!==" "){for(var u=L-se;u!==L&&M[u]===0;)u++;for(var b=new Uint8Array(K+(L-u)),V=K;u!==L;)b[V++]=M[u++];return b}}}function C(R){var q=D(R);if(q)return q;throw new Error(`Non-${e} character`)}return{encode:T,decodeUnsafe:D,decode:C}}var Bw=Mw,Hw=Bw;const Dl=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},jw=n=>new TextEncoder().encode(n),qw=n=>new TextDecoder().decode(n);class zw{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Kw{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return xl(this,e)}}class Gw{constructor(e){this.decoders=e}or(e){return xl(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const xl=(n,e)=>new Gw(ar(ar({},n.decoders||{[n.prefix]:n}),e.decoders||{[e.prefix]:e}));class Ww{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new zw(e,t,s),this.decoder=new Kw(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Xs=({name:n,prefix:e,encode:t,decode:s})=>new Ww(n,e,t,s),is=({prefix:n,name:e,alphabet:t})=>{const{encode:s,decode:o}=Hw(t,e);return Xs({prefix:n,name:e,encode:s,decode:c=>Dl(o(c))})},Vw=(n,e,t,s)=>{const o={};for(let E=0;E<e.length;++E)o[e[E]]=E;let c=n.length;for(;n[c-1]==="=";)--c;const f=new Uint8Array(c*t/8|0);let l=0,_=0,p=0;for(let E=0;E<c;++E){const T=o[n[E]];if(T===void 0)throw new SyntaxError(`Non-${s} character`);_=_<<t|T,l+=t,l>=8&&(l-=8,f[p++]=255&_>>l)}if(l>=t||255&_<<8-l)throw new SyntaxError("Unexpected end of data");return f},Yw=(n,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",f=0,l=0;for(let _=0;_<n.length;++_)for(l=l<<8|n[_],f+=8;f>t;)f-=t,c+=e[o&l>>f];if(f&&(c+=e[o&l<<t-f]),s)for(;c.length*t&7;)c+="=";return c},Xt=({name:n,prefix:e,bitsPerChar:t,alphabet:s})=>Xs({prefix:e,name:n,encode(o){return Yw(o,s,t)},decode(o){return Vw(o,s,t,n)}}),kw=Xs({prefix:"\0",name:"identity",encode:n=>qw(n),decode:n=>jw(n)});var Jw=Object.freeze({__proto__:null,identity:kw});const Xw=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Zw=Object.freeze({__proto__:null,base2:Xw});const Qw=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var em=Object.freeze({__proto__:null,base8:Qw});const tm=is({prefix:"9",name:"base10",alphabet:"0123456789"});var rm=Object.freeze({__proto__:null,base10:tm});const nm=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),im=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var sm=Object.freeze({__proto__:null,base16:nm,base16upper:im});const om=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),am=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cm=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),um=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),fm=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),hm=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lm=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),dm=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pm=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var gm=Object.freeze({__proto__:null,base32:om,base32upper:am,base32pad:cm,base32padupper:um,base32hex:fm,base32hexupper:hm,base32hexpad:lm,base32hexpadupper:dm,base32z:pm});const _m=is({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ym=is({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var vm=Object.freeze({__proto__:null,base36:_m,base36upper:ym});const bm=is({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),wm=is({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var mm=Object.freeze({__proto__:null,base58btc:bm,base58flickr:wm});const Em=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Sm=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Dm=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xm=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Om=Object.freeze({__proto__:null,base64:Em,base64pad:Sm,base64url:Dm,base64urlpad:xm});const Ol=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Im=Ol.reduce((n,e,t)=>(n[t]=e,n),[]),Am=Ol.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function Pm(n){return n.reduce((e,t)=>(e+=Im[t],e),"")}function Tm(n){const e=[];for(const t of n){const s=Am[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const Cm=Xs({prefix:"\u{1F680}",name:"base256emoji",encode:Pm,decode:Tm});var Rm=Object.freeze({__proto__:null,base256emoji:Cm}),Nm=Al,Il=128,Lm=127,Fm=~Lm,Um=Math.pow(2,31);function Al(n,e,t){e=e||[],t=t||0;for(var s=t;n>=Um;)e[t++]=n&255|Il,n/=128;for(;n&Fm;)e[t++]=n&255|Il,n>>>=7;return e[t]=n|0,Al.bytes=t-s+1,e}var $m=dc,Mm=128,Pl=127;function dc(n,s){var t=0,s=s||0,o=0,c=s,f,l=n.length;do{if(c>=l)throw dc.bytes=0,new RangeError("Could not decode varint");f=n[c++],t+=o<28?(f&Pl)<<o:(f&Pl)*Math.pow(2,o),o+=7}while(f>=Mm);return dc.bytes=c-s,t}var Bm=Math.pow(2,7),Hm=Math.pow(2,14),jm=Math.pow(2,21),qm=Math.pow(2,28),zm=Math.pow(2,35),Km=Math.pow(2,42),Gm=Math.pow(2,49),Wm=Math.pow(2,56),Vm=Math.pow(2,63),Ym=function(n){return n<Bm?1:n<Hm?2:n<jm?3:n<qm?4:n<zm?5:n<Km?6:n<Gm?7:n<Wm?8:n<Vm?9:10},km={encode:Nm,decode:$m,encodingLength:Ym},Tl=km;const Cl=(n,e,t=0)=>(Tl.encode(n,e,t),e),Rl=n=>Tl.encodingLength(n),pc=(n,e)=>{const t=e.byteLength,s=Rl(n),o=s+Rl(t),c=new Uint8Array(o+t);return Cl(n,c,0),Cl(t,c,s),c.set(e,o),new Jm(n,t,e,c)};class Jm{constructor(e,t,s,o){this.code=e,this.size=t,this.digest=s,this.bytes=o}}const Nl=({name:n,code:e,encode:t})=>new Xm(n,e,t);class Xm{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?pc(this.code,t):t.then(s=>pc(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Ll=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),Zm=Nl({name:"sha2-256",code:18,encode:Ll("SHA-256")}),Qm=Nl({name:"sha2-512",code:19,encode:Ll("SHA-512")});var eE=Object.freeze({__proto__:null,sha256:Zm,sha512:Qm});const Fl=0,tE="identity",Ul=Dl;var rE=Object.freeze({__proto__:null,identity:{code:Fl,name:tE,encode:Ul,digest:n=>pc(Fl,Ul(n))}});new TextEncoder,new TextDecoder;const $l=ar(ar(ar(ar(ar(ar(ar(ar(ar(ar({},Jw),Zw),em),rm),sm),gm),vm),mm),Om),Rm);ar(ar({},eE),rE);function Ml(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function nE(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ml(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function Bl(n,e,t,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:s}}}const Hl=Bl("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),gc=Bl("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=nE(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),iE=ar({utf8:Hl,"utf-8":Hl,hex:$l.base16,latin1:gc,ascii:gc,binary:gc},$l);function sE(n,e="utf8"){const t=iE[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ml(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}const jl="wc",oE=2,_c="core",Dn=`${jl}@2:${_c}:`,aE={name:_c,logger:"error"},cE={database:":memory:"},uE="crypto",ql="client_ed25519_seed",fE=ye.ONE_DAY,hE="keychain",lE="0.3",dE="messages",pE="0.3",gE=ye.SIX_HOURS,_E="publisher",zl="irn",yE="error",Kl="wss://relay.walletconnect.com",Gl="wss://relay.walletconnect.org",vE="relayer",St={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},bE="_subscription",ss={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},wE=ye.ONE_SECOND/2,mE="2.9.0",EE=1e4,SE="0.3",DE="WALLETCONNECT_CLIENT_ID",Jr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},xE="subscription",OE="0.3",IE=ye.FIVE_SECONDS*1e3,AE="pairing",PE="0.3",os={wc_pairingDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:0},res:{ttl:ye.ONE_DAY,prompt:!1,tag:0}}},Xr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},TE="history",CE="0.3",RE="expirer",Pr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},NE="0.3",yc="verify-api",Wl="https://verify.walletconnect.com";class LE{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=hE,this.version=lE,this.initialized=!1,this.storagePrefix=Dn,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:c}=fe("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(c)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Je.generateChildLogger(t,this.name)}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,kh(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Jh(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class FE{constructor(e,t,s){this.core=e,this.logger=t,this.name=uE,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),c=wh(o);return bh(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=Bv();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const c=await this.getClientSeed(),f=wh(c),l=Xa();return await V1(l,o,fE,f)},this.generateSharedKey=(o,c,f)=>{this.isInitialized();const l=this.getPrivateKey(o),_=Hv(l,c);return this.setSymKey(_,f)},this.setSymKey=async(o,c)=>{this.isInitialized();const f=c||jv(o);return await this.keychain.set(f,o),f},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,c,f)=>{this.isInitialized();const l=zh(f),_=Xi(c);if(Kh(l)){const D=l.senderPublicKey,C=l.receiverPublicKey;o=await this.generateSharedKey(D,C)}const p=this.getSymKey(o),{type:E,senderPublicKey:T}=l;return zv({type:E,symKey:p,message:_,senderPublicKey:T})},this.decode=async(o,c,f)=>{this.isInitialized();const l=Wv(c,f);if(Kh(l)){const E=l.receiverPublicKey,T=l.senderPublicKey;o=await this.generateSharedKey(E,T)}const _=this.getSymKey(o),p=Kv({symKey:_,encoded:c});return Pa(p)},this.getPayloadType=o=>{const c=qs(o);return ts(c.type)},this.getPayloadSenderPublicKey=o=>{const c=qs(o);return c.senderPublicKey?ir(c.senderPublicKey,sr):void 0},this.core=e,this.logger=Je.generateChildLogger(t,this.name),this.keychain=s||new LE(this.core,this.logger)}get context(){return Je.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(ql)}catch{e=Xa(),await this.keychain.set(ql,e)}return sE(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class UE extends I_{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=dE,this.version=pE,this.initialized=!1,this.storagePrefix=Dn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const c=gi(o);let f=this.messages.get(s);return typeof f>"u"&&(f={}),typeof f[c]<"u"||(f[c]=o,this.messages.set(s,f),await this.persist()),c},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const c=this.get(s),f=gi(o);return typeof c[f]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Je.generateChildLogger(e,this.name),this.core=t}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,kh(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Jh(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class $E extends A_{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new Qt.exports.EventEmitter,this.name=_E,this.queue=new Map,this.publishTimeout=ye.toMiliseconds(ye.TEN_SECONDS),this.queueTimeout=ye.toMiliseconds(ye.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,c)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}});try{const f=c?.ttl||gE,l=rc(c),_=c?.prompt||!1,p=c?.tag||0,E=c?.id||uc().toString(),T={topic:s,message:o,opts:{ttl:f,relay:l,prompt:_,tag:p,id:E}},D=setTimeout(()=>this.queue.set(E,T),this.queueTimeout);try{await await zs(this.rpcPublish(s,o,f,l,_,p,E),this.publishTimeout),clearTimeout(D),this.relayer.events.emit(St.publish,T)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}})}catch(f){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(f),f}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=Je.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Je.getLoggerContext(this.logger)}rpcPublish(e,t,s,o,c,f,l){var _,p,E,T;const D={method:Ks(o.protocol).publish,params:{topic:e,message:t,ttl:s,prompt:c,tag:f},id:l};return or((_=D.params)==null?void 0:_.prompt)&&((p=D.params)==null||delete p.prompt),or((E=D.params)==null?void 0:E.tag)&&((T=D.params)==null||delete T.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:D}),this.relayer.request(D)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:s,opts:o}=e;await this.publish(t,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(hi.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(St.connection_stalled);return}this.checkQueue()}),this.relayer.on(St.message_ack,e=>{this.onPublish(e.id.toString())})}}class ME{constructor(){this.map=new Map,this.set=(e,t)=>{const s=this.get(e);this.exists(e,t)||this.map.set(e,[...s,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,t))return;const o=s.filter(c=>c!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var BE=Object.defineProperty,HE=Object.defineProperties,jE=Object.getOwnPropertyDescriptors,Vl=Object.getOwnPropertySymbols,qE=Object.prototype.hasOwnProperty,zE=Object.prototype.propertyIsEnumerable,Yl=(n,e,t)=>e in n?BE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,as=(n,e)=>{for(var t in e||(e={}))qE.call(e,t)&&Yl(n,t,e[t]);if(Vl)for(var t of Vl(e))zE.call(e,t)&&Yl(n,t,e[t]);return n},vc=(n,e)=>HE(n,jE(e));class KE extends C_{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new ME,this.events=new Qt.exports.EventEmitter,this.name=xE,this.version=OE,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Dn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const c=rc(o),f={topic:s,relay:c};this.pending.set(s,f);const l=await this.rpcSubscribe(s,c);return this.onSubscribe(l,f),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),l}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof o?.id<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,c)=>{const f=new ye.Watch;f.start(this.pendingSubscriptionWatchLabel);const l=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(l),f.stop(this.pendingSubscriptionWatchLabel),o(!0)),f.elapsed(this.pendingSubscriptionWatchLabel)>=IE&&(clearInterval(l),f.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Je.generateChildLogger(t,this.name),this.clientId=""}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let s=!1;try{s=this.getSubscription(e).topic===t}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}});try{const o=rc(s);await this.rpcUnsubscribe(e,t,o);const c=$t("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const s={method:Ks(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await zs(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(St.connection_stalled)}return gi(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,s={method:Ks(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await zs(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(St.connection_stalled)}}rpcUnsubscribe(e,t,s){const o={method:Ks(s.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,vc(as({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,as({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,s){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,as({},t)),this.topicMap.set(t.topic,e),this.events.emit(Jr.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:s}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(Jr.deleted,vc(as({},s),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Jr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Jr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);Vn(t)&&this.onBatchSubscribe(t.map((s,o)=>vc(as({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(hi.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(St.connect,async()=>{await this.onConnect()}),this.relayer.on(St.disconnect,()=>{this.onDisconnect()}),this.events.on(Jr.created,async e=>{const t=Jr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(Jr.deleted,async e=>{const t=Jr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var GE=Object.defineProperty,kl=Object.getOwnPropertySymbols,WE=Object.prototype.hasOwnProperty,VE=Object.prototype.propertyIsEnumerable,Jl=(n,e,t)=>e in n?GE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,YE=(n,e)=>{for(var t in e||(e={}))WE.call(e,t)&&Jl(n,t,e[t]);if(kl)for(var t of kl(e))VE.call(e,t)&&Jl(n,t,e[t]);return n};class kE extends P_{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Qt.exports.EventEmitter,this.name=vE,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Je.generateChildLogger(e.logger,this.name):Je.pino(Je.getDefaultLoggerOptions({level:e.logger||yE})),this.messages=new UE(this.logger,e.core),this.subscriber=new KE(this,this.logger),this.publisher=new $E(this,this.logger),this.relayUrl=e?.relayUrl||Kl,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Gl}...`),await this.restartTransport(Gl)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},EE)}get context(){return Je.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,s){this.isInitialized(),await this.publisher.publish(e,t,s),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";return o||(await Promise.all([new Promise(c=>{this.subscriber.once(Jr.created,f=>{f.topic===e&&c()})}),new Promise(async c=>{o=await this.subscriber.subscribe(e,t),c()})]),o)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(St.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(Jr.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,s)=>{await zs(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>s(o)).then(()=>t()).finally(()=>this.removeListener(St.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(St.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const s=t;if(!this.isConnectionStalled(s.message))throw t;this.events.emit(St.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(t=>{this.provider.once(ss.disconnect,()=>{t()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Sn(new Nw(nb({sdkVersion:mE,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:s}=e;await this.messages.set(t,s)}async shouldIgnoreMessageEvent(e){const{topic:t,message:s}=e;return await this.subscriber.isSubscribed(t)?this.messages.has(t,s):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),hc(e)){if(!e.method.endsWith(bE))return;const t=e.params,{topic:s,message:o,publishedAt:c}=t.data,f={topic:s,message:o,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(YE({type:"event",event:t.id},f)),this.events.emit(t.id,f),await this.acknowledgePayload(e),await this.onMessageEvent(f)}else Js(e)&&this.events.emit(St.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(St.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=fc(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(ss.payload,e=>this.onProviderPayload(e)),this.provider.on(ss.connect,()=>{this.events.emit(St.connect)}),this.provider.on(ss.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(ss.error,e=>{this.logger.error(e),this.events.emit(St.error,e)})}registerEventListeners(){this.events.on(St.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(St.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},ye.toMiliseconds(wE))}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var JE=Object.defineProperty,Xl=Object.getOwnPropertySymbols,XE=Object.prototype.hasOwnProperty,ZE=Object.prototype.propertyIsEnumerable,Zl=(n,e,t)=>e in n?JE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ql=(n,e)=>{for(var t in e||(e={}))XE.call(e,t)&&Zl(n,t,e[t]);if(Xl)for(var t of Xl(e))ZE.call(e,t)&&Zl(n,t,e[t]);return n};class Zs extends T_{constructor(e,t,s,o=Dn,c=void 0){super(e,t,s,o),this.core=e,this.logger=t,this.name=s,this.map=new Map,this.version=SE,this.cached=[],this.initialized=!1,this.storagePrefix=Dn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(f=>{this.getKey&&f!==null&&!or(f)?this.map.set(this.getKey(f),f):Ob(f)?this.map.set(f.id,f):Ib(f)&&this.map.set(f.topic,f)}),this.cached=[],this.initialized=!0)},this.set=async(f,l)=>{this.isInitialized(),this.map.has(f)?await this.update(f,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:f,value:l}),this.map.set(f,l),await this.persist())},this.get=f=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:f}),this.getData(f)),this.getAll=f=>(this.isInitialized(),f?this.values.filter(l=>Object.keys(f).every(_=>Lw(l[_],f[_]))):this.values),this.update=async(f,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:f,update:l});const _=Ql(Ql({},this.getData(f)),l);this.map.set(f,_),await this.persist()},this.delete=async(f,l)=>{this.isInitialized(),this.map.has(f)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:f,reason:l}),this.map.delete(f),await this.persist())},this.logger=Je.generateChildLogger(t,this.name),this.storagePrefix=o,this.getKey=c}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:s}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class QE{constructor(e,t){this.core=e,this.logger=t,this.name=AE,this.version=PE,this.events=new Qt.exports,this.initialized=!1,this.storagePrefix=Dn,this.ignoredPayloadTypes=[Gn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Xa(),o=await this.core.crypto.setSymKey(s),c=jr(ye.FIVE_MINUTES),f={protocol:zl},l={topic:o,expiry:c,relay:f,active:!1},_=_b({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:f});return await this.pairings.set(o,l),await this.core.relayer.subscribe(o),this.core.expirer.set(o,c),{topic:o,uri:_}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:c,relay:f}=db(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const l=jr(ye.FIVE_MINUTES),_={topic:o,relay:f,expiry:l,active:!1};return await this.pairings.set(o,_),await this.core.crypto.setSymKey(c,o),await this.core.relayer.subscribe(o,{relay:f}),this.core.expirer.set(o,l),s.activatePairing&&await this.activate({topic:o}),_},this.activate=async({topic:s})=>{this.isInitialized();const o=jr(ye.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:f,resolve:l,reject:_}=_i();this.events.once(Ut("pairing_ping",c),({error:p})=>{p?_(p):l()}),await f()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",$t("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,c)=>{const f=Ys(o,c),l=await this.core.crypto.encode(s,f),_=os[o].req;return this.core.history.set(s,f),this.core.relayer.publish(s,l,_),f.id},this.sendResult=async(s,o,c)=>{const f=fc(s,c),l=await this.core.crypto.encode(o,f),_=await this.core.history.get(o,s),p=os[_.request.method].res;await this.core.relayer.publish(o,l,p),await this.core.history.resolve(f)},this.sendError=async(s,o,c)=>{const f=ks(s,c),l=await this.core.crypto.encode(o,f),_=await this.core.history.get(o,s),p=os[_.request.method]?os[_.request.method].res:os.unregistered_method.res;await this.core.relayer.publish(o,l,p),await this.core.history.resolve(f)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,$t("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>En(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:c}=s,f=c.method;if(this.pairings.keys.includes(o))switch(f){case"wc_pairingPing":return this.onPairingPingRequest(o,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,c);default:return this.onUnknownRpcMethodRequest(o,c)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:c}=s,f=(await this.core.history.get(o,c.id)).request.method;if(this.pairings.keys.includes(o))switch(f){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(f)}},this.onPairingPingRequest=async(s,o)=>{const{id:c}=o;try{this.isValidPing({topic:s}),await this.sendResult(c,s,!0),this.events.emit("pairing_ping",{id:c,topic:s})}catch(f){await this.sendError(c,s,f),this.logger.error(f)}},this.onPairingPingResponse=(s,o)=>{const{id:c}=o;setTimeout(()=>{an(o)?this.events.emit(Ut("pairing_ping",c),{}):qr(o)&&this.events.emit(Ut("pairing_ping",c),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:c,topic:s})}catch(f){await this.sendError(c,s,f),this.logger.error(f)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:c,method:f}=o;try{if(this.registeredMethods.includes(f))return;const l=$t("WC_METHOD_UNSUPPORTED",f);await this.sendError(c,s,l),this.logger.error(l)}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error($t("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!gr(s)){const{message:o}=fe("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!xb(s.uri)){const{message:o}=fe("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!gr(s)){const{message:c}=fe("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!gr(s)){const{message:c}=fe("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Vt(s,!1)){const{message:o}=fe("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=fe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(En(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=fe("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=Je.generateChildLogger(t,this.name),this.pairings=new Zs(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Je.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(St.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(t,s);hc(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):Js(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))})}registerExpirerEvents(){this.core.expirer.on(Pr.expired,async e=>{const{topic:t}=Zh(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class e3 extends O_{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new Qt.exports.EventEmitter,this.name=TE,this.version=CE,this.cached=[],this.initialized=!1,this.storagePrefix=Dn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:c}),this.records.has(o.id))return;const f={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:c,expiry:jr(ye.THIRTY_DAYS)};this.records.set(f.id,f),this.events.emit(Xr.created,f)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=qr(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(Xr.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===s){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(Xr.deleted,c)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Je.generateChildLogger(t,this.name)}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const s={topic:t.topic,request:Ys(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:s}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Xr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Xr.created,e=>{const t=Xr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Xr.updated,e=>{const t=Xr.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Xr.deleted,e=>{const t=Xr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(hi.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ye.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class t3 extends R_{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new Qt.exports.EventEmitter,this.name=RE,this.version=NE,this.cached=[],this.initialized=!1,this.storagePrefix=Dn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const c=this.formatTarget(s),f={target:c,expiry:o};this.expirations.set(c,f),this.checkExpiry(c,f),this.events.emit(Pr.created,{target:c,expiration:f})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Pr.deleted,{target:o,expiration:c})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Je.generateChildLogger(t,this.name)}get context(){return Je.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return ib(e);if(typeof e=="number")return sb(e);const{message:t}=fe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Pr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:s}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}checkExpiry(e,t){const{expiry:s}=t;ye.toMiliseconds(s)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Pr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(hi.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Pr.created,e=>{const t=Pr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Pr.expired,e=>{const t=Pr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Pr.deleted,e=>{const t=Pr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}class r3 extends N_{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=yc,this.initialized=!1,this.init=async s=>{Yh()||!Qa()||(this.verifyUrl=s?.verifyUrl||Wl,await this.createIframe())},this.register=async s=>{var o;if(this.initialized||await this.init(),!!this.iframe)try{(o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const c=this.startAbortTimer(ye.FIVE_SECONDS),f=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(c),f.status===200?(o=await f.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,o)=>{if(document.getElementById(yc))return s();const c=document.createElement("iframe");c.setAttribute("id",yc),c.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),c.style.display="none",c.addEventListener("load",()=>{this.initialized=!0,s()}),c.addEventListener("error",f=>{o(f)}),document.body.append(c),this.iframe=c}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),ye.toMiliseconds(ye.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Je.generateChildLogger(t,this.name),this.verifyUrl=Wl,this.abortController=new AbortController,this.isDevEnv=Za()&&process.env.IS_VITEST}get context(){return Je.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),ye.toMiliseconds(e))}}var n3=Object.defineProperty,ed=Object.getOwnPropertySymbols,i3=Object.prototype.hasOwnProperty,s3=Object.prototype.propertyIsEnumerable,td=(n,e,t)=>e in n?n3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,rd=(n,e)=>{for(var t in e||(e={}))i3.call(e,t)&&td(n,t,e[t]);if(ed)for(var t of ed(e))s3.call(e,t)&&td(n,t,e[t]);return n};class bc extends x_{constructor(e){super(e),this.protocol=jl,this.version=oE,this.name=_c,this.events=new Qt.exports.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Kl;const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Je.pino(Je.getDefaultLoggerOptions({level:e?.logger||aE.logger}));this.logger=Je.generateChildLogger(t,this.name),this.heartbeat=new hi.HeartBeat,this.crypto=new FE(this,this.logger,e?.keychain),this.history=new e3(this,this.logger),this.expirer=new t3(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new t0(rd(rd({},cE),e?.storageOptions)),this.relayer=new kE({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new QE(this,this.logger),this.verify=new r3(this.projectId||"",this.logger)}static async init(e){const t=new bc(e);await t.initialize();const s=await t.crypto.getClientId();return await t.storage.setItem(DE,s),t}get context(){return Je.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const o3=bc,nd="wc",id=2,sd="client",wc=`${nd}@${id}:${sd}:`,mc={name:sd,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},a3="WALLETCONNECT_DEEPLINK_CHOICE",c3="proposal",od="Proposal expired",u3="session",Qs=ye.SEVEN_DAYS,f3="engine",cs={wc_sessionPropose:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1115}}},Ec={min:ye.FIVE_MINUTES,max:ye.SEVEN_DAYS},h3="request",l3=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var d3=Object.defineProperty,p3=Object.defineProperties,g3=Object.getOwnPropertyDescriptors,ad=Object.getOwnPropertySymbols,_3=Object.prototype.hasOwnProperty,y3=Object.prototype.propertyIsEnumerable,cd=(n,e,t)=>e in n?d3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Tr=(n,e)=>{for(var t in e||(e={}))_3.call(e,t)&&cd(n,t,e[t]);if(ad)for(var t of ad(e))y3.call(e,t)&&cd(n,t,e[t]);return n},Sc=(n,e)=>p3(n,g3(e));class v3 extends F_{constructor(e){super(e),this.name=f3,this.events=new Qt.exports,this.initialized=!1,this.ignoredPayloadTypes=[Gn],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(cs)}),this.initialized=!0)},this.connect=async t=>{this.isInitialized();const s=Sc(Tr({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:f,sessionProperties:l,relays:_}=s;let p=o,E,T=!1;if(p&&(T=this.client.core.pairing.pairings.get(p).active),!p||!T){const{topic:M,uri:x}=await this.client.core.pairing.create();p=M,E=x}const D=await this.client.core.crypto.generateKeyPair(),C=Tr({requiredNamespaces:c,optionalNamespaces:f,relays:_??[{protocol:zl}],proposer:{publicKey:D,metadata:this.client.metadata}},l&&{sessionProperties:l}),{reject:R,resolve:q,done:K}=_i(ye.FIVE_MINUTES,od);if(this.events.once(Ut("session_connect"),async({error:M,session:x})=>{if(M)R(M);else if(x){x.self.publicKey=D;const P=Sc(Tr({},x),{requiredNamespaces:x.requiredNamespaces,optionalNamespaces:x.optionalNamespaces});await this.client.session.set(x.topic,P),await this.setExpiry(x.topic,x.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:x.peer.metadata}),q(P)}}),!p){const{message:M}=fe("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(M)}const se=await this.sendRequest(p,"wc_sessionPropose",C),L=jr(ye.FIVE_MINUTES);return await this.setProposal(se,Tr({id:se,expiry:L},C)),{uri:E,approval:K}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:s,relayProtocol:o,namespaces:c,sessionProperties:f}=t,l=this.client.proposal.get(s);let{pairingTopic:_,proposer:p,requiredNamespaces:E,optionalNamespaces:T}=l;_=_||"",vi(E)||(E=wb(c,"approve()"));const D=await this.client.core.crypto.generateKeyPair(),C=p.publicKey,R=await this.client.core.crypto.generateSharedKey(D,C);_&&s&&(await this.client.core.pairing.updateMetadata({topic:_,metadata:p.metadata}),await this.sendResult(s,_,{relay:{protocol:o??"irn"},responderPublicKey:D}),await this.client.proposal.delete(s,$t("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:_}));const q=Tr({relay:{protocol:o??"irn"},namespaces:c,requiredNamespaces:E,optionalNamespaces:T,pairingTopic:_,controller:{publicKey:D,metadata:this.client.metadata},expiry:jr(Qs)},f&&{sessionProperties:f});await this.client.core.relayer.subscribe(R),await this.sendRequest(R,"wc_sessionSettle",q);const K=Sc(Tr({},q),{topic:R,pairingTopic:_,acknowledged:!1,self:q.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:D});return await this.client.session.set(R,K),await this.setExpiry(R,jr(Qs)),{topic:R,acknowledged:()=>new Promise(se=>setTimeout(()=>se(this.client.session.get(R)),500))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:s,reason:o}=t,{pairingTopic:c}=this.client.proposal.get(s);c&&(await this.sendError(s,c,o),await this.client.proposal.delete(s,$t("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:s,namespaces:o}=t,c=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:f,resolve:l,reject:_}=_i();return this.events.once(Ut("session_update",c),({error:p})=>{p?_(p):l()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:f}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:s}=t,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:c,resolve:f,reject:l}=_i();return this.events.once(Ut("session_extend",o),({error:_})=>{_?l(_):f()}),await this.setExpiry(s,jr(Qs)),{acknowledged:c}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:s,request:o,topic:c,expiry:f}=t,l=await this.sendRequest(c,"wc_sessionRequest",{request:o,chainId:s},f),{done:_,resolve:p,reject:E}=_i(f);this.events.once(Ut("session_request",l),({error:D,result:C})=>{D?E(D):p(C)}),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:s,id:l});const T=await this.client.core.storage.getItem(a3);return ob({id:l,topic:c,wcDeepLink:T}),await _()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:s,response:o}=t,{id:c}=o;an(o)?await this.sendResult(c,s,o.result):qr(o)&&await this.sendError(c,s,o.error),this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0})},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:c,resolve:f,reject:l}=_i();this.events.once(Ut("session_ping",o),({error:_})=>{_?l(_):f()}),await c()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:s,event:o,chainId:c}=t;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:c})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=uc().toString();let c;const f=l=>{l?.id.toString()===o&&(this.client.core.relayer.events.removeListener(St.message_ack,f),c())};await Promise.all([new Promise(l=>{c=l,this.client.core.relayer.on(St.message_ack,f)}),this.sendRequest(s,"wc_sessionDelete",$t("USER_DISCONNECTED"),void 0,o)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(s=>Sb(s,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const s=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var f,l;return((f=c.peerMetadata)==null?void 0:f.url)&&((l=c.peerMetadata)==null?void 0:l.url)===t.peer.metadata.url&&c.topic&&c.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(t,s)=>{const{self:o}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,$t("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),s||this.client.core.expirer.del(t)},this.deleteProposal=async(t,s)=>{await Promise.all([this.client.proposal.delete(t,$t("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,s),o?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,s)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:s}),this.client.core.expirer.set(t,s)},this.setProposal=async(t,s)=>{await this.client.proposal.set(t,s),this.client.core.expirer.set(t,s.expiry)},this.setPendingSessionRequest=async t=>{const s=cs.wc_sessionRequest.req.ttl,{id:o,topic:c,params:f}=t;await this.client.pendingRequest.set(o,{id:o,topic:c,params:f}),s&&this.client.core.expirer.set(o,jr(s))},this.sendRequest=async(t,s,o,c,f)=>{const l=Ys(s,o);if(Qa()&&l3.includes(s)){const E=gi(JSON.stringify(l));await this.client.core.verify.register({attestationId:E})}const _=await this.client.core.crypto.encode(t,l),p=cs[s].req;return c&&(p.ttl=c),f&&(p.id=f),this.client.core.history.set(t,l),this.client.core.relayer.publish(t,_,p),l.id},this.sendResult=async(t,s,o)=>{const c=fc(t,o),f=await this.client.core.crypto.encode(s,c),l=await this.client.core.history.get(s,t),_=cs[l.request.method].res;this.client.core.relayer.publish(s,f,_),await this.client.core.history.resolve(c)},this.sendError=async(t,s,o)=>{const c=ks(t,o),f=await this.client.core.crypto.encode(s,c),l=await this.client.core.history.get(s,t),_=cs[l.request.method].res;this.client.core.relayer.publish(s,f,_),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],s=[];this.client.session.getAll().forEach(o=>{En(o.expiry)&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{En(o.expiry)&&s.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=t=>{const{topic:s,payload:o}=t,c=o.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:s,payload:o}=t,c=(await this.client.core.history.get(s,o.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:s}=t,{message:o}=fe("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidConnect(Tr({},s.params));const f=jr(ye.FIVE_MINUTES),l=Tr({id:c,pairingTopic:t,expiry:f},o);await this.setProposal(c,l);const _=gi(JSON.stringify(s)),p=await this.getVerifyContext(_,l.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:l,verifyContext:p})}catch(f){await this.sendError(c,t,f),this.client.logger.error(f)}},this.onSessionProposeResponse=async(t,s)=>{const{id:o}=s;if(an(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const f=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:f});const l=f.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const _=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:_});const p=await this.client.core.crypto.generateSharedKey(l,_);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:p});const E=await this.client.core.relayer.subscribe(p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:E}),await this.client.core.pairing.activate({topic:t})}else qr(s)&&(await this.client.proposal.delete(o,$t("USER_DISCONNECTED")),this.events.emit(Ut("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidSessionSettleRequest(c);const{relay:f,controller:l,expiry:_,namespaces:p,requiredNamespaces:E,optionalNamespaces:T,sessionProperties:D,pairingTopic:C}=s.params,R=Tr({topic:t,relay:f,expiry:_,namespaces:p,acknowledged:!0,pairingTopic:C,requiredNamespaces:E,optionalNamespaces:T,controller:l.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},D&&{sessionProperties:D});await this.sendResult(s.id,t,!0),this.events.emit(Ut("session_connect"),{session:R}),this.cleanupDuplicatePairings(R)}catch(f){await this.sendError(o,t,f),this.client.logger.error(f)}},this.onSessionSettleResponse=async(t,s)=>{const{id:o}=s;an(s)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Ut("session_approve",o),{})):qr(s)&&(await this.client.session.delete(t,$t("USER_DISCONNECTED")),this.events.emit(Ut("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidUpdate(Tr({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult(c,t,!0),this.client.events.emit("session_update",{id:c,topic:t,params:o})}catch(f){await this.sendError(c,t,f),this.client.logger.error(f)}},this.onSessionUpdateResponse=(t,s)=>{const{id:o}=s;an(s)?this.events.emit(Ut("session_update",o),{}):qr(s)&&this.events.emit(Ut("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(t,s)=>{const{id:o}=s;try{this.isValidExtend({topic:t}),await this.setExpiry(t,jr(Qs)),await this.sendResult(o,t,!0),this.client.events.emit("session_extend",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,s)=>{const{id:o}=s;an(s)?this.events.emit(Ut("session_extend",o),{}):qr(s)&&this.events.emit(Ut("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(t,s)=>{const{id:o}=s;try{this.isValidPing({topic:t}),await this.sendResult(o,t,!0),this.client.events.emit("session_ping",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,s)=>{const{id:o}=s;setTimeout(()=>{an(s)?this.events.emit(Ut("session_ping",o),{}):qr(s)&&this.events.emit(Ut("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(t,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:t,reason:s.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(St.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult(o,t,!0)]),this.client.events.emit("session_delete",{id:o,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidRequest(Tr({topic:t},c)),await this.setPendingSessionRequest({id:o,topic:t,params:c});const f=gi(JSON.stringify(s)),l=this.client.session.get(t),_=await this.getVerifyContext(f,l.peer.metadata);this.client.events.emit("session_request",{id:o,topic:t,params:c,verifyContext:_})}catch(f){await this.sendError(o,t,f),this.client.logger.error(f)}},this.onSessionRequestResponse=(t,s)=>{const{id:o}=s;an(s)?this.events.emit(Ut("session_request",o),{result:s.result}):qr(s)&&this.events.emit(Ut("session_request",o),{error:s.error})},this.onSessionEventRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidEmit(Tr({topic:t},c)),this.client.events.emit("session_event",{id:o,topic:t,params:c})}catch(f){await this.sendError(o,t,f),this.client.logger.error(f)}},this.isValidConnect=async t=>{if(!gr(t)){const{message:_}=fe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(_)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:f,relays:l}=t;if(or(s)||await this.isValidPairingTopic(s),!Fb(l,!0)){const{message:_}=fe("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(_)}!or(o)&&vi(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!or(c)&&vi(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),or(f)||this.validateSessionProps(f,"sessionProperties")},this.validateNamespaces=(t,s)=>{const o=Lb(t,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!gr(t))throw new Error(fe("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:s,namespaces:o,relayProtocol:c,sessionProperties:f}=t;await this.isValidProposalId(s);const l=this.client.proposal.get(s),_=Vs(o,"approve()");if(_)throw new Error(_.message);const p=sl(l.requiredNamespaces,o,"approve()");if(p)throw new Error(p.message);if(!Vt(c,!0)){const{message:E}=fe("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(E)}or(f)||this.validateSessionProps(f,"sessionProperties")},this.isValidReject=async t=>{if(!gr(t)){const{message:c}=fe("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:s,reason:o}=t;if(await this.isValidProposalId(s),!$b(o)){const{message:c}=fe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!gr(t)){const{message:p}=fe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(p)}const{relay:s,controller:o,namespaces:c,expiry:f}=t;if(!nl(s)){const{message:p}=fe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const l=Ab(o,"onSessionSettleRequest()");if(l)throw new Error(l.message);const _=Vs(c,"onSessionSettleRequest()");if(_)throw new Error(_.message);if(En(f)){const{message:p}=fe("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async t=>{if(!gr(t)){const{message:_}=fe("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(_)}const{topic:s,namespaces:o}=t;await this.isValidSessionTopic(s);const c=this.client.session.get(s),f=Vs(o,"update()");if(f)throw new Error(f.message);const l=sl(c.requiredNamespaces,o,"update()");if(l)throw new Error(l.message)},this.isValidExtend=async t=>{if(!gr(t)){const{message:o}=fe("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionTopic(s)},this.isValidRequest=async t=>{if(!gr(t)){const{message:_}=fe("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(_)}const{topic:s,request:o,chainId:c,expiry:f}=t;await this.isValidSessionTopic(s);const{namespaces:l}=this.client.session.get(s);if(!il(l,c)){const{message:_}=fe("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(_)}if(!Mb(o)){const{message:_}=fe("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(_)}if(!jb(l,c,o.method)){const{message:_}=fe("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(_)}if(f&&!Gb(f,Ec)){const{message:_}=fe("MISSING_OR_INVALID",`request() expiry: ${f}. Expiry must be a number (in seconds) between ${Ec.min} and ${Ec.max}`);throw new Error(_)}},this.isValidRespond=async t=>{if(!gr(t)){const{message:c}=fe("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:s,response:o}=t;if(await this.isValidSessionTopic(s),!Bb(o)){const{message:c}=fe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidPing=async t=>{if(!gr(t)){const{message:o}=fe("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async t=>{if(!gr(t)){const{message:l}=fe("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(l)}const{topic:s,event:o,chainId:c}=t;await this.isValidSessionTopic(s);const{namespaces:f}=this.client.session.get(s);if(!il(f,c)){const{message:l}=fe("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(l)}if(!Hb(o)){const{message:l}=fe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(l)}if(!qb(f,c,o.name)){const{message:l}=fe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(l)}},this.isValidDisconnect=async t=>{if(!gr(t)){const{message:o}=fe("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(t,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:s.verifyUrl});c&&(o.verified.origin=c,o.verified.validation=c===s.url?"VALID":"INVALID")}catch(c){this.client.logger.error(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,s)=>{Object.values(t).forEach(o=>{if(!Vt(o,!1)){const{message:c}=fe("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(c)}})}}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(St.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(t,s);hc(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):Js(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o})})}registerExpirerEvents(){this.client.core.expirer.on(Pr.expired,async e=>{const{topic:t,id:s}=Zh(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,fe("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!Vt(e,!1)){const{message:t}=fe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=fe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(En(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=fe("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Vt(e,!1)){const{message:t}=fe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=fe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(En(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=fe("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Vt(e,!1)){const{message:t}=fe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=fe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!Ub(e)){const{message:t}=fe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=fe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(En(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=fe("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class b3 extends Zs{constructor(e,t){super(e,t,c3,wc),this.core=e,this.logger=t}}class w3 extends Zs{constructor(e,t){super(e,t,u3,wc),this.core=e,this.logger=t}}class m3 extends Zs{constructor(e,t){super(e,t,h3,wc,s=>s.id),this.core=e,this.logger=t}}class Dc extends L_{constructor(e){super(e),this.protocol=nd,this.version=id,this.name=mc.name,this.events=new Qt.exports.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=e?.name||mc.name,this.metadata=e?.metadata||Qv();const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Je.pino(Je.getDefaultLoggerOptions({level:e?.logger||mc.logger}));this.core=e?.core||new o3(e),this.logger=Je.generateChildLogger(t,this.name),this.session=new w3(this.core,this.logger),this.proposal=new b3(this.core,this.logger),this.pendingRequest=new m3(this.core,this.logger),this.engine=new v3(this)}static async init(e){const t=new Dc(e);return await t.initialize(),t}get context(){return Je.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const ud="error",E3="wss://relay.walletconnect.com",S3="wc",D3="universal_provider",fd=`${S3}@2:${D3}:`,x3="https://rpc.walletconnect.com/v1",xn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var xc={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,s="4.17.21",o=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",l="Invalid `variable` option passed into `_.template`",_="__lodash_hash_undefined__",p=500,E="__lodash_placeholder__",T=1,D=2,C=4,R=1,q=2,K=1,se=2,L=4,M=8,x=16,P=32,m=64,u=128,b=256,V=512,k=30,ie="...",ce=800,de=16,w=1,I=2,ee=3,X=1/0,G=9007199254740991,W=17976931348623157e292,J=0/0,re=4294967295,we=re-1,oe=re>>>1,me=[["ary",u],["bind",K],["bindKey",se],["curry",M],["curryRight",x],["flip",V],["partial",P],["partialRight",m],["rearg",b]],he="[object Arguments]",ve="[object Array]",j="[object AsyncFunction]",H="[object Boolean]",F="[object Date]",d="[object DOMException]",A="[object Error]",ae="[object Function]",le="[object GeneratorFunction]",xe="[object Map]",qe="[object Number]",Ge="[object Null]",$e="[object Object]",gt="[object Promise]",_t="[object Proxy]",Be="[object RegExp]",Oe="[object Set]",Le="[object String]",Fe="[object Symbol]",He="[object Undefined]",Ae="[object WeakMap]",Ue="[object WeakSet]",De="[object ArrayBuffer]",Pe="[object DataView]",ze="[object Float32Array]",Ie="[object Float64Array]",We="[object Int8Array]",Ye="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Xe="[object Uint8ClampedArray]",cr="[object Uint16Array]",_r="[object Uint32Array]",Zr=/\b__p \+= '';/g,ur=/\b(__p \+=) '' \+/g,cn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,On=/&(?:amp|lt|gt|quot|#39);/g,kn=/[&<>"']/g,Dt=RegExp(On.source),yt=RegExp(kn.source),xt=/<%-([\s\S]+?)%>/g,Ot=/<%([\s\S]+?)%>/g,mt=/<%=([\s\S]+?)%>/g,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mt=/^\w*$/,Bt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,Ht=RegExp(It.source),At=/^\s+/,Rt=/\s/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,jt=/,? & /,qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Tc=/[()=,{}\[\]\/\s]/,Cc=/\\(\\)?/g,Rc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Rr=/\w*$/,Nc=/^[-+]0x[0-9a-f]+$/i,Lc=/^0b[01]+$/i,Fc=/^\[object .+?Constructor\]$/,Uc=/^0o[0-7]+$/i,$c=/^(?:0|[1-9]\d*)$/,un=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bi=/($^)/,Mc=/['\n\r\u2028\u2029\\]/g,wi="\\ud800-\\udfff",Bc="\\u0300-\\u036f",Hc="\\ufe20-\\ufe2f",mi="\\u20d0-\\u20ff",no=Bc+Hc+mi,io="\\u2700-\\u27bf",zr="a-z\\xdf-\\xf6\\xf8-\\xff",jc="\\xac\\xb1\\xd7\\xf7",qc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",zc="\\u2000-\\u206f",Kc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",so="A-Z\\xc0-\\xd6\\xd8-\\xde",oo="\\ufe0e\\ufe0f",Jn=jc+qc+zc+Kc,us="['\u2019]",Xn="["+wi+"]",fs="["+Jn+"]",Zn="["+no+"]",ao="\\d+",Gc="["+io+"]",co="["+zr+"]",uo="[^"+wi+Jn+ao+io+zr+so+"]",Ei="\\ud83c[\\udffb-\\udfff]",Wc="(?:"+Zn+"|"+Ei+")",fo="[^"+wi+"]",Si="(?:\\ud83c[\\udde6-\\uddff]){2}",In="[\\ud800-\\udbff][\\udc00-\\udfff]",Sr="["+so+"]",ho="\\u200d",lo="(?:"+co+"|"+uo+")",Qr="(?:"+Sr+"|"+uo+")",po="(?:"+us+"(?:d|ll|m|re|s|t|ve))?",go="(?:"+us+"(?:D|LL|M|RE|S|T|VE))?",_o=Wc+"?",yo="["+oo+"]?",Vc="(?:"+ho+"(?:"+[fo,Si,In].join("|")+")"+yo+_o+")*",fn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vo="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",bo=yo+_o+Vc,Di="(?:"+[Gc,Si,In].join("|")+")"+bo,Yc="(?:"+[fo+Zn+"?",Zn,Si,In,Xn].join("|")+")",hs=RegExp(us,"g"),kc=RegExp(Zn,"g"),xi=RegExp(Ei+"(?="+Ei+")|"+Yc+bo,"g"),wo=RegExp([Sr+"?"+co+"+"+po+"(?="+[fs,Sr,"$"].join("|")+")",Qr+"+"+go+"(?="+[fs,Sr+lo,"$"].join("|")+")",Sr+"?"+lo+"+"+po,Sr+"+"+go,vo,fn,ao,Di].join("|"),"g"),mo=RegExp("["+ho+wi+no+oo+"]"),Qn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Eo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Jc=-1,at={};at[ze]=at[Ie]=at[We]=at[Ye]=at[et]=at[tt]=at[Xe]=at[cr]=at[_r]=!0,at[he]=at[ve]=at[De]=at[H]=at[Pe]=at[F]=at[A]=at[ae]=at[xe]=at[qe]=at[$e]=at[Be]=at[Oe]=at[Le]=at[Ae]=!1;var ot={};ot[he]=ot[ve]=ot[De]=ot[Pe]=ot[H]=ot[F]=ot[ze]=ot[Ie]=ot[We]=ot[Ye]=ot[et]=ot[xe]=ot[qe]=ot[$e]=ot[Be]=ot[Oe]=ot[Le]=ot[Fe]=ot[tt]=ot[Xe]=ot[cr]=ot[_r]=!0,ot[A]=ot[ae]=ot[Ae]=!1;var S={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},te={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,Ce=parseInt,dt=typeof wt=="object"&&wt&&wt.Object===Object&&wt,zt=typeof self=="object"&&self&&self.Object===Object&&self,Ze=dt||zt||Function("return this")(),ut=e&&!e.nodeType&&e,Nt=ut&&!0&&n&&!n.nodeType&&n,yr=Nt&&Nt.exports===ut,Kt=yr&&dt.process,pt=function(){try{var U=Nt&&Nt.require&&Nt.require("util").types;return U||Kt&&Kt.binding&&Kt.binding("util")}catch{}}(),fr=pt&&pt.isArrayBuffer,Kr=pt&&pt.isDate,Nr=pt&&pt.isMap,en=pt&&pt.isRegExp,ls=pt&&pt.isSet,ei=pt&&pt.isTypedArray;function Yt(U,Y,z){switch(z.length){case 0:return U.call(Y);case 1:return U.call(Y,z[0]);case 2:return U.call(Y,z[0],z[1]);case 3:return U.call(Y,z[0],z[1],z[2])}return U.apply(Y,z)}function k3(U,Y,z,ge){for(var Te=-1,rt=U==null?0:U.length;++Te<rt;){var Gt=U[Te];Y(ge,Gt,z(Gt),U)}return ge}function Lr(U,Y){for(var z=-1,ge=U==null?0:U.length;++z<ge&&Y(U[z],z,U)!==!1;);return U}function J3(U,Y){for(var z=U==null?0:U.length;z--&&Y(U[z],z,U)!==!1;);return U}function md(U,Y){for(var z=-1,ge=U==null?0:U.length;++z<ge;)if(!Y(U[z],z,U))return!1;return!0}function An(U,Y){for(var z=-1,ge=U==null?0:U.length,Te=0,rt=[];++z<ge;){var Gt=U[z];Y(Gt,z,U)&&(rt[Te++]=Gt)}return rt}function So(U,Y){var z=U==null?0:U.length;return!!z&&Oi(U,Y,0)>-1}function Xc(U,Y,z){for(var ge=-1,Te=U==null?0:U.length;++ge<Te;)if(z(Y,U[ge]))return!0;return!1}function bt(U,Y){for(var z=-1,ge=U==null?0:U.length,Te=Array(ge);++z<ge;)Te[z]=Y(U[z],z,U);return Te}function Pn(U,Y){for(var z=-1,ge=Y.length,Te=U.length;++z<ge;)U[Te+z]=Y[z];return U}function Zc(U,Y,z,ge){var Te=-1,rt=U==null?0:U.length;for(ge&&rt&&(z=U[++Te]);++Te<rt;)z=Y(z,U[Te],Te,U);return z}function X3(U,Y,z,ge){var Te=U==null?0:U.length;for(ge&&Te&&(z=U[--Te]);Te--;)z=Y(z,U[Te],Te,U);return z}function Qc(U,Y){for(var z=-1,ge=U==null?0:U.length;++z<ge;)if(Y(U[z],z,U))return!0;return!1}var Z3=eu("length");function Q3(U){return U.split("")}function e2(U){return U.match(qt)||[]}function Ed(U,Y,z){var ge;return z(U,function(Te,rt,Gt){if(Y(Te,rt,Gt))return ge=rt,!1}),ge}function Do(U,Y,z,ge){for(var Te=U.length,rt=z+(ge?1:-1);ge?rt--:++rt<Te;)if(Y(U[rt],rt,U))return rt;return-1}function Oi(U,Y,z){return Y===Y?l2(U,Y,z):Do(U,Sd,z)}function t2(U,Y,z,ge){for(var Te=z-1,rt=U.length;++Te<rt;)if(ge(U[Te],Y))return Te;return-1}function Sd(U){return U!==U}function Dd(U,Y){var z=U==null?0:U.length;return z?ru(U,Y)/z:J}function eu(U){return function(Y){return Y==null?t:Y[U]}}function tu(U){return function(Y){return U==null?t:U[Y]}}function xd(U,Y,z,ge,Te){return Te(U,function(rt,Gt,ft){z=ge?(ge=!1,rt):Y(z,rt,Gt,ft)}),z}function r2(U,Y){var z=U.length;for(U.sort(Y);z--;)U[z]=U[z].value;return U}function ru(U,Y){for(var z,ge=-1,Te=U.length;++ge<Te;){var rt=Y(U[ge]);rt!==t&&(z=z===t?rt:z+rt)}return z}function nu(U,Y){for(var z=-1,ge=Array(U);++z<U;)ge[z]=Y(z);return ge}function n2(U,Y){return bt(Y,function(z){return[z,U[z]]})}function Od(U){return U&&U.slice(0,Td(U)+1).replace(At,"")}function Dr(U){return function(Y){return U(Y)}}function iu(U,Y){return bt(Y,function(z){return U[z]})}function ds(U,Y){return U.has(Y)}function Id(U,Y){for(var z=-1,ge=U.length;++z<ge&&Oi(Y,U[z],0)>-1;);return z}function Ad(U,Y){for(var z=U.length;z--&&Oi(Y,U[z],0)>-1;);return z}function i2(U,Y){for(var z=U.length,ge=0;z--;)U[z]===Y&&++ge;return ge}var s2=tu(S),o2=tu($);function a2(U){return"\\"+pe[U]}function c2(U,Y){return U==null?t:U[Y]}function Ii(U){return mo.test(U)}function u2(U){return Qn.test(U)}function f2(U){for(var Y,z=[];!(Y=U.next()).done;)z.push(Y.value);return z}function su(U){var Y=-1,z=Array(U.size);return U.forEach(function(ge,Te){z[++Y]=[Te,ge]}),z}function Pd(U,Y){return function(z){return U(Y(z))}}function Tn(U,Y){for(var z=-1,ge=U.length,Te=0,rt=[];++z<ge;){var Gt=U[z];(Gt===Y||Gt===E)&&(U[z]=E,rt[Te++]=z)}return rt}function xo(U){var Y=-1,z=Array(U.size);return U.forEach(function(ge){z[++Y]=ge}),z}function h2(U){var Y=-1,z=Array(U.size);return U.forEach(function(ge){z[++Y]=[ge,ge]}),z}function l2(U,Y,z){for(var ge=z-1,Te=U.length;++ge<Te;)if(U[ge]===Y)return ge;return-1}function d2(U,Y,z){for(var ge=z+1;ge--;)if(U[ge]===Y)return ge;return ge}function Ai(U){return Ii(U)?g2(U):Z3(U)}function Gr(U){return Ii(U)?_2(U):Q3(U)}function Td(U){for(var Y=U.length;Y--&&Rt.test(U.charAt(Y)););return Y}var p2=tu(te);function g2(U){for(var Y=xi.lastIndex=0;xi.test(U);)++Y;return Y}function _2(U){return U.match(xi)||[]}function y2(U){return U.match(wo)||[]}var v2=function U(Y){Y=Y==null?Ze:Pi.defaults(Ze.Object(),Y,Pi.pick(Ze,Eo));var z=Y.Array,ge=Y.Date,Te=Y.Error,rt=Y.Function,Gt=Y.Math,ft=Y.Object,ou=Y.RegExp,b2=Y.String,Fr=Y.TypeError,Oo=z.prototype,w2=rt.prototype,Ti=ft.prototype,Io=Y["__core-js_shared__"],Ao=w2.toString,it=Ti.hasOwnProperty,m2=0,Cd=function(){var r=/[^.]+$/.exec(Io&&Io.keys&&Io.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Po=Ti.toString,E2=Ao.call(ft),S2=Ze._,D2=ou("^"+Ao.call(it).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),To=yr?Y.Buffer:t,Cn=Y.Symbol,Co=Y.Uint8Array,Rd=To?To.allocUnsafe:t,Ro=Pd(ft.getPrototypeOf,ft),Nd=ft.create,Ld=Ti.propertyIsEnumerable,No=Oo.splice,Fd=Cn?Cn.isConcatSpreadable:t,ps=Cn?Cn.iterator:t,ti=Cn?Cn.toStringTag:t,Lo=function(){try{var r=oi(ft,"defineProperty");return r({},"",{}),r}catch{}}(),x2=Y.clearTimeout!==Ze.clearTimeout&&Y.clearTimeout,O2=ge&&ge.now!==Ze.Date.now&&ge.now,I2=Y.setTimeout!==Ze.setTimeout&&Y.setTimeout,Fo=Gt.ceil,Uo=Gt.floor,au=ft.getOwnPropertySymbols,A2=To?To.isBuffer:t,Ud=Y.isFinite,P2=Oo.join,T2=Pd(ft.keys,ft),Wt=Gt.max,tr=Gt.min,C2=ge.now,R2=Y.parseInt,$d=Gt.random,N2=Oo.reverse,cu=oi(Y,"DataView"),gs=oi(Y,"Map"),uu=oi(Y,"Promise"),Ci=oi(Y,"Set"),_s=oi(Y,"WeakMap"),ys=oi(ft,"create"),$o=_s&&new _s,Ri={},L2=ai(cu),F2=ai(gs),U2=ai(uu),$2=ai(Ci),M2=ai(_s),Mo=Cn?Cn.prototype:t,vs=Mo?Mo.valueOf:t,Md=Mo?Mo.toString:t;function y(r){if(Tt(r)&&!Re(r)&&!(r instanceof ke)){if(r instanceof Ur)return r;if(it.call(r,"__wrapped__"))return Bp(r)}return new Ur(r)}var Ni=function(){function r(){}return function(i){if(!Et(i))return{};if(Nd)return Nd(i);r.prototype=i;var a=new r;return r.prototype=t,a}}();function Bo(){}function Ur(r,i){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=t}y.templateSettings={escape:xt,evaluate:Ot,interpolate:mt,variable:"",imports:{_:y}},y.prototype=Bo.prototype,y.prototype.constructor=y,Ur.prototype=Ni(Bo.prototype),Ur.prototype.constructor=Ur;function ke(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function B2(){var r=new ke(this.__wrapped__);return r.__actions__=vr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=vr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=vr(this.__views__),r}function H2(){if(this.__filtered__){var r=new ke(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function j2(){var r=this.__wrapped__.value(),i=this.__dir__,a=Re(r),h=i<0,g=a?r.length:0,v=Q6(0,g,this.__views__),O=v.start,N=v.end,B=N-O,Z=h?N:O-1,Q=this.__iteratees__,ne=Q.length,ue=0,_e=tr(B,this.__takeCount__);if(!a||!h&&g==B&&_e==B)return cp(r,this.__actions__);var Ee=[];e:for(;B--&&ue<_e;){Z+=i;for(var je=-1,Se=r[Z];++je<ne;){var Ve=Q[je],Qe=Ve.iteratee,Ir=Ve.type,dr=Qe(Se);if(Ir==I)Se=dr;else if(!dr){if(Ir==w)continue e;break e}}Ee[ue++]=Se}return Ee}ke.prototype=Ni(Bo.prototype),ke.prototype.constructor=ke;function ri(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var h=r[i];this.set(h[0],h[1])}}function q2(){this.__data__=ys?ys(null):{},this.size=0}function z2(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i}function K2(r){var i=this.__data__;if(ys){var a=i[r];return a===_?t:a}return it.call(i,r)?i[r]:t}function G2(r){var i=this.__data__;return ys?i[r]!==t:it.call(i,r)}function W2(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=ys&&i===t?_:i,this}ri.prototype.clear=q2,ri.prototype.delete=z2,ri.prototype.get=K2,ri.prototype.has=G2,ri.prototype.set=W2;function hn(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var h=r[i];this.set(h[0],h[1])}}function V2(){this.__data__=[],this.size=0}function Y2(r){var i=this.__data__,a=Ho(i,r);if(a<0)return!1;var h=i.length-1;return a==h?i.pop():No.call(i,a,1),--this.size,!0}function k2(r){var i=this.__data__,a=Ho(i,r);return a<0?t:i[a][1]}function J2(r){return Ho(this.__data__,r)>-1}function X2(r,i){var a=this.__data__,h=Ho(a,r);return h<0?(++this.size,a.push([r,i])):a[h][1]=i,this}hn.prototype.clear=V2,hn.prototype.delete=Y2,hn.prototype.get=k2,hn.prototype.has=J2,hn.prototype.set=X2;function ln(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var h=r[i];this.set(h[0],h[1])}}function Z2(){this.size=0,this.__data__={hash:new ri,map:new(gs||hn),string:new ri}}function Q2(r){var i=Zo(this,r).delete(r);return this.size-=i?1:0,i}function e6(r){return Zo(this,r).get(r)}function t6(r){return Zo(this,r).has(r)}function r6(r,i){var a=Zo(this,r),h=a.size;return a.set(r,i),this.size+=a.size==h?0:1,this}ln.prototype.clear=Z2,ln.prototype.delete=Q2,ln.prototype.get=e6,ln.prototype.has=t6,ln.prototype.set=r6;function ni(r){var i=-1,a=r==null?0:r.length;for(this.__data__=new ln;++i<a;)this.add(r[i])}function n6(r){return this.__data__.set(r,_),this}function i6(r){return this.__data__.has(r)}ni.prototype.add=ni.prototype.push=n6,ni.prototype.has=i6;function Wr(r){var i=this.__data__=new hn(r);this.size=i.size}function s6(){this.__data__=new hn,this.size=0}function o6(r){var i=this.__data__,a=i.delete(r);return this.size=i.size,a}function a6(r){return this.__data__.get(r)}function c6(r){return this.__data__.has(r)}function u6(r,i){var a=this.__data__;if(a instanceof hn){var h=a.__data__;if(!gs||h.length<o-1)return h.push([r,i]),this.size=++a.size,this;a=this.__data__=new ln(h)}return a.set(r,i),this.size=a.size,this}Wr.prototype.clear=s6,Wr.prototype.delete=o6,Wr.prototype.get=a6,Wr.prototype.has=c6,Wr.prototype.set=u6;function Bd(r,i){var a=Re(r),h=!a&&ci(r),g=!a&&!h&&Un(r),v=!a&&!h&&!g&&$i(r),O=a||h||g||v,N=O?nu(r.length,b2):[],B=N.length;for(var Z in r)(i||it.call(r,Z))&&!(O&&(Z=="length"||g&&(Z=="offset"||Z=="parent")||v&&(Z=="buffer"||Z=="byteLength"||Z=="byteOffset")||_n(Z,B)))&&N.push(Z);return N}function Hd(r){var i=r.length;return i?r[wu(0,i-1)]:t}function f6(r,i){return Qo(vr(r),ii(i,0,r.length))}function h6(r){return Qo(vr(r))}function fu(r,i,a){(a!==t&&!Vr(r[i],a)||a===t&&!(i in r))&&dn(r,i,a)}function bs(r,i,a){var h=r[i];(!(it.call(r,i)&&Vr(h,a))||a===t&&!(i in r))&&dn(r,i,a)}function Ho(r,i){for(var a=r.length;a--;)if(Vr(r[a][0],i))return a;return-1}function l6(r,i,a,h){return Rn(r,function(g,v,O){i(h,g,a(g),O)}),h}function jd(r,i){return r&&rn(i,kt(i),r)}function d6(r,i){return r&&rn(i,wr(i),r)}function dn(r,i,a){i=="__proto__"&&Lo?Lo(r,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[i]=a}function hu(r,i){for(var a=-1,h=i.length,g=z(h),v=r==null;++a<h;)g[a]=v?t:Gu(r,i[a]);return g}function ii(r,i,a){return r===r&&(a!==t&&(r=r<=a?r:a),i!==t&&(r=r>=i?r:i)),r}function $r(r,i,a,h,g,v){var O,N=i&T,B=i&D,Z=i&C;if(a&&(O=g?a(r,h,g,v):a(r)),O!==t)return O;if(!Et(r))return r;var Q=Re(r);if(Q){if(O=tS(r),!N)return vr(r,O)}else{var ne=rr(r),ue=ne==ae||ne==le;if(Un(r))return hp(r,N);if(ne==$e||ne==he||ue&&!g){if(O=B||ue?{}:Tp(r),!N)return B?K6(r,d6(O,r)):z6(r,jd(O,r))}else{if(!ot[ne])return g?r:{};O=rS(r,ne,N)}}v||(v=new Wr);var _e=v.get(r);if(_e)return _e;v.set(r,O),sg(r)?r.forEach(function(Se){O.add($r(Se,i,a,Se,r,v))}):ng(r)&&r.forEach(function(Se,Ve){O.set(Ve,$r(Se,i,a,Ve,r,v))});var Ee=Z?B?Cu:Tu:B?wr:kt,je=Q?t:Ee(r);return Lr(je||r,function(Se,Ve){je&&(Ve=Se,Se=r[Ve]),bs(O,Ve,$r(Se,i,a,Ve,r,v))}),O}function p6(r){var i=kt(r);return function(a){return qd(a,r,i)}}function qd(r,i,a){var h=a.length;if(r==null)return!h;for(r=ft(r);h--;){var g=a[h],v=i[g],O=r[g];if(O===t&&!(g in r)||!v(O))return!1}return!0}function zd(r,i,a){if(typeof r!="function")throw new Fr(f);return Os(function(){r.apply(t,a)},i)}function ws(r,i,a,h){var g=-1,v=So,O=!0,N=r.length,B=[],Z=i.length;if(!N)return B;a&&(i=bt(i,Dr(a))),h?(v=Xc,O=!1):i.length>=o&&(v=ds,O=!1,i=new ni(i));e:for(;++g<N;){var Q=r[g],ne=a==null?Q:a(Q);if(Q=h||Q!==0?Q:0,O&&ne===ne){for(var ue=Z;ue--;)if(i[ue]===ne)continue e;B.push(Q)}else v(i,ne,h)||B.push(Q)}return B}var Rn=_p(tn),Kd=_p(du,!0);function g6(r,i){var a=!0;return Rn(r,function(h,g,v){return a=!!i(h,g,v),a}),a}function jo(r,i,a){for(var h=-1,g=r.length;++h<g;){var v=r[h],O=i(v);if(O!=null&&(N===t?O===O&&!Or(O):a(O,N)))var N=O,B=v}return B}function _6(r,i,a,h){var g=r.length;for(a=Me(a),a<0&&(a=-a>g?0:g+a),h=h===t||h>g?g:Me(h),h<0&&(h+=g),h=a>h?0:ag(h);a<h;)r[a++]=i;return r}function Gd(r,i){var a=[];return Rn(r,function(h,g,v){i(h,g,v)&&a.push(h)}),a}function Zt(r,i,a,h,g){var v=-1,O=r.length;for(a||(a=iS),g||(g=[]);++v<O;){var N=r[v];i>0&&a(N)?i>1?Zt(N,i-1,a,h,g):Pn(g,N):h||(g[g.length]=N)}return g}var lu=yp(),Wd=yp(!0);function tn(r,i){return r&&lu(r,i,kt)}function du(r,i){return r&&Wd(r,i,kt)}function qo(r,i){return An(i,function(a){return yn(r[a])})}function si(r,i){i=Ln(i,r);for(var a=0,h=i.length;r!=null&&a<h;)r=r[nn(i[a++])];return a&&a==h?r:t}function Vd(r,i,a){var h=i(r);return Re(r)?h:Pn(h,a(r))}function hr(r){return r==null?r===t?He:Ge:ti&&ti in ft(r)?Z6(r):hS(r)}function pu(r,i){return r>i}function y6(r,i){return r!=null&&it.call(r,i)}function v6(r,i){return r!=null&&i in ft(r)}function b6(r,i,a){return r>=tr(i,a)&&r<Wt(i,a)}function gu(r,i,a){for(var h=a?Xc:So,g=r[0].length,v=r.length,O=v,N=z(v),B=1/0,Z=[];O--;){var Q=r[O];O&&i&&(Q=bt(Q,Dr(i))),B=tr(Q.length,B),N[O]=!a&&(i||g>=120&&Q.length>=120)?new ni(O&&Q):t}Q=r[0];var ne=-1,ue=N[0];e:for(;++ne<g&&Z.length<B;){var _e=Q[ne],Ee=i?i(_e):_e;if(_e=a||_e!==0?_e:0,!(ue?ds(ue,Ee):h(Z,Ee,a))){for(O=v;--O;){var je=N[O];if(!(je?ds(je,Ee):h(r[O],Ee,a)))continue e}ue&&ue.push(Ee),Z.push(_e)}}return Z}function w6(r,i,a,h){return tn(r,function(g,v,O){i(h,a(g),v,O)}),h}function ms(r,i,a){i=Ln(i,r),r=Lp(r,i);var h=r==null?r:r[nn(Br(i))];return h==null?t:Yt(h,r,a)}function Yd(r){return Tt(r)&&hr(r)==he}function m6(r){return Tt(r)&&hr(r)==De}function E6(r){return Tt(r)&&hr(r)==F}function Es(r,i,a,h,g){return r===i?!0:r==null||i==null||!Tt(r)&&!Tt(i)?r!==r&&i!==i:S6(r,i,a,h,Es,g)}function S6(r,i,a,h,g,v){var O=Re(r),N=Re(i),B=O?ve:rr(r),Z=N?ve:rr(i);B=B==he?$e:B,Z=Z==he?$e:Z;var Q=B==$e,ne=Z==$e,ue=B==Z;if(ue&&Un(r)){if(!Un(i))return!1;O=!0,Q=!1}if(ue&&!Q)return v||(v=new Wr),O||$i(r)?Ip(r,i,a,h,g,v):J6(r,i,B,a,h,g,v);if(!(a&R)){var _e=Q&&it.call(r,"__wrapped__"),Ee=ne&&it.call(i,"__wrapped__");if(_e||Ee){var je=_e?r.value():r,Se=Ee?i.value():i;return v||(v=new Wr),g(je,Se,a,h,v)}}return ue?(v||(v=new Wr),X6(r,i,a,h,g,v)):!1}function D6(r){return Tt(r)&&rr(r)==xe}function _u(r,i,a,h){var g=a.length,v=g,O=!h;if(r==null)return!v;for(r=ft(r);g--;){var N=a[g];if(O&&N[2]?N[1]!==r[N[0]]:!(N[0]in r))return!1}for(;++g<v;){N=a[g];var B=N[0],Z=r[B],Q=N[1];if(O&&N[2]){if(Z===t&&!(B in r))return!1}else{var ne=new Wr;if(h)var ue=h(Z,Q,B,r,i,ne);if(!(ue===t?Es(Q,Z,R|q,h,ne):ue))return!1}}return!0}function kd(r){if(!Et(r)||oS(r))return!1;var i=yn(r)?D2:Fc;return i.test(ai(r))}function x6(r){return Tt(r)&&hr(r)==Be}function O6(r){return Tt(r)&&rr(r)==Oe}function I6(r){return Tt(r)&&sa(r.length)&&!!at[hr(r)]}function Jd(r){return typeof r=="function"?r:r==null?mr:typeof r=="object"?Re(r)?Qd(r[0],r[1]):Zd(r):vg(r)}function yu(r){if(!xs(r))return T2(r);var i=[];for(var a in ft(r))it.call(r,a)&&a!="constructor"&&i.push(a);return i}function A6(r){if(!Et(r))return fS(r);var i=xs(r),a=[];for(var h in r)h=="constructor"&&(i||!it.call(r,h))||a.push(h);return a}function vu(r,i){return r<i}function Xd(r,i){var a=-1,h=br(r)?z(r.length):[];return Rn(r,function(g,v,O){h[++a]=i(g,v,O)}),h}function Zd(r){var i=Nu(r);return i.length==1&&i[0][2]?Rp(i[0][0],i[0][1]):function(a){return a===r||_u(a,r,i)}}function Qd(r,i){return Fu(r)&&Cp(i)?Rp(nn(r),i):function(a){var h=Gu(a,r);return h===t&&h===i?Wu(a,r):Es(i,h,R|q)}}function zo(r,i,a,h,g){r!==i&&lu(i,function(v,O){if(g||(g=new Wr),Et(v))P6(r,i,O,a,zo,h,g);else{var N=h?h($u(r,O),v,O+"",r,i,g):t;N===t&&(N=v),fu(r,O,N)}},wr)}function P6(r,i,a,h,g,v,O){var N=$u(r,a),B=$u(i,a),Z=O.get(B);if(Z){fu(r,a,Z);return}var Q=v?v(N,B,a+"",r,i,O):t,ne=Q===t;if(ne){var ue=Re(B),_e=!ue&&Un(B),Ee=!ue&&!_e&&$i(B);Q=B,ue||_e||Ee?Re(N)?Q=N:Lt(N)?Q=vr(N):_e?(ne=!1,Q=hp(B,!0)):Ee?(ne=!1,Q=lp(B,!0)):Q=[]:Is(B)||ci(B)?(Q=N,ci(N)?Q=cg(N):(!Et(N)||yn(N))&&(Q=Tp(B))):ne=!1}ne&&(O.set(B,Q),g(Q,B,h,v,O),O.delete(B)),fu(r,a,Q)}function ep(r,i){var a=r.length;if(a)return i+=i<0?a:0,_n(i,a)?r[i]:t}function tp(r,i,a){i.length?i=bt(i,function(v){return Re(v)?function(O){return si(O,v.length===1?v[0]:v)}:v}):i=[mr];var h=-1;i=bt(i,Dr(be()));var g=Xd(r,function(v,O,N){var B=bt(i,function(Z){return Z(v)});return{criteria:B,index:++h,value:v}});return r2(g,function(v,O){return q6(v,O,a)})}function T6(r,i){return rp(r,i,function(a,h){return Wu(r,h)})}function rp(r,i,a){for(var h=-1,g=i.length,v={};++h<g;){var O=i[h],N=si(r,O);a(N,O)&&Ss(v,Ln(O,r),N)}return v}function C6(r){return function(i){return si(i,r)}}function bu(r,i,a,h){var g=h?t2:Oi,v=-1,O=i.length,N=r;for(r===i&&(i=vr(i)),a&&(N=bt(r,Dr(a)));++v<O;)for(var B=0,Z=i[v],Q=a?a(Z):Z;(B=g(N,Q,B,h))>-1;)N!==r&&No.call(N,B,1),No.call(r,B,1);return r}function np(r,i){for(var a=r?i.length:0,h=a-1;a--;){var g=i[a];if(a==h||g!==v){var v=g;_n(g)?No.call(r,g,1):Su(r,g)}}return r}function wu(r,i){return r+Uo($d()*(i-r+1))}function R6(r,i,a,h){for(var g=-1,v=Wt(Fo((i-r)/(a||1)),0),O=z(v);v--;)O[h?v:++g]=r,r+=a;return O}function mu(r,i){var a="";if(!r||i<1||i>G)return a;do i%2&&(a+=r),i=Uo(i/2),i&&(r+=r);while(i);return a}function Ke(r,i){return Mu(Np(r,i,mr),r+"")}function N6(r){return Hd(Mi(r))}function L6(r,i){var a=Mi(r);return Qo(a,ii(i,0,a.length))}function Ss(r,i,a,h){if(!Et(r))return r;i=Ln(i,r);for(var g=-1,v=i.length,O=v-1,N=r;N!=null&&++g<v;){var B=nn(i[g]),Z=a;if(B==="__proto__"||B==="constructor"||B==="prototype")return r;if(g!=O){var Q=N[B];Z=h?h(Q,B,N):t,Z===t&&(Z=Et(Q)?Q:_n(i[g+1])?[]:{})}bs(N,B,Z),N=N[B]}return r}var ip=$o?function(r,i){return $o.set(r,i),r}:mr,F6=Lo?function(r,i){return Lo(r,"toString",{configurable:!0,enumerable:!1,value:Yu(i),writable:!0})}:mr;function U6(r){return Qo(Mi(r))}function Mr(r,i,a){var h=-1,g=r.length;i<0&&(i=-i>g?0:g+i),a=a>g?g:a,a<0&&(a+=g),g=i>a?0:a-i>>>0,i>>>=0;for(var v=z(g);++h<g;)v[h]=r[h+i];return v}function $6(r,i){var a;return Rn(r,function(h,g,v){return a=i(h,g,v),!a}),!!a}function Ko(r,i,a){var h=0,g=r==null?h:r.length;if(typeof i=="number"&&i===i&&g<=oe){for(;h<g;){var v=h+g>>>1,O=r[v];O!==null&&!Or(O)&&(a?O<=i:O<i)?h=v+1:g=v}return g}return Eu(r,i,mr,a)}function Eu(r,i,a,h){var g=0,v=r==null?0:r.length;if(v===0)return 0;i=a(i);for(var O=i!==i,N=i===null,B=Or(i),Z=i===t;g<v;){var Q=Uo((g+v)/2),ne=a(r[Q]),ue=ne!==t,_e=ne===null,Ee=ne===ne,je=Or(ne);if(O)var Se=h||Ee;else Z?Se=Ee&&(h||ue):N?Se=Ee&&ue&&(h||!_e):B?Se=Ee&&ue&&!_e&&(h||!je):_e||je?Se=!1:Se=h?ne<=i:ne<i;Se?g=Q+1:v=Q}return tr(v,we)}function sp(r,i){for(var a=-1,h=r.length,g=0,v=[];++a<h;){var O=r[a],N=i?i(O):O;if(!a||!Vr(N,B)){var B=N;v[g++]=O===0?0:O}}return v}function op(r){return typeof r=="number"?r:Or(r)?J:+r}function xr(r){if(typeof r=="string")return r;if(Re(r))return bt(r,xr)+"";if(Or(r))return Md?Md.call(r):"";var i=r+"";return i=="0"&&1/r==-X?"-0":i}function Nn(r,i,a){var h=-1,g=So,v=r.length,O=!0,N=[],B=N;if(a)O=!1,g=Xc;else if(v>=o){var Z=i?null:Y6(r);if(Z)return xo(Z);O=!1,g=ds,B=new ni}else B=i?[]:N;e:for(;++h<v;){var Q=r[h],ne=i?i(Q):Q;if(Q=a||Q!==0?Q:0,O&&ne===ne){for(var ue=B.length;ue--;)if(B[ue]===ne)continue e;i&&B.push(ne),N.push(Q)}else g(B,ne,a)||(B!==N&&B.push(ne),N.push(Q))}return N}function Su(r,i){return i=Ln(i,r),r=Lp(r,i),r==null||delete r[nn(Br(i))]}function ap(r,i,a,h){return Ss(r,i,a(si(r,i)),h)}function Go(r,i,a,h){for(var g=r.length,v=h?g:-1;(h?v--:++v<g)&&i(r[v],v,r););return a?Mr(r,h?0:v,h?v+1:g):Mr(r,h?v+1:0,h?g:v)}function cp(r,i){var a=r;return a instanceof ke&&(a=a.value()),Zc(i,function(h,g){return g.func.apply(g.thisArg,Pn([h],g.args))},a)}function Du(r,i,a){var h=r.length;if(h<2)return h?Nn(r[0]):[];for(var g=-1,v=z(h);++g<h;)for(var O=r[g],N=-1;++N<h;)N!=g&&(v[g]=ws(v[g]||O,r[N],i,a));return Nn(Zt(v,1),i,a)}function up(r,i,a){for(var h=-1,g=r.length,v=i.length,O={};++h<g;){var N=h<v?i[h]:t;a(O,r[h],N)}return O}function xu(r){return Lt(r)?r:[]}function Ou(r){return typeof r=="function"?r:mr}function Ln(r,i){return Re(r)?r:Fu(r,i)?[r]:Mp(nt(r))}var M6=Ke;function Fn(r,i,a){var h=r.length;return a=a===t?h:a,!i&&a>=h?r:Mr(r,i,a)}var fp=x2||function(r){return Ze.clearTimeout(r)};function hp(r,i){if(i)return r.slice();var a=r.length,h=Rd?Rd(a):new r.constructor(a);return r.copy(h),h}function Iu(r){var i=new r.constructor(r.byteLength);return new Co(i).set(new Co(r)),i}function B6(r,i){var a=i?Iu(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function H6(r){var i=new r.constructor(r.source,Rr.exec(r));return i.lastIndex=r.lastIndex,i}function j6(r){return vs?ft(vs.call(r)):{}}function lp(r,i){var a=i?Iu(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function dp(r,i){if(r!==i){var a=r!==t,h=r===null,g=r===r,v=Or(r),O=i!==t,N=i===null,B=i===i,Z=Or(i);if(!N&&!Z&&!v&&r>i||v&&O&&B&&!N&&!Z||h&&O&&B||!a&&B||!g)return 1;if(!h&&!v&&!Z&&r<i||Z&&a&&g&&!h&&!v||N&&a&&g||!O&&g||!B)return-1}return 0}function q6(r,i,a){for(var h=-1,g=r.criteria,v=i.criteria,O=g.length,N=a.length;++h<O;){var B=dp(g[h],v[h]);if(B){if(h>=N)return B;var Z=a[h];return B*(Z=="desc"?-1:1)}}return r.index-i.index}function pp(r,i,a,h){for(var g=-1,v=r.length,O=a.length,N=-1,B=i.length,Z=Wt(v-O,0),Q=z(B+Z),ne=!h;++N<B;)Q[N]=i[N];for(;++g<O;)(ne||g<v)&&(Q[a[g]]=r[g]);for(;Z--;)Q[N++]=r[g++];return Q}function gp(r,i,a,h){for(var g=-1,v=r.length,O=-1,N=a.length,B=-1,Z=i.length,Q=Wt(v-N,0),ne=z(Q+Z),ue=!h;++g<Q;)ne[g]=r[g];for(var _e=g;++B<Z;)ne[_e+B]=i[B];for(;++O<N;)(ue||g<v)&&(ne[_e+a[O]]=r[g++]);return ne}function vr(r,i){var a=-1,h=r.length;for(i||(i=z(h));++a<h;)i[a]=r[a];return i}function rn(r,i,a,h){var g=!a;a||(a={});for(var v=-1,O=i.length;++v<O;){var N=i[v],B=h?h(a[N],r[N],N,a,r):t;B===t&&(B=r[N]),g?dn(a,N,B):bs(a,N,B)}return a}function z6(r,i){return rn(r,Lu(r),i)}function K6(r,i){return rn(r,Ap(r),i)}function Wo(r,i){return function(a,h){var g=Re(a)?k3:l6,v=i?i():{};return g(a,r,be(h,2),v)}}function Li(r){return Ke(function(i,a){var h=-1,g=a.length,v=g>1?a[g-1]:t,O=g>2?a[2]:t;for(v=r.length>3&&typeof v=="function"?(g--,v):t,O&&lr(a[0],a[1],O)&&(v=g<3?t:v,g=1),i=ft(i);++h<g;){var N=a[h];N&&r(i,N,h,v)}return i})}function _p(r,i){return function(a,h){if(a==null)return a;if(!br(a))return r(a,h);for(var g=a.length,v=i?g:-1,O=ft(a);(i?v--:++v<g)&&h(O[v],v,O)!==!1;);return a}}function yp(r){return function(i,a,h){for(var g=-1,v=ft(i),O=h(i),N=O.length;N--;){var B=O[r?N:++g];if(a(v[B],B,v)===!1)break}return i}}function G6(r,i,a){var h=i&K,g=Ds(r);function v(){var O=this&&this!==Ze&&this instanceof v?g:r;return O.apply(h?a:this,arguments)}return v}function vp(r){return function(i){i=nt(i);var a=Ii(i)?Gr(i):t,h=a?a[0]:i.charAt(0),g=a?Fn(a,1).join(""):i.slice(1);return h[r]()+g}}function Fi(r){return function(i){return Zc(_g(gg(i).replace(hs,"")),r,"")}}function Ds(r){return function(){var i=arguments;switch(i.length){case 0:return new r;case 1:return new r(i[0]);case 2:return new r(i[0],i[1]);case 3:return new r(i[0],i[1],i[2]);case 4:return new r(i[0],i[1],i[2],i[3]);case 5:return new r(i[0],i[1],i[2],i[3],i[4]);case 6:return new r(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new r(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=Ni(r.prototype),h=r.apply(a,i);return Et(h)?h:a}}function W6(r,i,a){var h=Ds(r);function g(){for(var v=arguments.length,O=z(v),N=v,B=Ui(g);N--;)O[N]=arguments[N];var Z=v<3&&O[0]!==B&&O[v-1]!==B?[]:Tn(O,B);if(v-=Z.length,v<a)return Sp(r,i,Vo,g.placeholder,t,O,Z,t,t,a-v);var Q=this&&this!==Ze&&this instanceof g?h:r;return Yt(Q,this,O)}return g}function bp(r){return function(i,a,h){var g=ft(i);if(!br(i)){var v=be(a,3);i=kt(i),a=function(N){return v(g[N],N,g)}}var O=r(i,a,h);return O>-1?g[v?i[O]:O]:t}}function wp(r){return gn(function(i){var a=i.length,h=a,g=Ur.prototype.thru;for(r&&i.reverse();h--;){var v=i[h];if(typeof v!="function")throw new Fr(f);if(g&&!O&&Xo(v)=="wrapper")var O=new Ur([],!0)}for(h=O?h:a;++h<a;){v=i[h];var N=Xo(v),B=N=="wrapper"?Ru(v):t;B&&Uu(B[0])&&B[1]==(u|M|P|b)&&!B[4].length&&B[9]==1?O=O[Xo(B[0])].apply(O,B[3]):O=v.length==1&&Uu(v)?O[N]():O.thru(v)}return function(){var Z=arguments,Q=Z[0];if(O&&Z.length==1&&Re(Q))return O.plant(Q).value();for(var ne=0,ue=a?i[ne].apply(this,Z):Q;++ne<a;)ue=i[ne].call(this,ue);return ue}})}function Vo(r,i,a,h,g,v,O,N,B,Z){var Q=i&u,ne=i&K,ue=i&se,_e=i&(M|x),Ee=i&V,je=ue?t:Ds(r);function Se(){for(var Ve=arguments.length,Qe=z(Ve),Ir=Ve;Ir--;)Qe[Ir]=arguments[Ir];if(_e)var dr=Ui(Se),Ar=i2(Qe,dr);if(h&&(Qe=pp(Qe,h,g,_e)),v&&(Qe=gp(Qe,v,O,_e)),Ve-=Ar,_e&&Ve<Z){var Ft=Tn(Qe,dr);return Sp(r,i,Vo,Se.placeholder,a,Qe,Ft,N,B,Z-Ve)}var Yr=ne?a:this,bn=ue?Yr[r]:r;return Ve=Qe.length,N?Qe=lS(Qe,N):Ee&&Ve>1&&Qe.reverse(),Q&&B<Ve&&(Qe.length=B),this&&this!==Ze&&this instanceof Se&&(bn=je||Ds(bn)),bn.apply(Yr,Qe)}return Se}function mp(r,i){return function(a,h){return w6(a,r,i(h),{})}}function Yo(r,i){return function(a,h){var g;if(a===t&&h===t)return i;if(a!==t&&(g=a),h!==t){if(g===t)return h;typeof a=="string"||typeof h=="string"?(a=xr(a),h=xr(h)):(a=op(a),h=op(h)),g=r(a,h)}return g}}function Au(r){return gn(function(i){return i=bt(i,Dr(be())),Ke(function(a){var h=this;return r(i,function(g){return Yt(g,h,a)})})})}function ko(r,i){i=i===t?" ":xr(i);var a=i.length;if(a<2)return a?mu(i,r):i;var h=mu(i,Fo(r/Ai(i)));return Ii(i)?Fn(Gr(h),0,r).join(""):h.slice(0,r)}function V6(r,i,a,h){var g=i&K,v=Ds(r);function O(){for(var N=-1,B=arguments.length,Z=-1,Q=h.length,ne=z(Q+B),ue=this&&this!==Ze&&this instanceof O?v:r;++Z<Q;)ne[Z]=h[Z];for(;B--;)ne[Z++]=arguments[++N];return Yt(ue,g?a:this,ne)}return O}function Ep(r){return function(i,a,h){return h&&typeof h!="number"&&lr(i,a,h)&&(a=h=t),i=vn(i),a===t?(a=i,i=0):a=vn(a),h=h===t?i<a?1:-1:vn(h),R6(i,a,h,r)}}function Jo(r){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=Hr(i),a=Hr(a)),r(i,a)}}function Sp(r,i,a,h,g,v,O,N,B,Z){var Q=i&M,ne=Q?O:t,ue=Q?t:O,_e=Q?v:t,Ee=Q?t:v;i|=Q?P:m,i&=~(Q?m:P),i&L||(i&=~(K|se));var je=[r,i,g,_e,ne,Ee,ue,N,B,Z],Se=a.apply(t,je);return Uu(r)&&Fp(Se,je),Se.placeholder=h,Up(Se,r,i)}function Pu(r){var i=Gt[r];return function(a,h){if(a=Hr(a),h=h==null?0:tr(Me(h),292),h&&Ud(a)){var g=(nt(a)+"e").split("e"),v=i(g[0]+"e"+(+g[1]+h));return g=(nt(v)+"e").split("e"),+(g[0]+"e"+(+g[1]-h))}return i(a)}}var Y6=Ci&&1/xo(new Ci([,-0]))[1]==X?function(r){return new Ci(r)}:Xu;function Dp(r){return function(i){var a=rr(i);return a==xe?su(i):a==Oe?h2(i):n2(i,r(i))}}function pn(r,i,a,h,g,v,O,N){var B=i&se;if(!B&&typeof r!="function")throw new Fr(f);var Z=h?h.length:0;if(Z||(i&=~(P|m),h=g=t),O=O===t?O:Wt(Me(O),0),N=N===t?N:Me(N),Z-=g?g.length:0,i&m){var Q=h,ne=g;h=g=t}var ue=B?t:Ru(r),_e=[r,i,a,h,g,Q,ne,v,O,N];if(ue&&uS(_e,ue),r=_e[0],i=_e[1],a=_e[2],h=_e[3],g=_e[4],N=_e[9]=_e[9]===t?B?0:r.length:Wt(_e[9]-Z,0),!N&&i&(M|x)&&(i&=~(M|x)),!i||i==K)var Ee=G6(r,i,a);else i==M||i==x?Ee=W6(r,i,N):(i==P||i==(K|P))&&!g.length?Ee=V6(r,i,a,h):Ee=Vo.apply(t,_e);var je=ue?ip:Fp;return Up(je(Ee,_e),r,i)}function xp(r,i,a,h){return r===t||Vr(r,Ti[a])&&!it.call(h,a)?i:r}function Op(r,i,a,h,g,v){return Et(r)&&Et(i)&&(v.set(i,r),zo(r,i,t,Op,v),v.delete(i)),r}function k6(r){return Is(r)?t:r}function Ip(r,i,a,h,g,v){var O=a&R,N=r.length,B=i.length;if(N!=B&&!(O&&B>N))return!1;var Z=v.get(r),Q=v.get(i);if(Z&&Q)return Z==i&&Q==r;var ne=-1,ue=!0,_e=a&q?new ni:t;for(v.set(r,i),v.set(i,r);++ne<N;){var Ee=r[ne],je=i[ne];if(h)var Se=O?h(je,Ee,ne,i,r,v):h(Ee,je,ne,r,i,v);if(Se!==t){if(Se)continue;ue=!1;break}if(_e){if(!Qc(i,function(Ve,Qe){if(!ds(_e,Qe)&&(Ee===Ve||g(Ee,Ve,a,h,v)))return _e.push(Qe)})){ue=!1;break}}else if(!(Ee===je||g(Ee,je,a,h,v))){ue=!1;break}}return v.delete(r),v.delete(i),ue}function J6(r,i,a,h,g,v,O){switch(a){case Pe:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)return!1;r=r.buffer,i=i.buffer;case De:return!(r.byteLength!=i.byteLength||!v(new Co(r),new Co(i)));case H:case F:case qe:return Vr(+r,+i);case A:return r.name==i.name&&r.message==i.message;case Be:case Le:return r==i+"";case xe:var N=su;case Oe:var B=h&R;if(N||(N=xo),r.size!=i.size&&!B)return!1;var Z=O.get(r);if(Z)return Z==i;h|=q,O.set(r,i);var Q=Ip(N(r),N(i),h,g,v,O);return O.delete(r),Q;case Fe:if(vs)return vs.call(r)==vs.call(i)}return!1}function X6(r,i,a,h,g,v){var O=a&R,N=Tu(r),B=N.length,Z=Tu(i),Q=Z.length;if(B!=Q&&!O)return!1;for(var ne=B;ne--;){var ue=N[ne];if(!(O?ue in i:it.call(i,ue)))return!1}var _e=v.get(r),Ee=v.get(i);if(_e&&Ee)return _e==i&&Ee==r;var je=!0;v.set(r,i),v.set(i,r);for(var Se=O;++ne<B;){ue=N[ne];var Ve=r[ue],Qe=i[ue];if(h)var Ir=O?h(Qe,Ve,ue,i,r,v):h(Ve,Qe,ue,r,i,v);if(!(Ir===t?Ve===Qe||g(Ve,Qe,a,h,v):Ir)){je=!1;break}Se||(Se=ue=="constructor")}if(je&&!Se){var dr=r.constructor,Ar=i.constructor;dr!=Ar&&"constructor"in r&&"constructor"in i&&!(typeof dr=="function"&&dr instanceof dr&&typeof Ar=="function"&&Ar instanceof Ar)&&(je=!1)}return v.delete(r),v.delete(i),je}function gn(r){return Mu(Np(r,t,qp),r+"")}function Tu(r){return Vd(r,kt,Lu)}function Cu(r){return Vd(r,wr,Ap)}var Ru=$o?function(r){return $o.get(r)}:Xu;function Xo(r){for(var i=r.name+"",a=Ri[i],h=it.call(Ri,i)?a.length:0;h--;){var g=a[h],v=g.func;if(v==null||v==r)return g.name}return i}function Ui(r){var i=it.call(y,"placeholder")?y:r;return i.placeholder}function be(){var r=y.iteratee||ku;return r=r===ku?Jd:r,arguments.length?r(arguments[0],arguments[1]):r}function Zo(r,i){var a=r.__data__;return sS(i)?a[typeof i=="string"?"string":"hash"]:a.map}function Nu(r){for(var i=kt(r),a=i.length;a--;){var h=i[a],g=r[h];i[a]=[h,g,Cp(g)]}return i}function oi(r,i){var a=c2(r,i);return kd(a)?a:t}function Z6(r){var i=it.call(r,ti),a=r[ti];try{r[ti]=t;var h=!0}catch{}var g=Po.call(r);return h&&(i?r[ti]=a:delete r[ti]),g}var Lu=au?function(r){return r==null?[]:(r=ft(r),An(au(r),function(i){return Ld.call(r,i)}))}:Zu,Ap=au?function(r){for(var i=[];r;)Pn(i,Lu(r)),r=Ro(r);return i}:Zu,rr=hr;(cu&&rr(new cu(new ArrayBuffer(1)))!=Pe||gs&&rr(new gs)!=xe||uu&&rr(uu.resolve())!=gt||Ci&&rr(new Ci)!=Oe||_s&&rr(new _s)!=Ae)&&(rr=function(r){var i=hr(r),a=i==$e?r.constructor:t,h=a?ai(a):"";if(h)switch(h){case L2:return Pe;case F2:return xe;case U2:return gt;case $2:return Oe;case M2:return Ae}return i});function Q6(r,i,a){for(var h=-1,g=a.length;++h<g;){var v=a[h],O=v.size;switch(v.type){case"drop":r+=O;break;case"dropRight":i-=O;break;case"take":i=tr(i,r+O);break;case"takeRight":r=Wt(r,i-O);break}}return{start:r,end:i}}function eS(r){var i=r.match(lt);return i?i[1].split(jt):[]}function Pp(r,i,a){i=Ln(i,r);for(var h=-1,g=i.length,v=!1;++h<g;){var O=nn(i[h]);if(!(v=r!=null&&a(r,O)))break;r=r[O]}return v||++h!=g?v:(g=r==null?0:r.length,!!g&&sa(g)&&_n(O,g)&&(Re(r)||ci(r)))}function tS(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&it.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function Tp(r){return typeof r.constructor=="function"&&!xs(r)?Ni(Ro(r)):{}}function rS(r,i,a){var h=r.constructor;switch(i){case De:return Iu(r);case H:case F:return new h(+r);case Pe:return B6(r,a);case ze:case Ie:case We:case Ye:case et:case tt:case Xe:case cr:case _r:return lp(r,a);case xe:return new h;case qe:case Le:return new h(r);case Be:return H6(r);case Oe:return new h;case Fe:return j6(r)}}function nS(r,i){var a=i.length;if(!a)return r;var h=a-1;return i[h]=(a>1?"& ":"")+i[h],i=i.join(a>2?", ":" "),r.replace(Pt,`{
/* [wrapped with `+i+`] */
`)}function iS(r){return Re(r)||ci(r)||!!(Fd&&r&&r[Fd])}function _n(r,i){var a=typeof r;return i=i??G,!!i&&(a=="number"||a!="symbol"&&$c.test(r))&&r>-1&&r%1==0&&r<i}function lr(r,i,a){if(!Et(a))return!1;var h=typeof i;return(h=="number"?br(a)&&_n(i,a.length):h=="string"&&i in a)?Vr(a[i],r):!1}function Fu(r,i){if(Re(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Or(r)?!0:Mt.test(r)||!vt.test(r)||i!=null&&r in ft(i)}function sS(r){var i=typeof r;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?r!=="__proto__":r===null}function Uu(r){var i=Xo(r),a=y[i];if(typeof a!="function"||!(i in ke.prototype))return!1;if(r===a)return!0;var h=Ru(a);return!!h&&r===h[0]}function oS(r){return!!Cd&&Cd in r}var aS=Io?yn:Qu;function xs(r){var i=r&&r.constructor,a=typeof i=="function"&&i.prototype||Ti;return r===a}function Cp(r){return r===r&&!Et(r)}function Rp(r,i){return function(a){return a==null?!1:a[r]===i&&(i!==t||r in ft(a))}}function cS(r){var i=na(r,function(h){return a.size===p&&a.clear(),h}),a=i.cache;return i}function uS(r,i){var a=r[1],h=i[1],g=a|h,v=g<(K|se|u),O=h==u&&a==M||h==u&&a==b&&r[7].length<=i[8]||h==(u|b)&&i[7].length<=i[8]&&a==M;if(!(v||O))return r;h&K&&(r[2]=i[2],g|=a&K?0:L);var N=i[3];if(N){var B=r[3];r[3]=B?pp(B,N,i[4]):N,r[4]=B?Tn(r[3],E):i[4]}return N=i[5],N&&(B=r[5],r[5]=B?gp(B,N,i[6]):N,r[6]=B?Tn(r[5],E):i[6]),N=i[7],N&&(r[7]=N),h&u&&(r[8]=r[8]==null?i[8]:tr(r[8],i[8])),r[9]==null&&(r[9]=i[9]),r[0]=i[0],r[1]=g,r}function fS(r){var i=[];if(r!=null)for(var a in ft(r))i.push(a);return i}function hS(r){return Po.call(r)}function Np(r,i,a){return i=Wt(i===t?r.length-1:i,0),function(){for(var h=arguments,g=-1,v=Wt(h.length-i,0),O=z(v);++g<v;)O[g]=h[i+g];g=-1;for(var N=z(i+1);++g<i;)N[g]=h[g];return N[i]=a(O),Yt(r,this,N)}}function Lp(r,i){return i.length<2?r:si(r,Mr(i,0,-1))}function lS(r,i){for(var a=r.length,h=tr(i.length,a),g=vr(r);h--;){var v=i[h];r[h]=_n(v,a)?g[v]:t}return r}function $u(r,i){if(!(i==="constructor"&&typeof r[i]=="function")&&i!="__proto__")return r[i]}var Fp=$p(ip),Os=I2||function(r,i){return Ze.setTimeout(r,i)},Mu=$p(F6);function Up(r,i,a){var h=i+"";return Mu(r,nS(h,dS(eS(h),a)))}function $p(r){var i=0,a=0;return function(){var h=C2(),g=de-(h-a);if(a=h,g>0){if(++i>=ce)return arguments[0]}else i=0;return r.apply(t,arguments)}}function Qo(r,i){var a=-1,h=r.length,g=h-1;for(i=i===t?h:i;++a<i;){var v=wu(a,g),O=r[v];r[v]=r[a],r[a]=O}return r.length=i,r}var Mp=cS(function(r){var i=[];return r.charCodeAt(0)===46&&i.push(""),r.replace(Bt,function(a,h,g,v){i.push(g?v.replace(Cc,"$1"):h||a)}),i});function nn(r){if(typeof r=="string"||Or(r))return r;var i=r+"";return i=="0"&&1/r==-X?"-0":i}function ai(r){if(r!=null){try{return Ao.call(r)}catch{}try{return r+""}catch{}}return""}function dS(r,i){return Lr(me,function(a){var h="_."+a[0];i&a[1]&&!So(r,h)&&r.push(h)}),r.sort()}function Bp(r){if(r instanceof ke)return r.clone();var i=new Ur(r.__wrapped__,r.__chain__);return i.__actions__=vr(r.__actions__),i.__index__=r.__index__,i.__values__=r.__values__,i}function pS(r,i,a){(a?lr(r,i,a):i===t)?i=1:i=Wt(Me(i),0);var h=r==null?0:r.length;if(!h||i<1)return[];for(var g=0,v=0,O=z(Fo(h/i));g<h;)O[v++]=Mr(r,g,g+=i);return O}function gS(r){for(var i=-1,a=r==null?0:r.length,h=0,g=[];++i<a;){var v=r[i];v&&(g[h++]=v)}return g}function _S(){var r=arguments.length;if(!r)return[];for(var i=z(r-1),a=arguments[0],h=r;h--;)i[h-1]=arguments[h];return Pn(Re(a)?vr(a):[a],Zt(i,1))}var yS=Ke(function(r,i){return Lt(r)?ws(r,Zt(i,1,Lt,!0)):[]}),vS=Ke(function(r,i){var a=Br(i);return Lt(a)&&(a=t),Lt(r)?ws(r,Zt(i,1,Lt,!0),be(a,2)):[]}),bS=Ke(function(r,i){var a=Br(i);return Lt(a)&&(a=t),Lt(r)?ws(r,Zt(i,1,Lt,!0),t,a):[]});function wS(r,i,a){var h=r==null?0:r.length;return h?(i=a||i===t?1:Me(i),Mr(r,i<0?0:i,h)):[]}function mS(r,i,a){var h=r==null?0:r.length;return h?(i=a||i===t?1:Me(i),i=h-i,Mr(r,0,i<0?0:i)):[]}function ES(r,i){return r&&r.length?Go(r,be(i,3),!0,!0):[]}function SS(r,i){return r&&r.length?Go(r,be(i,3),!0):[]}function DS(r,i,a,h){var g=r==null?0:r.length;return g?(a&&typeof a!="number"&&lr(r,i,a)&&(a=0,h=g),_6(r,i,a,h)):[]}function Hp(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var g=a==null?0:Me(a);return g<0&&(g=Wt(h+g,0)),Do(r,be(i,3),g)}function jp(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var g=h-1;return a!==t&&(g=Me(a),g=a<0?Wt(h+g,0):tr(g,h-1)),Do(r,be(i,3),g,!0)}function qp(r){var i=r==null?0:r.length;return i?Zt(r,1):[]}function xS(r){var i=r==null?0:r.length;return i?Zt(r,X):[]}function OS(r,i){var a=r==null?0:r.length;return a?(i=i===t?1:Me(i),Zt(r,i)):[]}function IS(r){for(var i=-1,a=r==null?0:r.length,h={};++i<a;){var g=r[i];h[g[0]]=g[1]}return h}function zp(r){return r&&r.length?r[0]:t}function AS(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var g=a==null?0:Me(a);return g<0&&(g=Wt(h+g,0)),Oi(r,i,g)}function PS(r){var i=r==null?0:r.length;return i?Mr(r,0,-1):[]}var TS=Ke(function(r){var i=bt(r,xu);return i.length&&i[0]===r[0]?gu(i):[]}),CS=Ke(function(r){var i=Br(r),a=bt(r,xu);return i===Br(a)?i=t:a.pop(),a.length&&a[0]===r[0]?gu(a,be(i,2)):[]}),RS=Ke(function(r){var i=Br(r),a=bt(r,xu);return i=typeof i=="function"?i:t,i&&a.pop(),a.length&&a[0]===r[0]?gu(a,t,i):[]});function NS(r,i){return r==null?"":P2.call(r,i)}function Br(r){var i=r==null?0:r.length;return i?r[i-1]:t}function LS(r,i,a){var h=r==null?0:r.length;if(!h)return-1;var g=h;return a!==t&&(g=Me(a),g=g<0?Wt(h+g,0):tr(g,h-1)),i===i?d2(r,i,g):Do(r,Sd,g,!0)}function FS(r,i){return r&&r.length?ep(r,Me(i)):t}var US=Ke(Kp);function Kp(r,i){return r&&r.length&&i&&i.length?bu(r,i):r}function $S(r,i,a){return r&&r.length&&i&&i.length?bu(r,i,be(a,2)):r}function MS(r,i,a){return r&&r.length&&i&&i.length?bu(r,i,t,a):r}var BS=gn(function(r,i){var a=r==null?0:r.length,h=hu(r,i);return np(r,bt(i,function(g){return _n(g,a)?+g:g}).sort(dp)),h});function HS(r,i){var a=[];if(!(r&&r.length))return a;var h=-1,g=[],v=r.length;for(i=be(i,3);++h<v;){var O=r[h];i(O,h,r)&&(a.push(O),g.push(h))}return np(r,g),a}function Bu(r){return r==null?r:N2.call(r)}function jS(r,i,a){var h=r==null?0:r.length;return h?(a&&typeof a!="number"&&lr(r,i,a)?(i=0,a=h):(i=i==null?0:Me(i),a=a===t?h:Me(a)),Mr(r,i,a)):[]}function qS(r,i){return Ko(r,i)}function zS(r,i,a){return Eu(r,i,be(a,2))}function KS(r,i){var a=r==null?0:r.length;if(a){var h=Ko(r,i);if(h<a&&Vr(r[h],i))return h}return-1}function GS(r,i){return Ko(r,i,!0)}function WS(r,i,a){return Eu(r,i,be(a,2),!0)}function VS(r,i){var a=r==null?0:r.length;if(a){var h=Ko(r,i,!0)-1;if(Vr(r[h],i))return h}return-1}function YS(r){return r&&r.length?sp(r):[]}function kS(r,i){return r&&r.length?sp(r,be(i,2)):[]}function JS(r){var i=r==null?0:r.length;return i?Mr(r,1,i):[]}function XS(r,i,a){return r&&r.length?(i=a||i===t?1:Me(i),Mr(r,0,i<0?0:i)):[]}function ZS(r,i,a){var h=r==null?0:r.length;return h?(i=a||i===t?1:Me(i),i=h-i,Mr(r,i<0?0:i,h)):[]}function QS(r,i){return r&&r.length?Go(r,be(i,3),!1,!0):[]}function eD(r,i){return r&&r.length?Go(r,be(i,3)):[]}var tD=Ke(function(r){return Nn(Zt(r,1,Lt,!0))}),rD=Ke(function(r){var i=Br(r);return Lt(i)&&(i=t),Nn(Zt(r,1,Lt,!0),be(i,2))}),nD=Ke(function(r){var i=Br(r);return i=typeof i=="function"?i:t,Nn(Zt(r,1,Lt,!0),t,i)});function iD(r){return r&&r.length?Nn(r):[]}function sD(r,i){return r&&r.length?Nn(r,be(i,2)):[]}function oD(r,i){return i=typeof i=="function"?i:t,r&&r.length?Nn(r,t,i):[]}function Hu(r){if(!(r&&r.length))return[];var i=0;return r=An(r,function(a){if(Lt(a))return i=Wt(a.length,i),!0}),nu(i,function(a){return bt(r,eu(a))})}function Gp(r,i){if(!(r&&r.length))return[];var a=Hu(r);return i==null?a:bt(a,function(h){return Yt(i,t,h)})}var aD=Ke(function(r,i){return Lt(r)?ws(r,i):[]}),cD=Ke(function(r){return Du(An(r,Lt))}),uD=Ke(function(r){var i=Br(r);return Lt(i)&&(i=t),Du(An(r,Lt),be(i,2))}),fD=Ke(function(r){var i=Br(r);return i=typeof i=="function"?i:t,Du(An(r,Lt),t,i)}),hD=Ke(Hu);function lD(r,i){return up(r||[],i||[],bs)}function dD(r,i){return up(r||[],i||[],Ss)}var pD=Ke(function(r){var i=r.length,a=i>1?r[i-1]:t;return a=typeof a=="function"?(r.pop(),a):t,Gp(r,a)});function Wp(r){var i=y(r);return i.__chain__=!0,i}function gD(r,i){return i(r),r}function ea(r,i){return i(r)}var _D=gn(function(r){var i=r.length,a=i?r[0]:0,h=this.__wrapped__,g=function(v){return hu(v,r)};return i>1||this.__actions__.length||!(h instanceof ke)||!_n(a)?this.thru(g):(h=h.slice(a,+a+(i?1:0)),h.__actions__.push({func:ea,args:[g],thisArg:t}),new Ur(h,this.__chain__).thru(function(v){return i&&!v.length&&v.push(t),v}))});function yD(){return Wp(this)}function vD(){return new Ur(this.value(),this.__chain__)}function bD(){this.__values__===t&&(this.__values__=og(this.value()));var r=this.__index__>=this.__values__.length,i=r?t:this.__values__[this.__index__++];return{done:r,value:i}}function wD(){return this}function mD(r){for(var i,a=this;a instanceof Bo;){var h=Bp(a);h.__index__=0,h.__values__=t,i?g.__wrapped__=h:i=h;var g=h;a=a.__wrapped__}return g.__wrapped__=r,i}function ED(){var r=this.__wrapped__;if(r instanceof ke){var i=r;return this.__actions__.length&&(i=new ke(this)),i=i.reverse(),i.__actions__.push({func:ea,args:[Bu],thisArg:t}),new Ur(i,this.__chain__)}return this.thru(Bu)}function SD(){return cp(this.__wrapped__,this.__actions__)}var DD=Wo(function(r,i,a){it.call(r,a)?++r[a]:dn(r,a,1)});function xD(r,i,a){var h=Re(r)?md:g6;return a&&lr(r,i,a)&&(i=t),h(r,be(i,3))}function OD(r,i){var a=Re(r)?An:Gd;return a(r,be(i,3))}var ID=bp(Hp),AD=bp(jp);function PD(r,i){return Zt(ta(r,i),1)}function TD(r,i){return Zt(ta(r,i),X)}function CD(r,i,a){return a=a===t?1:Me(a),Zt(ta(r,i),a)}function Vp(r,i){var a=Re(r)?Lr:Rn;return a(r,be(i,3))}function Yp(r,i){var a=Re(r)?J3:Kd;return a(r,be(i,3))}var RD=Wo(function(r,i,a){it.call(r,a)?r[a].push(i):dn(r,a,[i])});function ND(r,i,a,h){r=br(r)?r:Mi(r),a=a&&!h?Me(a):0;var g=r.length;return a<0&&(a=Wt(g+a,0)),oa(r)?a<=g&&r.indexOf(i,a)>-1:!!g&&Oi(r,i,a)>-1}var LD=Ke(function(r,i,a){var h=-1,g=typeof i=="function",v=br(r)?z(r.length):[];return Rn(r,function(O){v[++h]=g?Yt(i,O,a):ms(O,i,a)}),v}),FD=Wo(function(r,i,a){dn(r,a,i)});function ta(r,i){var a=Re(r)?bt:Xd;return a(r,be(i,3))}function UD(r,i,a,h){return r==null?[]:(Re(i)||(i=i==null?[]:[i]),a=h?t:a,Re(a)||(a=a==null?[]:[a]),tp(r,i,a))}var $D=Wo(function(r,i,a){r[a?0:1].push(i)},function(){return[[],[]]});function MD(r,i,a){var h=Re(r)?Zc:xd,g=arguments.length<3;return h(r,be(i,4),a,g,Rn)}function BD(r,i,a){var h=Re(r)?X3:xd,g=arguments.length<3;return h(r,be(i,4),a,g,Kd)}function HD(r,i){var a=Re(r)?An:Gd;return a(r,ia(be(i,3)))}function jD(r){var i=Re(r)?Hd:N6;return i(r)}function qD(r,i,a){(a?lr(r,i,a):i===t)?i=1:i=Me(i);var h=Re(r)?f6:L6;return h(r,i)}function zD(r){var i=Re(r)?h6:U6;return i(r)}function KD(r){if(r==null)return 0;if(br(r))return oa(r)?Ai(r):r.length;var i=rr(r);return i==xe||i==Oe?r.size:yu(r).length}function GD(r,i,a){var h=Re(r)?Qc:$6;return a&&lr(r,i,a)&&(i=t),h(r,be(i,3))}var WD=Ke(function(r,i){if(r==null)return[];var a=i.length;return a>1&&lr(r,i[0],i[1])?i=[]:a>2&&lr(i[0],i[1],i[2])&&(i=[i[0]]),tp(r,Zt(i,1),[])}),ra=O2||function(){return Ze.Date.now()};function VD(r,i){if(typeof i!="function")throw new Fr(f);return r=Me(r),function(){if(--r<1)return i.apply(this,arguments)}}function kp(r,i,a){return i=a?t:i,i=r&&i==null?r.length:i,pn(r,u,t,t,t,t,i)}function Jp(r,i){var a;if(typeof i!="function")throw new Fr(f);return r=Me(r),function(){return--r>0&&(a=i.apply(this,arguments)),r<=1&&(i=t),a}}var ju=Ke(function(r,i,a){var h=K;if(a.length){var g=Tn(a,Ui(ju));h|=P}return pn(r,h,i,a,g)}),Xp=Ke(function(r,i,a){var h=K|se;if(a.length){var g=Tn(a,Ui(Xp));h|=P}return pn(i,h,r,a,g)});function Zp(r,i,a){i=a?t:i;var h=pn(r,M,t,t,t,t,t,i);return h.placeholder=Zp.placeholder,h}function Qp(r,i,a){i=a?t:i;var h=pn(r,x,t,t,t,t,t,i);return h.placeholder=Qp.placeholder,h}function eg(r,i,a){var h,g,v,O,N,B,Z=0,Q=!1,ne=!1,ue=!0;if(typeof r!="function")throw new Fr(f);i=Hr(i)||0,Et(a)&&(Q=!!a.leading,ne="maxWait"in a,v=ne?Wt(Hr(a.maxWait)||0,i):v,ue="trailing"in a?!!a.trailing:ue);function _e(Ft){var Yr=h,bn=g;return h=g=t,Z=Ft,O=r.apply(bn,Yr),O}function Ee(Ft){return Z=Ft,N=Os(Ve,i),Q?_e(Ft):O}function je(Ft){var Yr=Ft-B,bn=Ft-Z,bg=i-Yr;return ne?tr(bg,v-bn):bg}function Se(Ft){var Yr=Ft-B,bn=Ft-Z;return B===t||Yr>=i||Yr<0||ne&&bn>=v}function Ve(){var Ft=ra();if(Se(Ft))return Qe(Ft);N=Os(Ve,je(Ft))}function Qe(Ft){return N=t,ue&&h?_e(Ft):(h=g=t,O)}function Ir(){N!==t&&fp(N),Z=0,h=B=g=N=t}function dr(){return N===t?O:Qe(ra())}function Ar(){var Ft=ra(),Yr=Se(Ft);if(h=arguments,g=this,B=Ft,Yr){if(N===t)return Ee(B);if(ne)return fp(N),N=Os(Ve,i),_e(B)}return N===t&&(N=Os(Ve,i)),O}return Ar.cancel=Ir,Ar.flush=dr,Ar}var YD=Ke(function(r,i){return zd(r,1,i)}),kD=Ke(function(r,i,a){return zd(r,Hr(i)||0,a)});function JD(r){return pn(r,V)}function na(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new Fr(f);var a=function(){var h=arguments,g=i?i.apply(this,h):h[0],v=a.cache;if(v.has(g))return v.get(g);var O=r.apply(this,h);return a.cache=v.set(g,O)||v,O};return a.cache=new(na.Cache||ln),a}na.Cache=ln;function ia(r){if(typeof r!="function")throw new Fr(f);return function(){var i=arguments;switch(i.length){case 0:return!r.call(this);case 1:return!r.call(this,i[0]);case 2:return!r.call(this,i[0],i[1]);case 3:return!r.call(this,i[0],i[1],i[2])}return!r.apply(this,i)}}function XD(r){return Jp(2,r)}var ZD=M6(function(r,i){i=i.length==1&&Re(i[0])?bt(i[0],Dr(be())):bt(Zt(i,1),Dr(be()));var a=i.length;return Ke(function(h){for(var g=-1,v=tr(h.length,a);++g<v;)h[g]=i[g].call(this,h[g]);return Yt(r,this,h)})}),qu=Ke(function(r,i){var a=Tn(i,Ui(qu));return pn(r,P,t,i,a)}),tg=Ke(function(r,i){var a=Tn(i,Ui(tg));return pn(r,m,t,i,a)}),QD=gn(function(r,i){return pn(r,b,t,t,t,i)});function ex(r,i){if(typeof r!="function")throw new Fr(f);return i=i===t?i:Me(i),Ke(r,i)}function tx(r,i){if(typeof r!="function")throw new Fr(f);return i=i==null?0:Wt(Me(i),0),Ke(function(a){var h=a[i],g=Fn(a,0,i);return h&&Pn(g,h),Yt(r,this,g)})}function rx(r,i,a){var h=!0,g=!0;if(typeof r!="function")throw new Fr(f);return Et(a)&&(h="leading"in a?!!a.leading:h,g="trailing"in a?!!a.trailing:g),eg(r,i,{leading:h,maxWait:i,trailing:g})}function nx(r){return kp(r,1)}function ix(r,i){return qu(Ou(i),r)}function sx(){if(!arguments.length)return[];var r=arguments[0];return Re(r)?r:[r]}function ox(r){return $r(r,C)}function ax(r,i){return i=typeof i=="function"?i:t,$r(r,C,i)}function cx(r){return $r(r,T|C)}function ux(r,i){return i=typeof i=="function"?i:t,$r(r,T|C,i)}function fx(r,i){return i==null||qd(r,i,kt(i))}function Vr(r,i){return r===i||r!==r&&i!==i}var hx=Jo(pu),lx=Jo(function(r,i){return r>=i}),ci=Yd(function(){return arguments}())?Yd:function(r){return Tt(r)&&it.call(r,"callee")&&!Ld.call(r,"callee")},Re=z.isArray,dx=fr?Dr(fr):m6;function br(r){return r!=null&&sa(r.length)&&!yn(r)}function Lt(r){return Tt(r)&&br(r)}function px(r){return r===!0||r===!1||Tt(r)&&hr(r)==H}var Un=A2||Qu,gx=Kr?Dr(Kr):E6;function _x(r){return Tt(r)&&r.nodeType===1&&!Is(r)}function yx(r){if(r==null)return!0;if(br(r)&&(Re(r)||typeof r=="string"||typeof r.splice=="function"||Un(r)||$i(r)||ci(r)))return!r.length;var i=rr(r);if(i==xe||i==Oe)return!r.size;if(xs(r))return!yu(r).length;for(var a in r)if(it.call(r,a))return!1;return!0}function vx(r,i){return Es(r,i)}function bx(r,i,a){a=typeof a=="function"?a:t;var h=a?a(r,i):t;return h===t?Es(r,i,t,a):!!h}function zu(r){if(!Tt(r))return!1;var i=hr(r);return i==A||i==d||typeof r.message=="string"&&typeof r.name=="string"&&!Is(r)}function wx(r){return typeof r=="number"&&Ud(r)}function yn(r){if(!Et(r))return!1;var i=hr(r);return i==ae||i==le||i==j||i==_t}function rg(r){return typeof r=="number"&&r==Me(r)}function sa(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=G}function Et(r){var i=typeof r;return r!=null&&(i=="object"||i=="function")}function Tt(r){return r!=null&&typeof r=="object"}var ng=Nr?Dr(Nr):D6;function mx(r,i){return r===i||_u(r,i,Nu(i))}function Ex(r,i,a){return a=typeof a=="function"?a:t,_u(r,i,Nu(i),a)}function Sx(r){return ig(r)&&r!=+r}function Dx(r){if(aS(r))throw new Te(c);return kd(r)}function xx(r){return r===null}function Ox(r){return r==null}function ig(r){return typeof r=="number"||Tt(r)&&hr(r)==qe}function Is(r){if(!Tt(r)||hr(r)!=$e)return!1;var i=Ro(r);if(i===null)return!0;var a=it.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&Ao.call(a)==E2}var Ku=en?Dr(en):x6;function Ix(r){return rg(r)&&r>=-G&&r<=G}var sg=ls?Dr(ls):O6;function oa(r){return typeof r=="string"||!Re(r)&&Tt(r)&&hr(r)==Le}function Or(r){return typeof r=="symbol"||Tt(r)&&hr(r)==Fe}var $i=ei?Dr(ei):I6;function Ax(r){return r===t}function Px(r){return Tt(r)&&rr(r)==Ae}function Tx(r){return Tt(r)&&hr(r)==Ue}var Cx=Jo(vu),Rx=Jo(function(r,i){return r<=i});function og(r){if(!r)return[];if(br(r))return oa(r)?Gr(r):vr(r);if(ps&&r[ps])return f2(r[ps]());var i=rr(r),a=i==xe?su:i==Oe?xo:Mi;return a(r)}function vn(r){if(!r)return r===0?r:0;if(r=Hr(r),r===X||r===-X){var i=r<0?-1:1;return i*W}return r===r?r:0}function Me(r){var i=vn(r),a=i%1;return i===i?a?i-a:i:0}function ag(r){return r?ii(Me(r),0,re):0}function Hr(r){if(typeof r=="number")return r;if(Or(r))return J;if(Et(r)){var i=typeof r.valueOf=="function"?r.valueOf():r;r=Et(i)?i+"":i}if(typeof r!="string")return r===0?r:+r;r=Od(r);var a=Lc.test(r);return a||Uc.test(r)?Ce(r.slice(2),a?2:8):Nc.test(r)?J:+r}function cg(r){return rn(r,wr(r))}function Nx(r){return r?ii(Me(r),-G,G):r===0?r:0}function nt(r){return r==null?"":xr(r)}var Lx=Li(function(r,i){if(xs(i)||br(i)){rn(i,kt(i),r);return}for(var a in i)it.call(i,a)&&bs(r,a,i[a])}),ug=Li(function(r,i){rn(i,wr(i),r)}),aa=Li(function(r,i,a,h){rn(i,wr(i),r,h)}),Fx=Li(function(r,i,a,h){rn(i,kt(i),r,h)}),Ux=gn(hu);function $x(r,i){var a=Ni(r);return i==null?a:jd(a,i)}var Mx=Ke(function(r,i){r=ft(r);var a=-1,h=i.length,g=h>2?i[2]:t;for(g&&lr(i[0],i[1],g)&&(h=1);++a<h;)for(var v=i[a],O=wr(v),N=-1,B=O.length;++N<B;){var Z=O[N],Q=r[Z];(Q===t||Vr(Q,Ti[Z])&&!it.call(r,Z))&&(r[Z]=v[Z])}return r}),Bx=Ke(function(r){return r.push(t,Op),Yt(fg,t,r)});function Hx(r,i){return Ed(r,be(i,3),tn)}function jx(r,i){return Ed(r,be(i,3),du)}function qx(r,i){return r==null?r:lu(r,be(i,3),wr)}function zx(r,i){return r==null?r:Wd(r,be(i,3),wr)}function Kx(r,i){return r&&tn(r,be(i,3))}function Gx(r,i){return r&&du(r,be(i,3))}function Wx(r){return r==null?[]:qo(r,kt(r))}function Vx(r){return r==null?[]:qo(r,wr(r))}function Gu(r,i,a){var h=r==null?t:si(r,i);return h===t?a:h}function Yx(r,i){return r!=null&&Pp(r,i,y6)}function Wu(r,i){return r!=null&&Pp(r,i,v6)}var kx=mp(function(r,i,a){i!=null&&typeof i.toString!="function"&&(i=Po.call(i)),r[i]=a},Yu(mr)),Jx=mp(function(r,i,a){i!=null&&typeof i.toString!="function"&&(i=Po.call(i)),it.call(r,i)?r[i].push(a):r[i]=[a]},be),Xx=Ke(ms);function kt(r){return br(r)?Bd(r):yu(r)}function wr(r){return br(r)?Bd(r,!0):A6(r)}function Zx(r,i){var a={};return i=be(i,3),tn(r,function(h,g,v){dn(a,i(h,g,v),h)}),a}function Qx(r,i){var a={};return i=be(i,3),tn(r,function(h,g,v){dn(a,g,i(h,g,v))}),a}var e5=Li(function(r,i,a){zo(r,i,a)}),fg=Li(function(r,i,a,h){zo(r,i,a,h)}),t5=gn(function(r,i){var a={};if(r==null)return a;var h=!1;i=bt(i,function(v){return v=Ln(v,r),h||(h=v.length>1),v}),rn(r,Cu(r),a),h&&(a=$r(a,T|D|C,k6));for(var g=i.length;g--;)Su(a,i[g]);return a});function r5(r,i){return hg(r,ia(be(i)))}var n5=gn(function(r,i){return r==null?{}:T6(r,i)});function hg(r,i){if(r==null)return{};var a=bt(Cu(r),function(h){return[h]});return i=be(i),rp(r,a,function(h,g){return i(h,g[0])})}function i5(r,i,a){i=Ln(i,r);var h=-1,g=i.length;for(g||(g=1,r=t);++h<g;){var v=r==null?t:r[nn(i[h])];v===t&&(h=g,v=a),r=yn(v)?v.call(r):v}return r}function s5(r,i,a){return r==null?r:Ss(r,i,a)}function o5(r,i,a,h){return h=typeof h=="function"?h:t,r==null?r:Ss(r,i,a,h)}var lg=Dp(kt),dg=Dp(wr);function a5(r,i,a){var h=Re(r),g=h||Un(r)||$i(r);if(i=be(i,4),a==null){var v=r&&r.constructor;g?a=h?new v:[]:Et(r)?a=yn(v)?Ni(Ro(r)):{}:a={}}return(g?Lr:tn)(r,function(O,N,B){return i(a,O,N,B)}),a}function c5(r,i){return r==null?!0:Su(r,i)}function u5(r,i,a){return r==null?r:ap(r,i,Ou(a))}function f5(r,i,a,h){return h=typeof h=="function"?h:t,r==null?r:ap(r,i,Ou(a),h)}function Mi(r){return r==null?[]:iu(r,kt(r))}function h5(r){return r==null?[]:iu(r,wr(r))}function l5(r,i,a){return a===t&&(a=i,i=t),a!==t&&(a=Hr(a),a=a===a?a:0),i!==t&&(i=Hr(i),i=i===i?i:0),ii(Hr(r),i,a)}function d5(r,i,a){return i=vn(i),a===t?(a=i,i=0):a=vn(a),r=Hr(r),b6(r,i,a)}function p5(r,i,a){if(a&&typeof a!="boolean"&&lr(r,i,a)&&(i=a=t),a===t&&(typeof i=="boolean"?(a=i,i=t):typeof r=="boolean"&&(a=r,r=t)),r===t&&i===t?(r=0,i=1):(r=vn(r),i===t?(i=r,r=0):i=vn(i)),r>i){var h=r;r=i,i=h}if(a||r%1||i%1){var g=$d();return tr(r+g*(i-r+ct("1e-"+((g+"").length-1))),i)}return wu(r,i)}var g5=Fi(function(r,i,a){return i=i.toLowerCase(),r+(a?pg(i):i)});function pg(r){return Vu(nt(r).toLowerCase())}function gg(r){return r=nt(r),r&&r.replace(un,s2).replace(kc,"")}function _5(r,i,a){r=nt(r),i=xr(i);var h=r.length;a=a===t?h:ii(Me(a),0,h);var g=a;return a-=i.length,a>=0&&r.slice(a,g)==i}function y5(r){return r=nt(r),r&&yt.test(r)?r.replace(kn,o2):r}function v5(r){return r=nt(r),r&&Ht.test(r)?r.replace(It,"\\$&"):r}var b5=Fi(function(r,i,a){return r+(a?"-":"")+i.toLowerCase()}),w5=Fi(function(r,i,a){return r+(a?" ":"")+i.toLowerCase()}),m5=vp("toLowerCase");function E5(r,i,a){r=nt(r),i=Me(i);var h=i?Ai(r):0;if(!i||h>=i)return r;var g=(i-h)/2;return ko(Uo(g),a)+r+ko(Fo(g),a)}function S5(r,i,a){r=nt(r),i=Me(i);var h=i?Ai(r):0;return i&&h<i?r+ko(i-h,a):r}function D5(r,i,a){r=nt(r),i=Me(i);var h=i?Ai(r):0;return i&&h<i?ko(i-h,a)+r:r}function x5(r,i,a){return a||i==null?i=0:i&&(i=+i),R2(nt(r).replace(At,""),i||0)}function O5(r,i,a){return(a?lr(r,i,a):i===t)?i=1:i=Me(i),mu(nt(r),i)}function I5(){var r=arguments,i=nt(r[0]);return r.length<3?i:i.replace(r[1],r[2])}var A5=Fi(function(r,i,a){return r+(a?"_":"")+i.toLowerCase()});function P5(r,i,a){return a&&typeof a!="number"&&lr(r,i,a)&&(i=a=t),a=a===t?re:a>>>0,a?(r=nt(r),r&&(typeof i=="string"||i!=null&&!Ku(i))&&(i=xr(i),!i&&Ii(r))?Fn(Gr(r),0,a):r.split(i,a)):[]}var T5=Fi(function(r,i,a){return r+(a?" ":"")+Vu(i)});function C5(r,i,a){return r=nt(r),a=a==null?0:ii(Me(a),0,r.length),i=xr(i),r.slice(a,a+i.length)==i}function R5(r,i,a){var h=y.templateSettings;a&&lr(r,i,a)&&(i=t),r=nt(r),i=aa({},i,h,xp);var g=aa({},i.imports,h.imports,xp),v=kt(g),O=iu(g,v),N,B,Z=0,Q=i.interpolate||bi,ne="__p += '",ue=ou((i.escape||bi).source+"|"+Q.source+"|"+(Q===mt?Rc:bi).source+"|"+(i.evaluate||bi).source+"|$","g"),_e="//# sourceURL="+(it.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Jc+"]")+`
`;r.replace(ue,function(Se,Ve,Qe,Ir,dr,Ar){return Qe||(Qe=Ir),ne+=r.slice(Z,Ar).replace(Mc,a2),Ve&&(N=!0,ne+=`' +
__e(`+Ve+`) +
'`),dr&&(B=!0,ne+=`';
`+dr+`;
__p += '`),Qe&&(ne+=`' +
((__t = (`+Qe+`)) == null ? '' : __t) +
'`),Z=Ar+Se.length,Se}),ne+=`';
`;var Ee=it.call(i,"variable")&&i.variable;if(!Ee)ne=`with (obj) {
`+ne+`
}
`;else if(Tc.test(Ee))throw new Te(l);ne=(B?ne.replace(Zr,""):ne).replace(ur,"$1").replace(cn,"$1;"),ne="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(N?", __e = _.escape":"")+(B?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ne+`return __p
}`;var je=yg(function(){return rt(v,_e+"return "+ne).apply(t,O)});if(je.source=ne,zu(je))throw je;return je}function N5(r){return nt(r).toLowerCase()}function L5(r){return nt(r).toUpperCase()}function F5(r,i,a){if(r=nt(r),r&&(a||i===t))return Od(r);if(!r||!(i=xr(i)))return r;var h=Gr(r),g=Gr(i),v=Id(h,g),O=Ad(h,g)+1;return Fn(h,v,O).join("")}function U5(r,i,a){if(r=nt(r),r&&(a||i===t))return r.slice(0,Td(r)+1);if(!r||!(i=xr(i)))return r;var h=Gr(r),g=Ad(h,Gr(i))+1;return Fn(h,0,g).join("")}function $5(r,i,a){if(r=nt(r),r&&(a||i===t))return r.replace(At,"");if(!r||!(i=xr(i)))return r;var h=Gr(r),g=Id(h,Gr(i));return Fn(h,g).join("")}function M5(r,i){var a=k,h=ie;if(Et(i)){var g="separator"in i?i.separator:g;a="length"in i?Me(i.length):a,h="omission"in i?xr(i.omission):h}r=nt(r);var v=r.length;if(Ii(r)){var O=Gr(r);v=O.length}if(a>=v)return r;var N=a-Ai(h);if(N<1)return h;var B=O?Fn(O,0,N).join(""):r.slice(0,N);if(g===t)return B+h;if(O&&(N+=B.length-N),Ku(g)){if(r.slice(N).search(g)){var Z,Q=B;for(g.global||(g=ou(g.source,nt(Rr.exec(g))+"g")),g.lastIndex=0;Z=g.exec(Q);)var ne=Z.index;B=B.slice(0,ne===t?N:ne)}}else if(r.indexOf(xr(g),N)!=N){var ue=B.lastIndexOf(g);ue>-1&&(B=B.slice(0,ue))}return B+h}function B5(r){return r=nt(r),r&&Dt.test(r)?r.replace(On,p2):r}var H5=Fi(function(r,i,a){return r+(a?" ":"")+i.toUpperCase()}),Vu=vp("toUpperCase");function _g(r,i,a){return r=nt(r),i=a?t:i,i===t?u2(r)?y2(r):e2(r):r.match(i)||[]}var yg=Ke(function(r,i){try{return Yt(r,t,i)}catch(a){return zu(a)?a:new Te(a)}}),j5=gn(function(r,i){return Lr(i,function(a){a=nn(a),dn(r,a,ju(r[a],r))}),r});function q5(r){var i=r==null?0:r.length,a=be();return r=i?bt(r,function(h){if(typeof h[1]!="function")throw new Fr(f);return[a(h[0]),h[1]]}):[],Ke(function(h){for(var g=-1;++g<i;){var v=r[g];if(Yt(v[0],this,h))return Yt(v[1],this,h)}})}function z5(r){return p6($r(r,T))}function Yu(r){return function(){return r}}function K5(r,i){return r==null||r!==r?i:r}var G5=wp(),W5=wp(!0);function mr(r){return r}function ku(r){return Jd(typeof r=="function"?r:$r(r,T))}function V5(r){return Zd($r(r,T))}function Y5(r,i){return Qd(r,$r(i,T))}var k5=Ke(function(r,i){return function(a){return ms(a,r,i)}}),J5=Ke(function(r,i){return function(a){return ms(r,a,i)}});function Ju(r,i,a){var h=kt(i),g=qo(i,h);a==null&&!(Et(i)&&(g.length||!h.length))&&(a=i,i=r,r=this,g=qo(i,kt(i)));var v=!(Et(a)&&"chain"in a)||!!a.chain,O=yn(r);return Lr(g,function(N){var B=i[N];r[N]=B,O&&(r.prototype[N]=function(){var Z=this.__chain__;if(v||Z){var Q=r(this.__wrapped__),ne=Q.__actions__=vr(this.__actions__);return ne.push({func:B,args:arguments,thisArg:r}),Q.__chain__=Z,Q}return B.apply(r,Pn([this.value()],arguments))})}),r}function X5(){return Ze._===this&&(Ze._=S2),this}function Xu(){}function Z5(r){return r=Me(r),Ke(function(i){return ep(i,r)})}var Q5=Au(bt),eO=Au(md),tO=Au(Qc);function vg(r){return Fu(r)?eu(nn(r)):C6(r)}function rO(r){return function(i){return r==null?t:si(r,i)}}var nO=Ep(),iO=Ep(!0);function Zu(){return[]}function Qu(){return!1}function sO(){return{}}function oO(){return""}function aO(){return!0}function cO(r,i){if(r=Me(r),r<1||r>G)return[];var a=re,h=tr(r,re);i=be(i),r-=re;for(var g=nu(h,i);++a<r;)i(a);return g}function uO(r){return Re(r)?bt(r,nn):Or(r)?[r]:vr(Mp(nt(r)))}function fO(r){var i=++m2;return nt(r)+i}var hO=Yo(function(r,i){return r+i},0),lO=Pu("ceil"),dO=Yo(function(r,i){return r/i},1),pO=Pu("floor");function gO(r){return r&&r.length?jo(r,mr,pu):t}function _O(r,i){return r&&r.length?jo(r,be(i,2),pu):t}function yO(r){return Dd(r,mr)}function vO(r,i){return Dd(r,be(i,2))}function bO(r){return r&&r.length?jo(r,mr,vu):t}function wO(r,i){return r&&r.length?jo(r,be(i,2),vu):t}var mO=Yo(function(r,i){return r*i},1),EO=Pu("round"),SO=Yo(function(r,i){return r-i},0);function DO(r){return r&&r.length?ru(r,mr):0}function xO(r,i){return r&&r.length?ru(r,be(i,2)):0}return y.after=VD,y.ary=kp,y.assign=Lx,y.assignIn=ug,y.assignInWith=aa,y.assignWith=Fx,y.at=Ux,y.before=Jp,y.bind=ju,y.bindAll=j5,y.bindKey=Xp,y.castArray=sx,y.chain=Wp,y.chunk=pS,y.compact=gS,y.concat=_S,y.cond=q5,y.conforms=z5,y.constant=Yu,y.countBy=DD,y.create=$x,y.curry=Zp,y.curryRight=Qp,y.debounce=eg,y.defaults=Mx,y.defaultsDeep=Bx,y.defer=YD,y.delay=kD,y.difference=yS,y.differenceBy=vS,y.differenceWith=bS,y.drop=wS,y.dropRight=mS,y.dropRightWhile=ES,y.dropWhile=SS,y.fill=DS,y.filter=OD,y.flatMap=PD,y.flatMapDeep=TD,y.flatMapDepth=CD,y.flatten=qp,y.flattenDeep=xS,y.flattenDepth=OS,y.flip=JD,y.flow=G5,y.flowRight=W5,y.fromPairs=IS,y.functions=Wx,y.functionsIn=Vx,y.groupBy=RD,y.initial=PS,y.intersection=TS,y.intersectionBy=CS,y.intersectionWith=RS,y.invert=kx,y.invertBy=Jx,y.invokeMap=LD,y.iteratee=ku,y.keyBy=FD,y.keys=kt,y.keysIn=wr,y.map=ta,y.mapKeys=Zx,y.mapValues=Qx,y.matches=V5,y.matchesProperty=Y5,y.memoize=na,y.merge=e5,y.mergeWith=fg,y.method=k5,y.methodOf=J5,y.mixin=Ju,y.negate=ia,y.nthArg=Z5,y.omit=t5,y.omitBy=r5,y.once=XD,y.orderBy=UD,y.over=Q5,y.overArgs=ZD,y.overEvery=eO,y.overSome=tO,y.partial=qu,y.partialRight=tg,y.partition=$D,y.pick=n5,y.pickBy=hg,y.property=vg,y.propertyOf=rO,y.pull=US,y.pullAll=Kp,y.pullAllBy=$S,y.pullAllWith=MS,y.pullAt=BS,y.range=nO,y.rangeRight=iO,y.rearg=QD,y.reject=HD,y.remove=HS,y.rest=ex,y.reverse=Bu,y.sampleSize=qD,y.set=s5,y.setWith=o5,y.shuffle=zD,y.slice=jS,y.sortBy=WD,y.sortedUniq=YS,y.sortedUniqBy=kS,y.split=P5,y.spread=tx,y.tail=JS,y.take=XS,y.takeRight=ZS,y.takeRightWhile=QS,y.takeWhile=eD,y.tap=gD,y.throttle=rx,y.thru=ea,y.toArray=og,y.toPairs=lg,y.toPairsIn=dg,y.toPath=uO,y.toPlainObject=cg,y.transform=a5,y.unary=nx,y.union=tD,y.unionBy=rD,y.unionWith=nD,y.uniq=iD,y.uniqBy=sD,y.uniqWith=oD,y.unset=c5,y.unzip=Hu,y.unzipWith=Gp,y.update=u5,y.updateWith=f5,y.values=Mi,y.valuesIn=h5,y.without=aD,y.words=_g,y.wrap=ix,y.xor=cD,y.xorBy=uD,y.xorWith=fD,y.zip=hD,y.zipObject=lD,y.zipObjectDeep=dD,y.zipWith=pD,y.entries=lg,y.entriesIn=dg,y.extend=ug,y.extendWith=aa,Ju(y,y),y.add=hO,y.attempt=yg,y.camelCase=g5,y.capitalize=pg,y.ceil=lO,y.clamp=l5,y.clone=ox,y.cloneDeep=cx,y.cloneDeepWith=ux,y.cloneWith=ax,y.conformsTo=fx,y.deburr=gg,y.defaultTo=K5,y.divide=dO,y.endsWith=_5,y.eq=Vr,y.escape=y5,y.escapeRegExp=v5,y.every=xD,y.find=ID,y.findIndex=Hp,y.findKey=Hx,y.findLast=AD,y.findLastIndex=jp,y.findLastKey=jx,y.floor=pO,y.forEach=Vp,y.forEachRight=Yp,y.forIn=qx,y.forInRight=zx,y.forOwn=Kx,y.forOwnRight=Gx,y.get=Gu,y.gt=hx,y.gte=lx,y.has=Yx,y.hasIn=Wu,y.head=zp,y.identity=mr,y.includes=ND,y.indexOf=AS,y.inRange=d5,y.invoke=Xx,y.isArguments=ci,y.isArray=Re,y.isArrayBuffer=dx,y.isArrayLike=br,y.isArrayLikeObject=Lt,y.isBoolean=px,y.isBuffer=Un,y.isDate=gx,y.isElement=_x,y.isEmpty=yx,y.isEqual=vx,y.isEqualWith=bx,y.isError=zu,y.isFinite=wx,y.isFunction=yn,y.isInteger=rg,y.isLength=sa,y.isMap=ng,y.isMatch=mx,y.isMatchWith=Ex,y.isNaN=Sx,y.isNative=Dx,y.isNil=Ox,y.isNull=xx,y.isNumber=ig,y.isObject=Et,y.isObjectLike=Tt,y.isPlainObject=Is,y.isRegExp=Ku,y.isSafeInteger=Ix,y.isSet=sg,y.isString=oa,y.isSymbol=Or,y.isTypedArray=$i,y.isUndefined=Ax,y.isWeakMap=Px,y.isWeakSet=Tx,y.join=NS,y.kebabCase=b5,y.last=Br,y.lastIndexOf=LS,y.lowerCase=w5,y.lowerFirst=m5,y.lt=Cx,y.lte=Rx,y.max=gO,y.maxBy=_O,y.mean=yO,y.meanBy=vO,y.min=bO,y.minBy=wO,y.stubArray=Zu,y.stubFalse=Qu,y.stubObject=sO,y.stubString=oO,y.stubTrue=aO,y.multiply=mO,y.nth=FS,y.noConflict=X5,y.noop=Xu,y.now=ra,y.pad=E5,y.padEnd=S5,y.padStart=D5,y.parseInt=x5,y.random=p5,y.reduce=MD,y.reduceRight=BD,y.repeat=O5,y.replace=I5,y.result=i5,y.round=EO,y.runInContext=U,y.sample=jD,y.size=KD,y.snakeCase=A5,y.some=GD,y.sortedIndex=qS,y.sortedIndexBy=zS,y.sortedIndexOf=KS,y.sortedLastIndex=GS,y.sortedLastIndexBy=WS,y.sortedLastIndexOf=VS,y.startCase=T5,y.startsWith=C5,y.subtract=SO,y.sum=DO,y.sumBy=xO,y.template=R5,y.times=cO,y.toFinite=vn,y.toInteger=Me,y.toLength=ag,y.toLower=N5,y.toNumber=Hr,y.toSafeInteger=Nx,y.toString=nt,y.toUpper=L5,y.trim=F5,y.trimEnd=U5,y.trimStart=$5,y.truncate=M5,y.unescape=B5,y.uniqueId=fO,y.upperCase=H5,y.upperFirst=Vu,y.each=Vp,y.eachRight=Yp,y.first=zp,Ju(y,function(){var r={};return tn(y,function(i,a){it.call(y.prototype,a)||(r[a]=i)}),r}(),{chain:!1}),y.VERSION=s,Lr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){y[r].placeholder=y}),Lr(["drop","take"],function(r,i){ke.prototype[r]=function(a){a=a===t?1:Wt(Me(a),0);var h=this.__filtered__&&!i?new ke(this):this.clone();return h.__filtered__?h.__takeCount__=tr(a,h.__takeCount__):h.__views__.push({size:tr(a,re),type:r+(h.__dir__<0?"Right":"")}),h},ke.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Lr(["filter","map","takeWhile"],function(r,i){var a=i+1,h=a==w||a==ee;ke.prototype[r]=function(g){var v=this.clone();return v.__iteratees__.push({iteratee:be(g,3),type:a}),v.__filtered__=v.__filtered__||h,v}}),Lr(["head","last"],function(r,i){var a="take"+(i?"Right":"");ke.prototype[r]=function(){return this[a](1).value()[0]}}),Lr(["initial","tail"],function(r,i){var a="drop"+(i?"":"Right");ke.prototype[r]=function(){return this.__filtered__?new ke(this):this[a](1)}}),ke.prototype.compact=function(){return this.filter(mr)},ke.prototype.find=function(r){return this.filter(r).head()},ke.prototype.findLast=function(r){return this.reverse().find(r)},ke.prototype.invokeMap=Ke(function(r,i){return typeof r=="function"?new ke(this):this.map(function(a){return ms(a,r,i)})}),ke.prototype.reject=function(r){return this.filter(ia(be(r)))},ke.prototype.slice=function(r,i){r=Me(r);var a=this;return a.__filtered__&&(r>0||i<0)?new ke(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),i!==t&&(i=Me(i),a=i<0?a.dropRight(-i):a.take(i-r)),a)},ke.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},ke.prototype.toArray=function(){return this.take(re)},tn(ke.prototype,function(r,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),h=/^(?:head|last)$/.test(i),g=y[h?"take"+(i=="last"?"Right":""):i],v=h||/^find/.test(i);g&&(y.prototype[i]=function(){var O=this.__wrapped__,N=h?[1]:arguments,B=O instanceof ke,Z=N[0],Q=B||Re(O),ne=function(Ve){var Qe=g.apply(y,Pn([Ve],N));return h&&ue?Qe[0]:Qe};Q&&a&&typeof Z=="function"&&Z.length!=1&&(B=Q=!1);var ue=this.__chain__,_e=!!this.__actions__.length,Ee=v&&!ue,je=B&&!_e;if(!v&&Q){O=je?O:new ke(this);var Se=r.apply(O,N);return Se.__actions__.push({func:ea,args:[ne],thisArg:t}),new Ur(Se,ue)}return Ee&&je?r.apply(this,N):(Se=this.thru(ne),Ee?h?Se.value()[0]:Se.value():Se)})}),Lr(["pop","push","shift","sort","splice","unshift"],function(r){var i=Oo[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",h=/^(?:pop|shift)$/.test(r);y.prototype[r]=function(){var g=arguments;if(h&&!this.__chain__){var v=this.value();return i.apply(Re(v)?v:[],g)}return this[a](function(O){return i.apply(Re(O)?O:[],g)})}}),tn(ke.prototype,function(r,i){var a=y[i];if(a){var h=a.name+"";it.call(Ri,h)||(Ri[h]=[]),Ri[h].push({name:i,func:a})}}),Ri[Vo(t,se).name]=[{name:"wrapper",func:t}],ke.prototype.clone=B2,ke.prototype.reverse=H2,ke.prototype.value=j2,y.prototype.at=_D,y.prototype.chain=yD,y.prototype.commit=vD,y.prototype.next=bD,y.prototype.plant=mD,y.prototype.reverse=ED,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=SD,y.prototype.first=y.prototype.head,ps&&(y.prototype[ps]=wD),y},Pi=v2();Nt?((Nt.exports=Pi)._=Pi,ut._=Pi):Ze._=Pi}).call(wt)})(xc,xc.exports);var O3=Object.defineProperty,I3=Object.defineProperties,A3=Object.getOwnPropertyDescriptors,hd=Object.getOwnPropertySymbols,P3=Object.prototype.hasOwnProperty,T3=Object.prototype.propertyIsEnumerable,ld=(n,e,t)=>e in n?O3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,eo=(n,e)=>{for(var t in e||(e={}))P3.call(e,t)&&ld(n,t,e[t]);if(hd)for(var t of hd(e))T3.call(e,t)&&ld(n,t,e[t]);return n},C3=(n,e)=>I3(n,A3(e));function Cr(n,e,t){let s;const o=Oc(n);return e.rpcMap&&(s=e.rpcMap[o]),s||(s=`${x3}?chainId=eip155:${o}&projectId=${t}`),s}function Oc(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}function dd(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function R3(n,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(n));if(!t.length)return[];const s=[];return t.forEach(o=>{const c=e.namespaces[o].accounts;s.push(...c)}),s}function N3(n={},e={}){const t=pd(n),s=pd(e);return xc.exports.merge(t,s)}function pd(n){var e,t,s,o;const c={};if(!vi(n))return c;for(const[f,l]of Object.entries(n)){const _=nc(f)?[f]:l.chains,p=l.methods||[],E=l.events||[],T=l.rpcMap||{},D=Gs(f);c[D]=C3(eo(eo({},c[D]),l),{chains:tc(_,(e=c[D])==null?void 0:e.chains),methods:tc(p,(t=c[D])==null?void 0:t.methods),events:tc(E,(s=c[D])==null?void 0:s.events),rpcMap:eo(eo({},T),(o=c[D])==null?void 0:o.rpcMap)})}return c}function L3(n){return n.includes(":")?n.split(":")[2]:n}function F3(n){const e={};for(const[t,s]of Object.entries(n)){const o=s.methods||[],c=s.events||[],f=s.accounts||[],l=nc(t)?[t]:s.chains?s.chains:dd(s.accounts);e[t]={chains:l,methods:o,events:c,accounts:f}}return e}const gd={},Ct=n=>gd[n],Ic=(n,e)=>{gd[n]=e};var Ac={exports:{}};(function(n,e){var t=typeof self<"u"?self:wt,s=function(){function c(){this.fetch=!1,this.DOMException=t.DOMException}return c.prototype=t,new c}();(function(c){(function(f){var l={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function _(w){return w&&DataView.prototype.isPrototypeOf(w)}if(l.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],E=ArrayBuffer.isView||function(w){return w&&p.indexOf(Object.prototype.toString.call(w))>-1};function T(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(w))throw new TypeError("Invalid character in header field name");return w.toLowerCase()}function D(w){return typeof w!="string"&&(w=String(w)),w}function C(w){var I={next:function(){var ee=w.shift();return{done:ee===void 0,value:ee}}};return l.iterable&&(I[Symbol.iterator]=function(){return I}),I}function R(w){this.map={},w instanceof R?w.forEach(function(I,ee){this.append(ee,I)},this):Array.isArray(w)?w.forEach(function(I){this.append(I[0],I[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(I){this.append(I,w[I])},this)}R.prototype.append=function(w,I){w=T(w),I=D(I);var ee=this.map[w];this.map[w]=ee?ee+", "+I:I},R.prototype.delete=function(w){delete this.map[T(w)]},R.prototype.get=function(w){return w=T(w),this.has(w)?this.map[w]:null},R.prototype.has=function(w){return this.map.hasOwnProperty(T(w))},R.prototype.set=function(w,I){this.map[T(w)]=D(I)},R.prototype.forEach=function(w,I){for(var ee in this.map)this.map.hasOwnProperty(ee)&&w.call(I,this.map[ee],ee,this)},R.prototype.keys=function(){var w=[];return this.forEach(function(I,ee){w.push(ee)}),C(w)},R.prototype.values=function(){var w=[];return this.forEach(function(I){w.push(I)}),C(w)},R.prototype.entries=function(){var w=[];return this.forEach(function(I,ee){w.push([ee,I])}),C(w)},l.iterable&&(R.prototype[Symbol.iterator]=R.prototype.entries);function q(w){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}function K(w){return new Promise(function(I,ee){w.onload=function(){I(w.result)},w.onerror=function(){ee(w.error)}})}function se(w){var I=new FileReader,ee=K(I);return I.readAsArrayBuffer(w),ee}function L(w){var I=new FileReader,ee=K(I);return I.readAsText(w),ee}function M(w){for(var I=new Uint8Array(w),ee=new Array(I.length),X=0;X<I.length;X++)ee[X]=String.fromCharCode(I[X]);return ee.join("")}function x(w){if(w.slice)return w.slice(0);var I=new Uint8Array(w.byteLength);return I.set(new Uint8Array(w)),I.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(w){this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:l.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:l.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():l.arrayBuffer&&l.blob&&_(w)?(this._bodyArrayBuffer=x(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||E(w))?this._bodyArrayBuffer=x(w):this._bodyText=w=Object.prototype.toString.call(w):this._bodyText="",this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var w=q(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?q(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(se)}),this.text=function(){var w=q(this);if(w)return w;if(this._bodyBlob)return L(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(M(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(V)}),this.json=function(){return this.text().then(JSON.parse)},this}var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function u(w){var I=w.toUpperCase();return m.indexOf(I)>-1?I:w}function b(w,I){I=I||{};var ee=I.body;if(w instanceof b){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,I.headers||(this.headers=new R(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!ee&&w._bodyInit!=null&&(ee=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=I.credentials||this.credentials||"same-origin",(I.headers||!this.headers)&&(this.headers=new R(I.headers)),this.method=u(I.method||this.method||"GET"),this.mode=I.mode||this.mode||null,this.signal=I.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ee)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ee)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})};function V(w){var I=new FormData;return w.trim().split("&").forEach(function(ee){if(ee){var X=ee.split("="),G=X.shift().replace(/\+/g," "),W=X.join("=").replace(/\+/g," ");I.append(decodeURIComponent(G),decodeURIComponent(W))}}),I}function k(w){var I=new R,ee=w.replace(/\r?\n[\t ]+/g," ");return ee.split(/\r?\n/).forEach(function(X){var G=X.split(":"),W=G.shift().trim();if(W){var J=G.join(":").trim();I.append(W,J)}}),I}P.call(b.prototype);function ie(w,I){I||(I={}),this.type="default",this.status=I.status===void 0?200:I.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in I?I.statusText:"OK",this.headers=new R(I.headers),this.url=I.url||"",this._initBody(w)}P.call(ie.prototype),ie.prototype.clone=function(){return new ie(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new R(this.headers),url:this.url})},ie.error=function(){var w=new ie(null,{status:0,statusText:""});return w.type="error",w};var ce=[301,302,303,307,308];ie.redirect=function(w,I){if(ce.indexOf(I)===-1)throw new RangeError("Invalid status code");return new ie(null,{status:I,headers:{location:w}})},f.DOMException=c.DOMException;try{new f.DOMException}catch{f.DOMException=function(I,ee){this.message=I,this.name=ee;var X=Error(I);this.stack=X.stack},f.DOMException.prototype=Object.create(Error.prototype),f.DOMException.prototype.constructor=f.DOMException}function de(w,I){return new Promise(function(ee,X){var G=new b(w,I);if(G.signal&&G.signal.aborted)return X(new f.DOMException("Aborted","AbortError"));var W=new XMLHttpRequest;function J(){W.abort()}W.onload=function(){var re={status:W.status,statusText:W.statusText,headers:k(W.getAllResponseHeaders()||"")};re.url="responseURL"in W?W.responseURL:re.headers.get("X-Request-URL");var we="response"in W?W.response:W.responseText;ee(new ie(we,re))},W.onerror=function(){X(new TypeError("Network request failed"))},W.ontimeout=function(){X(new TypeError("Network request failed"))},W.onabort=function(){X(new f.DOMException("Aborted","AbortError"))},W.open(G.method,G.url,!0),G.credentials==="include"?W.withCredentials=!0:G.credentials==="omit"&&(W.withCredentials=!1),"responseType"in W&&l.blob&&(W.responseType="blob"),G.headers.forEach(function(re,we){W.setRequestHeader(we,re)}),G.signal&&(G.signal.addEventListener("abort",J),W.onreadystatechange=function(){W.readyState===4&&G.signal.removeEventListener("abort",J)}),W.send(typeof G._bodyInit>"u"?null:G._bodyInit)})}return de.polyfill=!0,c.fetch||(c.fetch=de,c.Headers=R,c.Request=b,c.Response=ie),f.Headers=R,f.Request=b,f.Response=ie,f.fetch=de,Object.defineProperty(f,"__esModule",{value:!0}),f})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=s;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,n.exports=e})(Ac,Ac.exports);var _d=wg(Ac.exports);const yd={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"},vd=10;class Yn{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Qt.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!yl(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const s=Xi(e),c=await(await _d(this.url,Object.assign(Object.assign({},yd),{body:s}))).json();this.onPayload({data:c})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!yl(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Xi({id:1,jsonrpc:"2.0",method:"test",params:[]});await _d(e,Object.assign(Object.assign({},yd),{body:t}))}this.onOpen()}catch(t){const s=this.parseError(t);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Pa(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=ks(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return fl(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>vd&&this.events.setMaxListeners(vd)}}class U3{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Ct("events"),this.client=Ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||Cr(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(xn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Cr(e,this.namespace);return typeof s>"u"?void 0:new Sn(new Yn(s,Ct("disableProviderPing")))}}class $3{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Ct("events"),this.client=Ct("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const s=Oc(e);if(!this.httpProviders[s]){const o=t||Cr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit(xn.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||Cr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Sn(new Yn(s,Ct("disableProviderPing")))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=Oc(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,s;let o=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const c=parseInt(o,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class M3{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Ct("events"),this.client=Ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Cr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(xn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Cr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Sn(new Yn(s,Ct("disableProviderPing")))}}class B3{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Ct("events"),this.client=Ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||Cr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(xn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Cr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Sn(new Yn(s,Ct("disableProviderPing")))}}class H3{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Ct("events"),this.client=Ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(xn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const s=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new Sn(new Yn(s,Ct("disableProviderPing")))}}class j3{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Ct("events"),this.client=Ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Cr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(xn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Cr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Sn(new Yn(s,Ct("disableProviderPing")))}}class q3{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Ct("events"),this.client=Ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Cr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(xn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Cr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Sn(new Yn(s,Ct("disableProviderPing")))}}var z3=Object.defineProperty,K3=Object.defineProperties,G3=Object.getOwnPropertyDescriptors,bd=Object.getOwnPropertySymbols,W3=Object.prototype.hasOwnProperty,V3=Object.prototype.propertyIsEnumerable,wd=(n,e,t)=>e in n?z3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,to=(n,e)=>{for(var t in e||(e={}))W3.call(e,t)&&wd(n,t,e[t]);if(bd)for(var t of bd(e))V3.call(e,t)&&wd(n,t,e[t]);return n},Pc=(n,e)=>K3(n,G3(e));class ro{constructor(e){this.events=new Qt.exports,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Je.pino(Je.getDefaultLoggerOptions({level:e?.logger||ud})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new ro(e);return await t.initialize(),t}async request(e,t){const[s,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:to({},e),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(e,t,s){this.request(e,s).then(o=>t(null,o)).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:$t("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(c=>{this.session=c,this.namespaces||(this.namespaces=F3(c.namespaces),this.persist("namespaces",this.namespaces))}).catch(c=>{if(c.message!==od)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Vn(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Dc.init({logger:this.providerOpts.logger||ud,relayUrl:this.providerOpts.relayUrl||E3,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Gs(t)))];Ic("client",this.client),Ic("events",this.events),Ic("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const s=R3(t,this.session),o=dd(s),c=N3(this.namespaces,this.optionalNamespaces),f=Pc(to({},c[t]),{accounts:s,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new $3({namespace:f});break;case"solana":this.rpcProviders[t]=new M3({namespace:f});break;case"cosmos":this.rpcProviders[t]=new B3({namespace:f});break;case"polkadot":this.rpcProviders[t]=new U3({namespace:f});break;case"cip34":this.rpcProviders[t]=new H3({namespace:f});break;case"elrond":this.rpcProviders[t]=new j3({namespace:f});break;case"multiversx":this.rpcProviders[t]=new q3({namespace:f});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:s}=t;if(s.name==="accountsChanged"){const o=s.data;o&&Vn(o)&&this.events.emit("accountsChanged",o.map(L3))}else s.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s;const{namespaces:o}=t,c=(s=this.client)==null?void 0:s.session.get(e);this.session=Pc(to({},c),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Pc(to({},$t("USER_DISCONNECTED")),{data:e.topic}))}),this.on(xn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:o}=e;t&&Object.keys(t).length&&(this.namespaces=t),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,s];if(t&&!Object.keys(this.namespaces||{}).map(f=>Gs(f)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const o=Gs(Object.keys(this.namespaces)[0]),c=this.rpcProviders[o].getDefaultChain();return[o,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var s;if(!this.namespaces)return;const[o,c]=this.validateChain(e);t||this.getProvider(o).setDefaultChain(c),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${fd}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${fd}/${e}`)}}const Y3=ro;$n.UniversalProvider=Y3,$n.default=ro,Object.defineProperty($n,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
